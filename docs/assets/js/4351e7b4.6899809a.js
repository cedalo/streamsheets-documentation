"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[83014],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>u});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,l=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),d=p(a),u=n,g=d["".concat(l,".").concat(u)]||d[u]||c[u]||s;return a?r.createElement(g,i(i({ref:t},m),{},{components:a})):r.createElement(g,i({ref:t},m))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,i=new Array(s);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var p=2;p<s;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},50669:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>v,frontMatter:()=>d,metadata:()=>g,toc:()=>f});var r=a(3905),n=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&m(e,a,t[a]);if(o)for(var a of o(t))p.call(t,a)&&m(e,a,t[a]);return e};const d={id:"mc-streams",title:"Streams",sidebar_label:"Streams"},u=void 0,g={unversionedId:"mc-streams",id:"version-2.2/mc-streams",title:"Streams",description:"The Management Center allows the administration of the CSP Eclipse Mosquitto plugin.",source:"@site/management-center_versioned_docs/version-2.2/streams.md",sourceDirName:".",slug:"/mc-streams",permalink:"/management-center/2.2/mc-streams",draft:!1,tags:[],version:"2.2",frontMatter:{id:"mc-streams",title:"Streams",sidebar_label:"Streams"},sidebar:"version-2.2/someSidebar",previous:{title:"Plugins",permalink:"/management-center/2.2/mc-plugins"},next:{title:"Connections",permalink:"/management-center/2.2/mc-connections"}},h={},f=[{value:"Cedalo Stream Processing plugin for Mosquitto",id:"cedalo-stream-processing-plugin-for-mosquitto",level:2},{value:"Mosquitto MQTT Streams",id:"mosquitto-mqtt-streams",level:3},{value:"Streams",id:"streams",level:3},{value:"Stream processing",id:"stream-processing",level:3},{value:"Stream persistence and replay",id:"stream-persistence-and-replay",level:3},{value:"Replaying",id:"replaying",level:4},{value:"Time to Live (TTL)",id:"time-to-live-ttl",level:4},{value:"Clear stream messages",id:"clear-stream-messages",level:4},{value:"Delete stream",id:"delete-stream",level:4}],b={toc:f};function v(e){var t,n=e,{components:m}=n,d=((e,t)=>{var a={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&o)for(var r of o(e))t.indexOf(r)<0&&p.call(e,r)&&(a[r]=e[r]);return a})(n,["components"]);return(0,r.kt)("wrapper",(t=c(c({},b),d),s(t,i({components:m,mdxType:"MDXLayout"}))),(0,r.kt)("p",null,"The Management Center allows the administration of the CSP Eclipse Mosquitto plugin. "),(0,r.kt)("h2",c({},{id:"cedalo-stream-processing-plugin-for-mosquitto"}),"Cedalo Stream Processing plugin for Mosquitto"),(0,r.kt)("p",null,"The Cedalo Stream Processing (CSP) plugin allows the creation of topic streams in the\nMosquitto broker. A topic stream receives all messages on a specified topic\nand can then perform the following tasks:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Republish messages on a different topic, with optional QoS and retain control"),(0,r.kt)("li",{parentName:"ul"},"Persist messages to disk, with the ability to replay messages in the future"),(0,r.kt)("li",{parentName:"ul"},"Process JSON payload to extract particular data values prior to republishing"),(0,r.kt)("li",{parentName:"ul"},"Apply aggregation functions to data prior to republishing/persisting"),(0,r.kt)("li",{parentName:"ul"},"Select which messages are processed/persisted based on data values in the payload")),(0,r.kt)("p",null,"Controlling the plugin is carried out with an MQTT topic based API. The\nManagement Center for Mosquitto web tool provides a convenient front end to\naccess the API, the mosquitto_ctrl tool provides command line access to the\nAPI, or custom tools can be written to control it."),(0,r.kt)("h3",c({},{id:"mosquitto-mqtt-streams"}),"Mosquitto MQTT Streams"),(0,r.kt)("p",null,"To understand more about the Stream Plugin & how to enable it see the ",(0,r.kt)("a",c({parentName:"p"},{href:"/mosquitto/mosquitto-streams/"}),"Mosquitto Docs page"),' explanation page.\nThese streams can be created and modified using the management center.\nSelect the "Streams" tab to access the plugin in the UI:'),(0,r.kt)("h3",c({},{id:"streams"}),"Streams"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:a(5010).Z,width:"1270",height:"631"})),(0,r.kt)("p",null,"The streams UI serves as an overview of your current setup streams and their state. It is further possible to create new streams if necessary. A stream consists out of different possible settings:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:a(81904).Z,width:"1195",height:"1102"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Source topic:")," The topic to be processed with this stream."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Target topic:")," The topic to forward the processed data to."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Tagret QoS:"),"  Quality of service of the target topic."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"TTL:")," ",(0,r.kt)("a",c({parentName:"p"},{href:"#time-to-live-ttl"}),"Time to live")," for persisted stream data."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Edit field:")," Field to specify the aggregations. Leave empty to simply create a stream rerouting from source topic to target topic."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Process Switch:"),' If active, aggregation statement from "Edit field" is utilized.'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Persist Switch:")," If active, stream data is saved to drive."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Active Switch:")," If active, stream is enabled. "),(0,r.kt)("h3",c({},{id:"stream-processing"}),"Stream processing"),(0,r.kt)("p",null,'The stream processing feature allows messages with JSON payloads to be modified\nbefore they are republished and/or persisted to disk. This is managed with a\nuser defined query that has similar concepts to a SQL statement.\nThe aggregations are specified in the "Edit Field". To closer understand the syntax of stream aggregations see the ',(0,r.kt)("a",c({parentName:"p"},{href:"/mosquitto/mosquitto-streams/"}),"Mosquitto Docs page"),"."),(0,r.kt)("h3",c({},{id:"stream-persistence-and-replay"}),"Stream persistence and replay"),(0,r.kt)("p",null,"The stream persistence feature allows all messages received on a stream to be\nsaved to disk and then replayed to a new topic at a later point in time.\nPersistence can be turned on or off at any point for any stream, if the feature\nis available."),(0,r.kt)("p",null,"When used on a stream that has processing configured, the processed payload\nwill be stored not the original payload."),(0,r.kt)("p",null,"Stream persistence is not available for 32-bit platforms."),(0,r.kt)("h4",c({},{id:"replaying"}),"Replaying"),(0,r.kt)("p",null,'Replaying a stream means republishing its messages on a different topic. A\nsingle replay may be running for each stream at once. Replaying is only possible, if "persistence" is turned on. '),(0,r.kt)("p",null,"To replay a stream via the management center navigate to the stream overview page and click the little play button on the right side of your stream. "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:a(9340).Z,width:"1270",height:"631"})),(0,r.kt)("p",null,"A dialogue will open, where one is able to set the parameters for the replay:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:a(51104).Z,width:"607",height:"537"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Replay topic:")," The topic to play the replay in."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"gte/lte:"),' Optional. Use a UTC timestamp to specify a time interval of the replay. "gte" = Greater than or equal. "lte" = Less than or equal.'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Reverse:")," If active, the message stream will be replayed in reverse. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Limit:")," Optional. Limit the number of messages replayed. This number represents a maximum value and may not be reached if there are not enough messages persisted. A value of ",(0,r.kt)("inlineCode",{parentName:"p"},"-1"),", the default, means that no\nnumerical limit will be applied."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Speed:")," Optional. Change the speed at which the messages are replayed. This can be one of the strings ",(0,r.kt)("inlineCode",{parentName:"p"},'"original"')," or ",(0,r.kt)("inlineCode",{parentName:"p"},'"fastest"'),", or a number indicating the factor. For example, a speed of ",(0,r.kt)("inlineCode",{parentName:"p"},"2.5")," means replay at 2.5x the original speed."),(0,r.kt)("h4",c({},{id:"time-to-live-ttl"}),"Time to Live (TTL)"),(0,r.kt)("p",null,"When creating a new stream and enabling persistence, the Time to Live (TTL)\nproperty will be used, which allows the disk usage of streams to be limited.\nSetting TTL to 0 means that all messages received will be kept on disk forever,\nunless they are manually cleared. Setting TTL to a positive integer means that\nmessages will be removed from the persistence store in the future. TTL is\nmeasured in seconds, and guarantees that messages that are younger than that\nnumber of seconds will be kept in the database. Messages older than the TTL\ninterval are not immediately removed from the database: they can remain in the\ndatabase until at most twice the TTL interval before they are removed,\ndepending on when they were received."),(0,r.kt)("h4",c({},{id:"clear-stream-messages"}),"Clear stream messages"),(0,r.kt)("p",null,"Clears out all persisted streaming data from disc.\n",(0,r.kt)("img",{alt:"image",src:a(51619).Z,width:"1270",height:"631"})),(0,r.kt)("h4",c({},{id:"delete-stream"}),"Delete stream"),(0,r.kt)("p",null,"Deletes the whole stream.\n",(0,r.kt)("img",{alt:"image",src:a(37763).Z,width:"1270",height:"631"})))}v.isMDXComponent=!0},5010:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/Streams-b20efd5bbd7f412e5676e1baf80ea5f5.png"},51619:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/clear-fd738016860784ce4f74c96afaed3b80.png"},37763:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/delete-2d97f73861c00ebc451513efd9f66c73.png"},9340:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/replay-8fd82c9dc6605252d73b794ba1037d35.png"},51104:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/replaydia-d3053871fb912cfa0030867d9f3a730b.png"},81904:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/streamexample-5b8a9929123c4e20febb844f1dfa6d84.png"}}]);