"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[31774],{83166:(e,t,n)=>{var a=n(64836);t.Z=void 0;var i=a(n(64938)),l=n(85893),r=(0,i.default)((0,l.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=r},13328:(e,t,n)=>{var a=n(64836);t.Z=void 0;var i=a(n(64938)),l=n(85893),r=(0,i.default)((0,l.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}),"NewReleases");t.Z=r},57283:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>f,contentTitle:()=>v,default:()=>y,frontMatter:()=>p,metadata:()=>g,toc:()=>b});var a=n(3905),i=n(78901),l=n(49044),r=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,m=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&m(e,n,t[n]);if(c)for(var n of c(t))d.call(t,n)&&m(e,n,t[n]);return e};const p={id:"mmc-high-availability",title:"High Availability"},v=void 0,g={unversionedId:"mmc-high-availability",id:"version-2.5/mmc-high-availability",title:"High Availability",description:"Introduction",source:"@site/management-center_versioned_docs/version-2.5/high-availability.md",sourceDirName:".",slug:"/mmc-high-availability",permalink:"/management-center/mmc-high-availability",draft:!1,tags:[],version:"2.5",frontMatter:{id:"mmc-high-availability",title:"High Availability"},sidebar:"someSidebar",previous:{title:"User Profile REST API",permalink:"/management-center/mc-user-profile-rest-api"},next:{title:"Inspect Clients \u2b50",permalink:"/management-center/mc-inspect-clients"}},f={},b=[{value:"Introduction",id:"introduction",level:2},{value:"Enable Cluster Management",id:"enable-cluster-management",level:2},{value:"Create Cluster",id:"create-cluster",level:2},{value:"Cluster details",id:"cluster-details",level:2},{value:"Remove nodes from a cluster",id:"remove-nodes-from-a-cluster",level:2},{value:"Delete a Cluster",id:"delete-a-cluster",level:2}],k={toc:b};function y(e){var t,r=e,{components:m}=r,p=((e,t)=>{var n={};for(var a in e)u.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&c)for(var a of c(e))t.indexOf(a)<0&&d.call(e,a)&&(n[a]=e[a]);return n})(r,["components"]);return(0,a.kt)("wrapper",(t=h(h({},k),p),o(t,s({components:m,mdxType:"MDXLayout"}))),(0,a.kt)(i.Z,{version:"2.3",mdxType:"SinceVersion"}),(0,a.kt)(l.Z,{mdxType:"PremiumFeature"}),(0,a.kt)("br",null),(0,a.kt)("br",null),(0,a.kt)("h2",h({},{id:"introduction"}),"Introduction"),(0,a.kt)("p",null,"The Cedalo high availability feature provides the ability to run a cluster of Mosquitto nodes with a single leader and multiple followers, so that broker availability can be ensured even if a single node becomes unavailable through fault or for an upgrade. This document describes the recommended cluster architecture and how to configure the cluster for first use, and in the future."),(0,a.kt)("p",null,"To understand more about the underlying architecture and configuration visit the ",(0,a.kt)("a",h({parentName:"p"},{href:"/mosquitto/broker-dynamic-security"}),"Mosquitto documentation")),(0,a.kt)("h2",h({},{id:"enable-cluster-management"}),"Enable Cluster Management"),(0,a.kt)("p",null,"To enable the Cluster Management feature, make sure you are using the Pro Edition of Mosquitto and that you have the feature enabled in your license. Also, ensure that your config file (specified with ",(0,a.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default saved in ",(0,a.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry inside of the ",(0,a.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{}),'    {\n      "name": "cluster-management"\n    }\n')),(0,a.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,a.kt)("inlineCode",{parentName:"p"},"cluster-management")," plugin is enabled and loaded into the console:"),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{}),'Loaded plugin: "cedalo_cluster_management" (Cedalo Cluster Management)\n')),(0,a.kt)("h2",h({},{id:"create-cluster"}),"Create Cluster"),(0,a.kt)("admonition",h({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"Before creating a cluster, it is necessary to connect your future cluster nodes to the Management Center. Make sure to be connected via Port 1885, to allow direct communication to the individual nodes, using a client with ACLs to read and write on the ",(0,a.kt)("em",{parentName:"p"},"$CONTROL")," topic of the broker.")),(0,a.kt)("p",null,'To navigate to the High Availability Cluster overview, select the "Cluster Management" menu entry from the left main menu.'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(94633).Z,width:"1277",height:"810"})),(0,a.kt)("p",null,'To create a new high availability cluster, click on the button "New cluster".'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(59109).Z,width:"1282",height:"900"})),(0,a.kt)("p",null,"On the following page you can enter the detail information about the cluster that you want to create."),(0,a.kt)("p",null,"Select a unique Node ID, enter the IP address of the broker with in its private network and select the preconfigured connection. "),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(39713).Z,width:"1277",height:"955"})),(0,a.kt)("p",null,'When you have entered all the necessary information, click on "Save". The new cluster will now be set up and the configuration will appear in the overview list.'),(0,a.kt)("h2",h({},{id:"cluster-details"}),"Cluster details"),(0,a.kt)("p",null,"Select the cluster in the overview list. This will navigate you to the detail view of the cluster.\nThe leader and follower are indicated by different icons"),(0,a.kt)("p",null,'To add a new node, first switch into edit mode by clicking on the button "Edit".\nThen, click on "Add node", which will open a select dialog that lists all available Mosquitto connections.'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(49189).Z,width:"1167",height:"1050"})),(0,a.kt)("p",null,'See here a cluster with four nodes, with the leader being the one with "Node ID" 2.'),(0,a.kt)("h2",h({},{id:"remove-nodes-from-a-cluster"}),"Remove nodes from a cluster"),(0,a.kt)("p",null,'Navigate to the cluster detail page (e.g., by selecting it in the overview list) and click the "Edit" button. Then, in order to remove a node, click on the "Remove" button next to that node.'),(0,a.kt)("h2",h({},{id:"delete-a-cluster"}),"Delete a Cluster"),(0,a.kt)("p",null,'Delete the Cluster by clicking the "bin" icon in the overview menu.'))}y.isMDXComponent=!0},49044:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),i=n(74889),l=n(62659),r=n(83166);function o({}){return a.createElement(i.Z,{sx:{margin:"5px",color:"#ffffff",backgroundColor:l.Z[500]},size:"small",icon:a.createElement(r.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},78901:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),i=n(74889),l=n(13328);function r({version:e}){return e?a.createElement(i.Z,{sx:{margin:"5px"},color:"info",size:"small",icon:a.createElement(l.Z,{size:"small"}),label:`${e}`}):a.createElement(a.Fragment,null)}},94633:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/clusteroverview-92819e8851d67112801935972d5f3f18.png"},49189:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/clusterview-8d46702a3cea327d9809b987d735ed7b.png"},59109:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/createCluster-c9852b481002f4cfe80d86afb2194df3.png"},39713:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/createClusterex-b8498ed5da0dc16020b79e8bc085fa2f.png"}}]);