"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[58602],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var i=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(n),h=s,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||r;return n?i.createElement(m,a(a({ref:t},p),{},{components:n})):i.createElement(m,a({ref:t},p))}));function h(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,a=new Array(r);a[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:s,a[1]=o;for(var c=2;c<r;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},47590:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>b,contentTitle:()=>h,default:()=>g,frontMatter:()=>d,metadata:()=>m,toc:()=>f});var i=n(3905),s=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&p(e,n,t[n]);if(o)for(var n of o(t))c.call(t,n)&&p(e,n,t[n]);return e};const d={id:"supported-mqtt-versions",title:"Supported MQTT Versions",sidebar_label:"Supported MQTT Versions"},h=void 0,m={unversionedId:"MQTT/supported-mqtt-versions",id:"version-2.7/MQTT/supported-mqtt-versions",title:"Supported MQTT Versions",description:"Message expiry",source:"@site/mosquitto_versioned_docs/version-2.7/MQTT/NEW_supported-mqtt-versions.md",sourceDirName:"MQTT",slug:"/MQTT/supported-mqtt-versions",permalink:"/mosquitto/MQTT/supported-mqtt-versions",draft:!1,tags:[],version:"2.7",frontMatter:{id:"supported-mqtt-versions",title:"Supported MQTT Versions",sidebar_label:"Supported MQTT Versions"}},b={},f=[{value:"Message expiry",id:"message-expiry",level:3},{value:"Session expiry",id:"session-expiry",level:3},{value:"Metadata attachment",id:"metadata-attachment",level:3},{value:"Extensions",id:"extensions",level:3},{value:"Client and server restrictions",id:"client-and-server-restrictions",level:3},{value:"Negative acknowledgments",id:"negative-acknowledgments",level:3},{value:"Will delay interval",id:"will-delay-interval",level:3},{value:"Shared subscriptions",id:"shared-subscriptions",level:3},{value:"Subscription identifier",id:"subscription-identifier",level:3}],v={toc:f};function g(e){var t,n=e,{components:s}=n,p=((e,t)=>{var n={};for(var i in e)l.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&o)for(var i of o(e))t.indexOf(i)<0&&c.call(e,i)&&(n[i]=e[i]);return n})(n,["components"]);return(0,i.kt)("wrapper",(t=u(u({},v),p),r(t,a({components:s,mdxType:"MDXLayout"}))),(0,i.kt)("h3",u({},{id:"message-expiry"}),"Message expiry"),(0,i.kt)("p",null,'As the name suggests, the "Message expiry" feature allows you to set a length of time the message is valid. As the time runs out, the broker is no longer delivering the message to subscribers anymore.'),(0,i.kt)("h3",u({},{id:"session-expiry"}),"Session expiry"),(0,i.kt)("p",null,"MQTT v3.1.1 does not stipulate the expiration of persistent sessions.\nAny persistent session, if not personified by the client, runs endlessly."),(0,i.kt)("p",null,"Following the number of persistent sessions still running, but not in use, will occupy the resource of the server with time."),(0,i.kt)("p",null,"System architects build expiration times for the use of persistent sessions to face that problem."),(0,i.kt)("p",null,'MQTT 5.0 divides the "Clean Session" into "Clean Start" and "Session Expiry Interval".'),(0,i.kt)("p",null,"The field ",(0,i.kt)("inlineCode",{parentName:"p"},"Clean Start")," specifies whether a new session is needed as the client reconnects again."),(0,i.kt)("p",null,"Read more about Clean Start:\n","[Here]"," (NEW_mosquitto-configuration.md).\nAnd ","[here]"," (NEW_publishing.md).\nAnd ","[here]"," (NEW_security.md).\nAnd ","[here]"," (./mqtt)."),(0,i.kt)("p",null,"The field ",(0,i.kt)("inlineCode",{parentName:"p"},"Session Expiry Interval")," specifies the session expiration time."),(0,i.kt)("p",null,"Read more about Session Expiry Interval:\n","[Here]"," (NEW_publishing.md).\nAnd ","[here]"," (NEW_subscribing.md).\nAnd ","[here]"," (./mqtt)."),(0,i.kt)("p",null,'Both, "Clean Start" and "Session Expiry Interval" are specified when connecting.'),(0,i.kt)("p",null,"Additional tip:"),(0,i.kt)("p",null,"Add a retainFlag to turn your last sent message in a retained message."),(0,i.kt)("p",null,"A retained message safes the last known value of the topic."),(0,i.kt)("p",null,"As soon as a publisher disconnects ungracefully from the broker. The retained message gets delivered to all new subscribers."),(0,i.kt)("p",null,"Let's take a open car door as example. The driver will want to know whether the car door is open and not closed as the car battery comes on again after the car died."),(0,i.kt)("p",null,"It's only possible to save up to one retained message, equal to one retained value."),(0,i.kt)("p",null,"The session terminates when the client disconnects using a DISCONNECT packet."),(0,i.kt)("h3",u({},{id:"metadata-attachment"}),"Metadata attachment"),(0,i.kt)("p",null,"You can attach metadata to the MQTT packet."),(0,i.kt)("h3",u({},{id:"extensions"}),"Extensions"),(0,i.kt)("p",null,"MQTT can be mingled with many more extensions."),(0,i.kt)("h3",u({},{id:"client-and-server-restrictions"}),"Client and server restrictions"),(0,i.kt)("p",null,"Read more about Limitations:\n","[Here]"," (NEW_mosquitto-configuration.md).\nAnd ","[here]"," (NEW_security.md)."),(0,i.kt)("h3",u({},{id:"negative-acknowledgments"}),"Negative acknowledgments"),(0,i.kt)("p",null,"Negative acknowledgments notify the client whenever an error occurs."),(0,i.kt)("p",null,"In MQTT v3.1.1 this may lead to disconnecting the client from the broker."),(0,i.kt)("p",null,"The client had to subscribe to the topics again."),(0,i.kt)("p",null,"v.5 gives the subscriber a chance to react before disconnection (best case scenario)."),(0,i.kt)("p",null,"The packet sent in case of a negative acknowledgement gives the client all the information needed to make the necessary changes without having to contact operations or support to know what went wrong. "),(0,i.kt)("p",null,"And how to successfully uphold the connection."),(0,i.kt)("p",null,"Example: A subscriber wants to unsubscribe from a topic."),(0,i.kt)("p",null,"In earlier MQTT versions whenever an error occurred during the unsubscribing-process chances were high this may led to disconnecting the client from the broker."),(0,i.kt)("p",null,"Version 5 helps the client to react before disconnecting."),(0,i.kt)("p",null,"![negativeAcknowledgement]"," (./_images//negativeAcknowledgement.gif)"),(0,i.kt)("h3",u({},{id:"will-delay-interval"}),"Will delay interval"),(0,i.kt)("p",null,"The will delay interval affects when the LWT is published after a client disconnects unexpectedly."),(0,i.kt)("p",null,"The idea is that a client is setting a LWT - Last Will and Testament - as it connects.\nWhenever the client disconnects unexpectedly, the broker publishes the message set as LWT on the clients behalf."),(0,i.kt)("p",null,"The LWT acts as a failure message for others to know that the client has failed."),(0,i.kt)("p",null,'A possible LWT message could therefore be "Client AXY has disconnected disgracefully".'),(0,i.kt)("p",null,"If the client disconnects only briefly, there may not be a need to have the LWT sent."),(0,i.kt)("p",null,"Setting a will delay interval means the original persistent client can reconnect within the set time and the LWT will not be published."),(0,i.kt)("p",null,"Example:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The will delay interval is set at 5seconds.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The clients disconnects ungracefully.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The client reconnects within 5 seconds. The LWT is not sent.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If it does not reconnect after 5 seconds, the LWT is published."))),(0,i.kt)("h3",u({},{id:"shared-subscriptions"}),"Shared subscriptions"),(0,i.kt)("p",null,'Imagine a few clients subscribe to a topic. But the messages published are only received by one of the subscribers. That is what "Shared subscriptions" enable.'),(0,i.kt)("p",null,"Read more about ","[Subscriptions]"," (NEW_subscribing.md)."),(0,i.kt)("p",null,"The workload of the messages sent are getting distributed."),(0,i.kt)("h3",u({},{id:"subscription-identifier"}),"Subscription identifier"),(0,i.kt)("p",null,"Whenever a client makes a subscription, it does so with a topic, which is a string.\nv.5 clients can also set a subscription identifier, which is an integer number.\nIf that is set, then when messages matching that subscription are sent to the client by the broker, the broker also attaches the subscription identifier for the subscription that matched."))}g.isMDXComponent=!0}}]);