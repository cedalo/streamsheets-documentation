"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[92850],{83166:(e,t,n)=>{var a=n(64836);t.Z=void 0;var i=a(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=s},13328:(e,t,n)=>{var a=n(64836);t.Z=void 0;var i=a(n(64938)),o=n(85893),s=(0,i.default)((0,o.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}),"NewReleases");t.Z=s},18793:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>y,contentTitle:()=>k,default:()=>w,frontMatter:()=>m,metadata:()=>g,toc:()=>f});var a=n(3905),i=n(78901),o=n(49044),s=Object.defineProperty,r=Object.defineProperties,l=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&d(e,n,t[n]);if(p)for(var n of p(t))u.call(t,n)&&d(e,n,t[n]);return e};const m={id:"mc-guide-tokens",title:"Application Tokens",sidebar_label:"Application Tokens"},k=void 0,g={unversionedId:"management-center/guides/mc-guide-tokens",id:"version-2.8/management-center/guides/mc-guide-tokens",title:"Application Tokens",description:"Application tokens provide an alternative way of accessing MMC that can be used by the other applications and services (",source:"@site/mosquitto_versioned_docs/version-2.8/management-center/guides/tokens.md",sourceDirName:"management-center/guides",slug:"/management-center/guides/mc-guide-tokens",permalink:"/mosquitto/2.8/management-center/guides/mc-guide-tokens",draft:!1,tags:[],version:"2.8",frontMatter:{id:"mc-guide-tokens",title:"Application Tokens",sidebar_label:"Application Tokens"},sidebar:"someSidebar",previous:{title:"Management Center Guides",permalink:"/mosquitto/2.8/management-center/guides/"},next:{title:"Custom Themes",permalink:"/mosquitto/2.8/management-center/guides/mc-customthemes"}},y={},f=[{value:"Enable Application Tokens Plugin",id:"enable-application-tokens-plugin",level:2},{value:"What is an application token",id:"what-is-an-application-token",level:2},{value:"How to use application token",id:"how-to-use-application-token",level:2},{value:"Types of responses",id:"types-of-responses",level:3}],b={toc:f};function w(e){var t,n=e,{components:s}=n,d=((e,t)=>{var n={};for(var a in e)c.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&p)for(var a of p(e))t.indexOf(a)<0&&u.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=h(h({},b),d),r(t,l({components:s,mdxType:"MDXLayout"}))),(0,a.kt)("span",null),(0,a.kt)(i.Z,{version:"2.5",mdxType:"SinceVersion"}),(0,a.kt)(o.Z,{mdxType:"PremiumFeature"}),(0,a.kt)("br",null),(0,a.kt)("br",null),(0,a.kt)("p",null,"Application tokens provide an alternative way of accessing MMC that can be used by the other applications and services (\nnon-human MMC users). The entity that receives an application token can include it in its requests to the REST API of\nthe MMC and obtain the same access rights as an authenticated user. The access rights are limited by the role attribute\nof the token."),(0,a.kt)("admonition",h({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"The Application Tokens Feature can be accessed only by the users with an ",(0,a.kt)("em",{parentName:"p"},"admin")," role.")),(0,a.kt)("admonition",h({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"Application Tokens are especially useful with the Single Sign-On, since the SSO plugin replaces the standard\nauthentication you won't have a way to access the MMC REST APIs using external services and applications. That's\nprecisely the right use case for Application Tokens Feature.")),(0,a.kt)("h2",h({},{id:"enable-application-tokens-plugin"}),"Enable Application Tokens Plugin"),(0,a.kt)("p",null,"To enable the Application Tokens Feature, ensure you are using the Pro Edition of Mosquitto and that you have the\nfeature enabled in your license. Also ensure that your config file (specified with ",(0,a.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG"),"\nenvironmental variable or by default saved in ",(0,a.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry\ninside the ",(0,a.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{className:"language-json"}),'    {\n  "name": "application-tokens"\n}\n')),(0,a.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,a.kt)("inlineCode",{parentName:"p"},"application-tokens")," plugin is enabled and laoded into\nthe console:"),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{}),'Loaded plugin: "application_tokens" (Cedalo Application tokens)\n')),(0,a.kt)("h2",h({},{id:"what-is-an-application-token"}),"What is an application token"),(0,a.kt)("p",null,"An application token is a string of characters that encodes authorization information, which is comprised of the\nfollowing attributes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"exp")," - date and time when the token expires (Unix timestamp)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"role")," - role (admin, editor, viewer, connectionManager, monitoringViewer) that the token grants to the one using it")),(0,a.kt)("p",null,"Application tokens also hold (encode) additional attributes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"iat")," - issued at, the date when the application token was issued (unix timestamp)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"iss")," - user who requested the application token")),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{}),'{\n  "role": "viewer",\n  "iat": 1669294549,\n  "exp": 1669382280,\n  "iss": "cedalo"\n}\n')),(0,a.kt)("p",null,"This string of data is saved as a JWT token which is signed with a secret. The token can only be signed by the party\nholding the secret (Management Center). In case somebody else tries to change the token information, they will not be\nable to generate a valid signature. A signature is always verified by the Management Center for every token. Without a\nvalid one the token will be unusable."),(0,a.kt)("p",null,"Application tokens are never stored on the MMC's backend because they are essentially plain text passwords. It would be\na problem if an attacker gained access to the complete database of all tokens. Therefore, Management Center does not\nstore them and requires user to copy the token upon creation and store them in a safe place. Please create tokens with\nminimum needed permissions for every application that needs the access."),(0,a.kt)("h2",h({},{id:"how-to-use-application-token"}),"How to use application token"),(0,a.kt)("p",null,"When you have your application token generated (read below if you want to learn how application tokens can be created),\nyou just have to pass it with every request you make to the MMC REST API."),(0,a.kt)("p",null,"We recommend including the application token inside of the ",(0,a.kt)("inlineCode",{parentName:"p"},"Authorization")," header with a value\nof ",(0,a.kt)("inlineCode",{parentName:"p"},'"Bearer <insert your token here>"'),". So, for example:"),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{}),'Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYWRtaW4iLCJpYXQiOjE2Njk2NTkxOTYsImV4cCI6MTY3MjM0MDUyMCwiaXNzIjoiY2VkYWxvIn0.swBlZ-3fpNCgIaG5ymfuFJ-Du7g59KHewOIHCMRx1cM"\n')),(0,a.kt)("p",null,"Another option is to include your application token as a ",(0,a.kt)("inlineCode",{parentName:"p"},"token")," url query parameter inside of your request\nurl: ",(0,a.kt)("inlineCode",{parentName:"p"},"?token=<insert your token here>"),". For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",h({parentName:"pre"},{}),"https://yourmmcurl.com?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYWRtaW4iLCJpYXQiOjE2Njk2NTkxOTYsImV4cCI6MTY3MjM0MDUyMCwiaXNzIjoiY2VkYWxvIn0.swBlZ-3fpNCgIaG5ymfuFJ-Du7g59KHewOIHCMRx1cM\n")),(0,a.kt)("h3",h({},{id:"types-of-responses"}),"Types of responses"),(0,a.kt)("p",null,"When using application tokens, you may receive either a successful response or an error."),(0,a.kt)("p",null,"A successful response means that your token was accepted and the data you asked for when issuing request was returned\nback to you. In this case the HTTP status code would be ",(0,a.kt)("inlineCode",{parentName:"p"},"200"),", and the response type is ",(0,a.kt)("inlineCode",{parentName:"p"},"application/json"),". In case your\ntoken was successfully accpeted but your query was malformed or some other error when processing your request occurred,\nyou would get a status code in the range of 400-500 inclusive. You can guess what when wrong just by looking at the\nstatus code (refer to the HTTP status codes) or reading the body of the response which in case of error will be of\ntype ",(0,a.kt)("inlineCode",{parentName:"p"},"text/*")," and will simply contain a string explaining the error."),(0,a.kt)("p",null,"In case the application token was not accepted by the MMC, you will get a ",(0,a.kt)("inlineCode",{parentName:"p"},"403")," status code with a text response body of\neither ",(0,a.kt)("inlineCode",{parentName:"p"},"Forbidden")," for endpoints for which your token does not have enough permissions\nor ",(0,a.kt)("inlineCode",{parentName:"p"},"Token not found or was revoked")," for cases when your token is invalid or has expired."))}w.isMDXComponent=!0},49044:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),i=n(39082),o=n(62659),s=n(83166);function r({inline:e}){return a.createElement(i.Z,{sx:{margin:e?"0px 5px":"5px",height:e?"22px":void 0,color:"#ffffff",backgroundColor:o.Z[500]},size:"small",icon:a.createElement(s.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},78901:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),i=n(39082),o=n(13328);function s({version:e}){return e?a.createElement(i.Z,{sx:{margin:"5px"},color:"info",size:"small",icon:a.createElement(o.Z,{size:"small"}),label:`${e}`}):a.createElement(a.Fragment,null)}}}]);