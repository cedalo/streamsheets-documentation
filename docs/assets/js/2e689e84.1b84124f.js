(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[91374],{83166:(e,t,n)=>{"use strict";var o=n(64836);t.Z=void 0;var i=o(n(64938)),r=n(85893),a=(0,i.default)((0,r.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=a},64938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=n(22236)},22236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.Z,createChainedFunction:()=>r,createSvgIcon:()=>a.Z,debounce:()=>l,deprecatedPropType:()=>s,isMuiElement:()=>p,ownerDocument:()=>m,ownerWindow:()=>f,requirePropFactory:()=>h,setRef:()=>g,unstable_ClassNameGenerator:()=>C,unstable_useEnhancedEffect:()=>b,unstable_useId:()=>v,unsupportedProp:()=>k,useControlled:()=>y,useEventCallback:()=>w.Z,useForkRef:()=>I.Z,useIsFocusVisible:()=>N.Z});var o=n(37078),i=n(36622);const r=function(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))};var a=n(58175);const l=function(e,t=166){let n;function o(...o){clearTimeout(n),n=setTimeout((()=>{e.apply(this,o)}),t)}return o.clear=()=>{clearTimeout(n)},o};const s=function(e,t){return()=>null};var u=n(67294),c=n.t(u,2);const p=function(e,t){return u.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function d(e){return e&&e.ownerDocument||document}const m=d;const f=function(e){return d(e).defaultView||window};n(87462);const h=function(e,t){return()=>null};const g=n(7960).Z;const b=n(16600).Z;let x=0;const _=c.useId;const v=function(e){if(void 0!==_){const t=_();return null!=e?e:t}return function(e){const[t,n]=u.useState(e),o=e||t;return u.useEffect((()=>{null==t&&(x+=1,n(`mui-${x}`))}),[t]),o}(e)};const k=function(e,t,n,o,i){return null};const y=function({controlled:e,default:t,name:n,state:o="value"}){const{current:i}=u.useRef(void 0!==e),[r,a]=u.useState(t);return[i?e:r,u.useCallback((e=>{i||a(e)}),[])]};var w=n(66875),I=n(78155),N=n(51625);const C={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),o.Z.configure(e)}}},97502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>f,default:()=>_,frontMatter:()=>m,metadata:()=>h,toc:()=>b});var o=n(3905),i=n(49044),r=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(s)for(var n of s(t))c.call(t,n)&&p(e,n,t[n]);return e};const m={id:"influxdb-metrics",title:"InfluxDB Metrics Exporter",sidebar_label:"InfluxDB Metrics Exporter"},f=void 0,h={unversionedId:"monitoring/metrics/influxdb-metrics",id:"version-3.1/monitoring/metrics/influxdb-metrics",title:"InfluxDB Metrics Exporter",description:"The InfluxDB Metrics Exporter collects broker metrics and sends them to the configured InfluxDB.",source:"@site/mosquitto_versioned_docs/version-3.1/monitoring/metrics/influxdb-metrics.md",sourceDirName:"monitoring/metrics",slug:"/monitoring/metrics/influxdb-metrics",permalink:"/mosquitto/monitoring/metrics/influxdb-metrics",draft:!1,tags:[],version:"3.1",frontMatter:{id:"influxdb-metrics",title:"InfluxDB Metrics Exporter",sidebar_label:"InfluxDB Metrics Exporter"},sidebar:"someSidebar",previous:{title:"Prometheus Metrics Exporter",permalink:"/mosquitto/monitoring/metrics/prometheus-metrics"},next:{title:"Web Client",permalink:"/mosquitto/mqtt-client/web-mqtt-client"}},g={},b=[{value:"Connection and authentication",id:"connection-and-authentication",level:2},{value:"Influx 2.x",id:"influx-2x",level:3},{value:"Influx 1.6/8",id:"influx-168",level:3},{value:"Basic Authentication",id:"basic-authentication",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Optional configuration (applies to both exporters)",id:"optional-configuration-applies-to-both-exporters",level:3},{value:"Plugin Activation",id:"plugin-activation",level:2}],x={toc:b};function _(e){var t,n=e,{components:r}=n,p=((e,t)=>{var n={};for(var o in e)u.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&s)for(var o of s(e))t.indexOf(o)<0&&c.call(e,o)&&(n[o]=e[o]);return n})(n,["components"]);return(0,o.kt)("wrapper",(t=d(d({},x),p),a(t,l({components:r,mdxType:"MDXLayout"}))),(0,o.kt)(i.Z,{mdxType:"PremiumFeature"}),(0,o.kt)("p",null,"The InfluxDB Metrics Exporter collects broker metrics and sends them to the configured InfluxDB.\nFor a detailed overview of all metrics, please refer to the ",(0,o.kt)("a",d({parentName:"p"},{href:"/mosquitto/monitoring/metrics/available-metrics"}),"Available Metrics")," section. This resource provides descriptions and categorizations of each metric, helping to understand how they contribute to monitoring and analyzing system performance."),(0,o.kt)("h2",d({},{id:"connection-and-authentication"}),"Connection and authentication"),(0,o.kt)("p",null,"The InfluxDB exporter can operate with InfluxDB servers ",(0,o.kt)("inlineCode",{parentName:"p"},"2.0")," upwards and ",(0,o.kt)("inlineCode",{parentName:"p"},"1.x"),". These are configured differently to one another."),(0,o.kt)("h3",d({},{id:"influx-2x"}),"Influx 2.x"),(0,o.kt)("p",null,"To use InfluxDB 2.0 or above, you must configure a host, organization, bucket, and authentication token:"),(0,o.kt)("pre",null,(0,o.kt)("code",d({parentName:"pre"},{}),"plugin_opt_host https://example.hoster.cloud2.influxdata.com\nplugin_opt_organisation my-organisation\nplugin_opt_bucket my-bucket\nplugin_opt_token <token>\n")),(0,o.kt)("p",null,"If you are using InfluxDB cloud, these values should all be easily discoverable. The plugin_opt_token option can contain either your literal authentication token, or the special value env. If set to env, the token will be read from the INFLUXDB_TOKEN environment variable instead."),(0,o.kt)("h3",d({},{id:"influx-168"}),"Influx 1.6/8"),(0,o.kt)("p",null,"To use InfluxDB 1.8 or 1.6, you must configure at least a hostname and database:"),(0,o.kt)("pre",null,(0,o.kt)("code",d({parentName:"pre"},{}),"global_plugin /usr/lib/cedalo_metrics_influxdb.so\nplugin_opt_hostname influxdb.example.com\nplugin_opt_database my-database\nplugin_opt_port 8086\nplugin_opt_use_tls true\n")),(0,o.kt)("h3",d({},{id:"basic-authentication"}),"Basic Authentication"),(0,o.kt)("p",null,"Basic HTTP authentication is supported for both connection modes by specifing a username and password:"),(0,o.kt)("pre",null,(0,o.kt)("code",d({parentName:"pre"},{}),"...\nplugin_opt_username my-username\nplugin_opt_password my-password\n")),(0,o.kt)("h2",d({},{id:"configuration"}),"Configuration"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"plugin_opt_hostlabel")," - use a specific label for this host when sending data. If not specified, the local hostname will be used.\n",(0,o.kt)("inlineCode",{parentName:"p"},"plugin_opt_measurement")," - the measurement string to use when sending data. If not specified, mosquitto will be used.\n",(0,o.kt)("inlineCode",{parentName:"p"},"plugin_opt_cafile")," - a path to an x509 encoded certificate that should be trusted for making encrypted connections to the server.\n",(0,o.kt)("inlineCode",{parentName:"p"},"plugin_opt_update_interval")," - the interval between metrics submissions, in seconds."),(0,o.kt)("p",null,"A sample configuration could look like:"),(0,o.kt)("pre",null,(0,o.kt)("code",d({parentName:"pre"},{className:"language-aconf"}),"global_plugin /usr/lib/cedalo_metrics_influxdb.so\nplugin_opt_update_interval 60\nplugin_opt_hostname influxdb.example.com\nplugin_opt_port 8100\nplugin_opt_hostlabel broker1\nplugin_opt_database edge_data\nplugin_opt_use_tls true\nplugin_opt_username username\nplugin_opt_password password\n")),(0,o.kt)("h3",d({},{id:"optional-configuration-applies-to-both-exporters"}),"Optional configuration (applies to both exporters)"),(0,o.kt)("p",null,"You may also consider turning off the $SYS updates from the broker:"),(0,o.kt)("pre",null,(0,o.kt)("code",d({parentName:"pre"},{className:"language-aconf"}),"sys_interval 0\n")),(0,o.kt)("p",null,"If activated, these will be counted into the existing metrics. "),(0,o.kt)("h2",d({},{id:"plugin-activation"}),"Plugin Activation"),(0,o.kt)("p",null,"To enable the InfluxDB Metrics Exporter plugin it must be loaded into the broker with, by adding the\nfollowing to your ",(0,o.kt)("inlineCode",{parentName:"p"},"mosquitto.conf"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",d({parentName:"pre"},{className:"language-aconf"}),"global_plugin /usr/lib/cedalo_metrics_influxdb.so\n")))}_.isMDXComponent=!0},49044:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(67294),i=n(39082),r=n(62659),a=n(83166);function l({inline:e}){return o.createElement(i.Z,{sx:{margin:e?"0px 5px":"0px 5px 5px 10px",height:e?"22px":void 0,color:"#ffffff",backgroundColor:r.Z[500]},size:"small",icon:o.createElement(a.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},64836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);