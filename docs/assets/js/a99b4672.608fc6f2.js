"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[69792],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>f});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),s=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=s(r),f=o,d=m["".concat(l,".").concat(f)]||m[f]||c[f]||a;return r?n.createElement(d,i(i({ref:t},u),{},{components:r})):n.createElement(d,i({ref:t},u))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var s=2;s<a;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},41416:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>g,contentTitle:()=>f,default:()=>h,frontMatter:()=>m,metadata:()=>d,toc:()=>b});var n=r(3905),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&u(e,r,t[r]);if(p)for(var r of p(t))s.call(t,r)&&u(e,r,t[r]);return e};const m={id:"mosquitto-sparkplug-aware",title:"Sparkplug Awareness plugin",sidebar_label:"Sparkplug Awareness"},f=void 0,d={unversionedId:"broker/Mosquitto Manual/mosquitto-sparkplug-aware",id:"version-2.7/broker/Mosquitto Manual/mosquitto-sparkplug-aware",title:"Sparkplug Awareness plugin",description:"The Sparkplug specification version 3.0 has certain requirements of an MQTT",source:"@site/mosquitto_versioned_docs/version-2.7/broker/Mosquitto Manual/sparkplug-aware.md",sourceDirName:"broker/Mosquitto Manual",slug:"/broker/Mosquitto Manual/mosquitto-sparkplug-aware",permalink:"/mosquitto/broker/Mosquitto Manual/mosquitto-sparkplug-aware",draft:!1,tags:[],version:"2.7",frontMatter:{id:"mosquitto-sparkplug-aware",title:"Sparkplug Awareness plugin",sidebar_label:"Sparkplug Awareness"},sidebar:"someSidebar",previous:{title:"Prometheus Metrics",permalink:"/mosquitto/broker/Mosquitto Manual/mosquitto-metrics-prometheus"},next:{title:"Streams",permalink:"/mosquitto/broker/Mosquitto Manual/mosquitto-streams"}},g={},b=[{value:"Plugin configuration",id:"plugin-configuration",level:2}],k={toc:b};function h(e){var t,r=e,{components:o}=r,u=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&p)for(var n of p(e))t.indexOf(n)<0&&s.call(e,n)&&(r[n]=e[n]);return r})(r,["components"]);return(0,n.kt)("wrapper",(t=c(c({},k),u),a(t,i({components:o,mdxType:"MDXLayout"}))),(0,n.kt)("p",null,"The Sparkplug specification version 3.0 has certain requirements of an MQTT\nbroker to be usable for Sparkplug."),(0,n.kt)("p",null,'The first category is "Sparkplug Compliance", which means that the broker\nsupports basic MQTT features. Any MQTT compliant broker should also be\nSparkplug compliant.'),(0,n.kt)("p",null,'The second category is "Sparkplug Aware", which requires that certain Sparkplug\nmessages are automatically republished by the broker on a different topic. This\nrelates to all ',(0,n.kt)("inlineCode",{parentName:"p"},"NBIRTH")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"DBIRTH")," messages, and provides a mechanism to have\na persistent store of birth certificates."),(0,n.kt)("p",null,"More specifically, all messages published matching the topic\n",(0,n.kt)("inlineCode",{parentName:"p"},"spBv1.0/+/NBIRTH/+")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"spBv1.0/+/DBIRTH/+/+")," will be republished on the same\ntopic, but prefixed with ",(0,n.kt)("inlineCode",{parentName:"p"},"$sparkplug/certificates/"),". In other words, a message\npublished on ",(0,n.kt)("inlineCode",{parentName:"p"},"spBv1.0/group_id/NBIRTH/edge_node_id")," would be republished on\n",(0,n.kt)("inlineCode",{parentName:"p"},"$sparkplug/certificates/spBv1.0/group_id/NBIRTH/edge_node_id")),(0,n.kt)("p",null,"Sparkplug awareness would not be part of a standard MQTT broker and is\ntypically provided as an extension."),(0,n.kt)("p",null,"Mosquitto is Sparkplug compliant out of the box without any configuration."),(0,n.kt)("p",null,"For Sparkplug awareness support, Mosquitto provides a plugin."),(0,n.kt)("h2",c({},{id:"plugin-configuration"}),"Plugin configuration"),(0,n.kt)("p",null,"To enable the plugin it must be loaded into the broker with, by adding the\nfollowing to your ",(0,n.kt)("inlineCode",{parentName:"p"},"mosquitto.conf"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",c({parentName:"pre"},{className:"language-aconf"}),"global_plugin /usr/lib/mosquitto_sparkplug_aware.so\n")),(0,n.kt)("p",null,"There is no further configuration required."))}h.isMDXComponent=!0}}]);