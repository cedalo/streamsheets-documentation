"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[38896],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=i.createContext({}),u=function(e){var t=i.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return i.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=u(n),d=a,b=h["".concat(o,".").concat(d)]||h[d]||c[d]||l;return n?i.createElement(b,r(r({ref:t},p),{},{components:n})):i.createElement(b,r({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=h;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var u=2;u<l;u++)r[u]=n[u];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},62104:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>d,default:()=>k,frontMatter:()=>h,metadata:()=>b,toc:()=>g});var i=n(3905),a=Object.defineProperty,l=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&p(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&p(e,n,t[n]);return e};const h={id:"publishing",title:"Publishing",sidebar_label:"Publishing"},d=void 0,b={unversionedId:"MQTT/publishing",id:"version-2.7/MQTT/publishing",title:"Publishing",description:"Publish / Subscribe Introduction",source:"@site/mosquitto_versioned_docs/version-2.7/MQTT/NEW_publishing.md",sourceDirName:"MQTT",slug:"/MQTT/publishing",permalink:"/mosquitto/2.7/MQTT/publishing",draft:!1,tags:[],version:"2.7",frontMatter:{id:"publishing",title:"Publishing",sidebar_label:"Publishing"}},m={},g=[{value:"Publish / Subscribe Introduction",id:"publish--subscribe-introduction",level:3},{value:"Publish",id:"publish",level:3},{value:"Payload",id:"payload",level:3}],f={toc:g};function k(e){var t,n=e,{components:a}=n,p=((e,t)=>{var n={};for(var i in e)o.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&s)for(var i of s(e))t.indexOf(i)<0&&u.call(e,i)&&(n[i]=e[i]);return n})(n,["components"]);return(0,i.kt)("wrapper",(t=c(c({},f),p),l(t,r({components:a,mdxType:"MDXLayout"}))),(0,i.kt)("h3",c({},{id:"publish--subscribe-introduction"}),"Publish / Subscribe Introduction"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"retain_available [ true | false ]")),(0,i.kt)("p",null,"If set to false, then retained messages are not supported. Clients that send a message with the retain bit will be disconnected if this option is set to false. Defaults to true."),(0,i.kt)("p",null,"This option applies globally."),(0,i.kt)("p",null,"Reloaded on reload signal."),(0,i.kt)("p",null,"The PUBLISH/SUBSCRIBE model consists of the client-server model."),(0,i.kt)("p",null,"Any client communicates with an endpoint via the broker."),(0,i.kt)("p",null,"Before a client wants to publish messages it first has to set up a connection with the broker."),(0,i.kt)("p",null,"Also, a subscribing client has to do the same."),(0,i.kt)("p",null,"Therefore the broker can decouple publisher and subscriber."),(0,i.kt)("h3",c({},{id:"publish"}),"Publish"),(0,i.kt)("p",null,"The broker simply delivers the message to all subscribers. It's the duty of the broker. There is no obstacle within the broker."),(0,i.kt)("p",null,"![brokerHandlingSubscriptions]"," (./_images//brokerHandlingSubscriptions.gif)"),(0,i.kt)("p",null,"Either one publisher publishes messages to multiple Subscribers."),(0,i.kt)("p",null,"![multipleSUBSCRIBERonePUBLISHER]"," (./_images//multipleSUBSCRIBERonePUBLISHER.png)"),(0,i.kt)("p",null,"Or multiple publisher publish messages to just one subscriber."),(0,i.kt)("p",null,"![multiplePUBLISHERoneSUBSCRIBER]"," (./_images//multiplePUBLISHERoneSUBSCRIBER.png)"),(0,i.kt)("p",null,"Or any combination of multiple publishers/subscribers."),(0,i.kt)("p",null,'Also, consumers can publish as well. This is called "Bidirectional publishing".'),(0,i.kt)("p",null,"Any publisher can only be identified when information about the publisher is included in the topic or payload."),(0,i.kt)("p",null,"![PUBLISH]"," (./_images//PUBLISH.png)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"packetId"))),(0,i.kt)("p",null,"Identifies a message."),(0,i.kt)("p",null,"The packetId is set by the client library and broker."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"topicName"))),(0,i.kt)("p",null,"The topic is set using a simple string."),(0,i.kt)("p",null,'Topics are treated hierarchically. To delimiter, a slash "/" symbolizes a separation. Allowing the client organizational structure, much like a common filesystem.'),(0,i.kt)("p",null,"There is no need for creating a topic. You can subscribe to any topic, even though there might not be messages published."),(0,i.kt)("p",null,"On the other hand, you must know about the topic names to be able to subscribe to them."),(0,i.kt)("p",null,"The topic is essentially a UTF-8 string."),(0,i.kt)("p",null,"Filtering the topic of a sent message can be done by the broker by simply comparing the encoded UTF-8 bytes or decoded Unicode characters."),(0,i.kt)("p",null,"Be aware that an extra slash or slashes set by mistake are detected by the broker as a delimiter."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"qos"))),(0,i.kt)("p",null,"The QoS (Quality of Service) defines a certain level of service that enables the publisher to make sure that the certainty and quantity of a subscriber receiving a sent message equal the importance to receive the message at all, plus whether to receive the message only once."),(0,i.kt)("p",null,"Also, a subscriber can set a QoS, defining the importance to receive every message, and whether to accept one message multiple times or not. "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"retainFlag"))),(0,i.kt)("p",null,"In many cases, a device can not wait until the next time the publisher provides information sending a message."),(0,i.kt)("p",null,"A sensor of a car door tells whether the door is open or closed. As the door is used very infrequently, including a retained flag makes sense."),(0,i.kt)("p",null,"Without a retained flag set (retainFlag=false), you must wait for the next time the door is opened or closed to find out about the status."),(0,i.kt)("p",null,"With retained messages (retainFlag=true), you immediately find out, because the retained message gives you the last status."),(0,i.kt)("p",null,"A retained message safes the last known value of the topic. It's only possible to save up to one retained message, equal to one retained value. The retainFlag identifies a message to be a retained message. To identify the message the packetId is used."),(0,i.kt)("admonition",c({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Digression:"),"  Wildcards + retained messages"),(0,i.kt)("p",{parentName:"admonition"},"May the subscribing client include wildcards in the topic pattern they subscribe to, the client receives a retained message even if the topic of the retained message is not an exact match.")),(0,i.kt)("h3",c({},{id:"payload"}),"Payload"),(0,i.kt)("p",null,"The actual content of a message is the content of a payload. Whether it's a .mp3-file or .mp4-file, a picture, or a video. Up to 256MB. The payload does not encrypt the content. The broker simply delivers what the publisher inserted into the payload."),(0,i.kt)("p",null,"Matter of fact the receiving clients don't even know about the data format they receive. Still, there's little chance that a client subscribes to a host and topic it doesn't know about in the first place. Following the client can forecast the receiving data format."),(0,i.kt)("p",null,"The subscriber can not reject a message. But as it can do with it as pleased, that could be nothing as well. Meaning a subscriber could receive a message, but simply don't do anything with it."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dupFlag"))),(0,i.kt)("p",null,"A dupFlag indicates the duplicate of a message."),(0,i.kt)("p",null,"A message with dupFlag was resent.\nFollowing a recipient didn't acknowledge the original message."))}k.isMDXComponent=!0}}]);