"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[88099],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=o.createContext({}),s=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=s(e.components);return o.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=s(t),m=a,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||r;return t?o.createElement(f,i(i({ref:n},p),{},{components:t})):o.createElement(f,i({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=d;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<r;s++)i[s]=t[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},84936:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>m,default:()=>y,frontMatter:()=>d,metadata:()=>f,toc:()=>b});var o=t(3905),a=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,n,t)=>n in e?a(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,u=(e,n)=>{for(var t in n||(n={}))l.call(n,t)&&p(e,t,n[t]);if(c)for(var t of c(n))s.call(n,t)&&p(e,t,n[t]);return e};const d={id:"mc-connections-rest-api",title:"Connections REST API",sidebar_label:"Connections REST API \u2b50"},m=void 0,f={unversionedId:"mc-connections-rest-api",id:"version-2.5/mc-connections-rest-api",title:"Connections REST API",description:"This page describes how to use the Connections REST API that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto.",source:"@site/management-center_versioned_docs/version-2.5/connections-rest-api.md",sourceDirName:".",slug:"/mc-connections-rest-api",permalink:"/management-center/mc-connections-rest-api",draft:!1,tags:[],version:"2.5",frontMatter:{id:"mc-connections-rest-api",title:"Connections REST API",sidebar_label:"Connections REST API \u2b50"}},k={},b=[{value:"Application Tokens REST API \u2b50",id:"application-tokens-rest-api-",level:2},{value:"Patch functionality \u2b50",id:"patch-functionality-",level:2},{value:"Error responses \u2b50",id:"error-responses-",level:2}],h={toc:b};function y(e){var n,t=e,{components:a}=t,p=((e,n)=>{var t={};for(var o in e)l.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&c)for(var o of c(e))n.indexOf(o)<0&&s.call(e,o)&&(t[o]=e[o]);return t})(t,["components"]);return(0,o.kt)("wrapper",(n=u(u({},h),p),r(n,i({components:a,mdxType:"MDXLayout"}))),(0,o.kt)("p",null,"This page describes how to use the ",(0,o.kt)("strong",{parentName:"p"},"Connections REST API")," that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto."),(0,o.kt)("admonition",u({},{type:"info"}),(0,o.kt)("p",{parentName:"admonition"},"Before sending a command request, make sure that you have been authenticated.")),(0,o.kt)("admonition",u({},{type:"info"}),(0,o.kt)("p",{parentName:"admonition"},"Application Tokens REST API can be accessed only by the users with ",(0,o.kt)("em",{parentName:"p"},"admin")," or ",(0,o.kt)("em",{parentName:"p"},"connectionManager")," role.")),(0,o.kt)("h2",u({},{id:"application-tokens-rest-api-"}),"Application Tokens REST API \u2b50"),(0,o.kt)("p",null,"Connections REST API features the following endpoints that allow for some CRUD operations on the connections:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"GET /api/connections")," - get all the connections")),(0,o.kt)("p",null,"Example of the response:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "id": "mosquitto-dev",\n    "name": "Development Server",\n    "url": "mqtts://url.com:1883",\n    "credentials": {\n      "username": "admin",\n      "password": "adminpassword"\n    },\n    "ca": {\n      "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVBekNDQXV1Z0F3SUJBZ0lVQlkxaGxDR3ZkajROaEJYa1ovd...",\n      "endoding": "base64"\n    },\n    "cert": {\n      "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVBekNDQXV1Z0F3SUJBZ0lVQlkxaGxDR3ZkajROaEJYa1ovd...",\n      "endoding": "base64"\n    },\n    "key": {\n      "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVBekNDQXV1Z0F3SUJBZ0lVQlkxaGxDR3ZkajROaEJYa1ovd...",\n      "endoding": "base64"\n    },\n    "rejectUnauthorized": "true",\n    "status": {\n      "connected": "false",\n      "error": {\n        "code": "UNABLE_TO_VERIFY_LEAF_SIGNATURE"\n      }\n    }\n  },\n  ...\n]\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"POST /api/connections")," - create a new connection")),(0,o.kt)("p",null,"Request body must be a connection that you want to create."),(0,o.kt)("p",null,"Example of the request body:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{className:"language-json"}),'{\n  "id": "mosquitto-dev",\n  "name": "Development Server",\n  "url": "mqtts://url.com:1883",\n  "credentials": {\n    "username": "admin",\n    "password": "adminpassword"\n  },\n  "ca": {\n    "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVBekNDQXV1Z0F3SUJBZ0lVQlkxaGxDR3ZkajROaEJYa1ovd...",\n    "endoding": "base64"\n  },\n  "cert": {\n    "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVBekNDQXV1Z0F3SUJBZ0lVQlkxaGxDR3ZkajROaEJYa1ovd...",\n    "endoding": "base64"\n  },\n  "key": {\n    "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVBekNDQXV1Z0F3SUJBZ0lVQlkxaGxDR3ZkajROaEJYa1ovd...",\n    "endoding": "base64"\n  },\n  "rejectUnauthorized": "true"\n}\n')),(0,o.kt)("p",null,"Response: list of all the existing connections"),(0,o.kt)("p",null,"Connection will not only be created but also connected by default."),(0,o.kt)("p",null,"A special response error of type ",(0,o.kt)("inlineCode",{parentName:"p"},"text/plain"),' is 500: "Connection created but could not connect" thrown when connection has been successfully created but something went wrong, when using it to initiate a connection with a broker.'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"DELETE /api/connections/{connectionId}")," - delete a specified connection")),(0,o.kt)("p",null,"Path Parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"connectionId")," - id of the connection you want to delete")),(0,o.kt)("p",null,"Response: list of the remaining connections"),(0,o.kt)("h2",u({},{id:"patch-functionality-"}),"Patch functionality \u2b50"),(0,o.kt)("p",null,"In case you issue ",(0,o.kt)("inlineCode",{parentName:"p"},"POST"),' request to create a new connection and it returns 500: "Connection created but could not connect", you can change the body (except of course name of the connection and connection id) and issue the same POST request again. What it will do is it will patch you previously unsuccessful connection. This connection will be updated with new provided information and the Management Center will try reconnecting.'),(0,o.kt)("h2",u({},{id:"error-responses-"}),"Error responses \u2b50"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"403 - Forbidden (Connection with the same name/id already exists | Maximum number of connections reached) | User does not have access permissions")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"404 - Plugin not found/Not enabled")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"500 - An internal server error occured (special case with a ",(0,o.kt)("inlineCode",{parentName:"p"},"POST"),' request being 500: "Connection created but could not connect")'))))}y.isMDXComponent=!0}}]);