(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[6665],{83166:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var r=a(n(64938)),i=n(85893),o=(0,r.default)((0,i.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=o},13328:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var r=a(n(64938)),i=n(85893),o=(0,r.default)((0,i.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}),"NewReleases");t.Z=o},64938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=n(22236)},22236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>r.Z,createChainedFunction:()=>i,createSvgIcon:()=>o.Z,debounce:()=>l,deprecatedPropType:()=>s,isMuiElement:()=>d,ownerDocument:()=>p,ownerWindow:()=>h,requirePropFactory:()=>f,setRef:()=>v,unstable_ClassNameGenerator:()=>Z,unstable_useEnhancedEffect:()=>b,unstable_useId:()=>w,unsupportedProp:()=>y,useControlled:()=>C,useEventCallback:()=>x.Z,useForkRef:()=>N.Z,useIsFocusVisible:()=>T.Z});var a=n(37078),r=n(36622);const i=function(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))};var o=n(58175);const l=function(e,t=166){let n;function a(...a){clearTimeout(n),n=setTimeout((()=>{e.apply(this,a)}),t)}return a.clear=()=>{clearTimeout(n)},a};const s=function(e,t){return()=>null};var u=n(67294),c=n.t(u,2);const d=function(e,t){return u.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function m(e){return e&&e.ownerDocument||document}const p=m;const h=function(e){return m(e).defaultView||window};n(87462);const f=function(e,t){return()=>null};const v=n(7960).Z;const b=n(16600).Z;let g=0;const k=c.useId;const w=function(e){if(void 0!==k){const t=k();return null!=e?e:t}return function(e){const[t,n]=u.useState(e),a=e||t;return u.useEffect((()=>{null==t&&(g+=1,n(`mui-${g}`))}),[t]),a}(e)};const y=function(e,t,n,a,r){return null};const C=function({controlled:e,default:t,name:n,state:a="value"}){const{current:r}=u.useRef(void 0!==e),[i,o]=u.useState(t);return[r?e:i,u.useCallback((e=>{r||o(e)}),[])]};var x=n(66875),N=n(78155),T=n(51625);const Z={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.Z.configure(e)}}},1953:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>b,contentTitle:()=>f,default:()=>w,frontMatter:()=>h,metadata:()=>v,toc:()=>g});var a=n(3905),r=n(78901),i=n(49044),o=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,m=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&m(e,n,t[n]);if(u)for(var n of u(t))d.call(t,n)&&m(e,n,t[n]);return e};const h={id:"mc-clusters",title:"Clusters",sidebar_label:"Clusters"},f=void 0,v={unversionedId:"management-center/overview/configuration/mc-clusters",id:"version-2.9/management-center/overview/configuration/mc-clusters",title:"Clusters",description:"High Availability provides the ability to run a Cluster",source:"@site/mosquitto_versioned_docs/version-2.9/management-center/overview/configuration/clusters.md",sourceDirName:"management-center/overview/configuration",slug:"/management-center/overview/configuration/mc-clusters",permalink:"/mosquitto/2.9/management-center/overview/configuration/mc-clusters",draft:!1,tags:[],version:"2.9",frontMatter:{id:"mc-clusters",title:"Clusters",sidebar_label:"Clusters"},sidebar:"someSidebar",previous:{title:"Client Accounts",permalink:"/mosquitto/2.9/management-center/overview/configuration/mc-clients"},next:{title:"Groups",permalink:"/mosquitto/2.9/management-center/overview/configuration/mc-groups"}},b={},g=[{value:"Cluster Overview",id:"cluster-overview",level:2},{value:"Create Cluster",id:"create-cluster",level:2},{value:"Edit Cluster details",id:"edit-cluster-details",level:2},{value:"Remove nodes from a cluster",id:"remove-nodes-from-a-cluster",level:2},{value:"Delete a Cluster",id:"delete-a-cluster",level:2},{value:"Enable Cluster Management",id:"enable-cluster-management",level:2}],k={toc:g};function w(e){var t,o=e,{components:m}=o,h=((e,t)=>{var n={};for(var a in e)c.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&u)for(var a of u(e))t.indexOf(a)<0&&d.call(e,a)&&(n[a]=e[a]);return n})(o,["components"]);return(0,a.kt)("wrapper",(t=p(p({},k),h),l(t,s({components:m,mdxType:"MDXLayout"}))),(0,a.kt)("span",null),(0,a.kt)(r.Z,{version:"2.3",mdxType:"SinceVersion"}),(0,a.kt)(i.Z,{mdxType:"PremiumFeature"}),(0,a.kt)("br",null),(0,a.kt)("br",null),(0,a.kt)("p",null,"High Availability provides the ability to run a ",(0,a.kt)("a",p({parentName:"p"},{href:"/mosquitto/2.9/MQTT/mqtt-glossary#cluster"}),"Cluster"),"\nof Mosquitto nodes with a single leader and multiple followers, so that broker availability can be ensured even if a\nsingle node becomes unavailable through fault or for an upgrade."),(0,a.kt)("p",null,"For further information about Clusters and High Availability please check the following detailed explanation of\n",(0,a.kt)("a",p({parentName:"p"},{href:"/mosquitto/2.9/broker/mosquitto-high-availability"}),"Mosquitto High Availability")),(0,a.kt)("h2",p({},{id:"cluster-overview"}),"Cluster Overview"),(0,a.kt)("p",null,"The Cluster shows a table of all clusters known to the Management Center. For each cluster, you can see the name,\na description and the number of nodes contained in the cluster. You can also delete the cluster definition by using\nthe 'Delete' action on the right of the table. Below a table with one defined cluster:"),(0,a.kt)("img",{className:"docimagemb",src:n(21395).Z,width:"100%"}),(0,a.kt)("h2",p({},{id:"create-cluster"}),"Create Cluster"),(0,a.kt)("admonition",p({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"Before creating a cluster, it is necessary to connect your future cluster nodes to the Management Center. Make sure to\nbe connected via Port 1885, to allow direct communication to the individual nodes, using a client with ACLs to read and\nwrite on the ",(0,a.kt)("em",{parentName:"p"},"$CONTROL")," topic of the broker.")),(0,a.kt)("p",null,'To create a new high availability cluster, click on the button "New Cluster". On the following page you can enter\nthe detail information about the cluster that you want to create.'),(0,a.kt)("p",null,"First enter a unique Cluster name and optionally a description. There are two Syncmodes available to choose from:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"full: TODO"),(0,a.kt)("li",{parentName:"ul"},"dynsec: The clusters are independent, but share dynamic security configurations.")),(0,a.kt)("p",null,"You need to define at least two cluster nodes (broker instances). For each select a unique Node ID,\nenter the IP address of the broker with in its private network and select the preconfigured connection."),(0,a.kt)("img",{className:"docimagemb",src:n(69806).Z,width:"100%"}),(0,a.kt)("p",null,'When you have entered all the necessary information, click on "Save". The new cluster will now be set up and the\nconfiguration will appear in the cluster table.'),(0,a.kt)("h2",p({},{id:"edit-cluster-details"}),"Edit Cluster details"),(0,a.kt)("p",null,"Select the cluster in the table and click. This will navigate you to the detail view of the cluster.\nThe leader and follower are indicated by different icons. The leader has a green icon."),(0,a.kt)("p",null,'To modify settings or add a new node, first switch into edit mode by clicking on the button "Edit".\nThen, click on "Add node", which will open a select dialog that lists all available Mosquitto connections.'),(0,a.kt)("img",{className:"docimagemb",src:n(31199).Z,width:"100%"}),(0,a.kt)("p",null,'See here a cluster with three nodes, with the leader being the one with "Node ID" 2.'),(0,a.kt)("h2",p({},{id:"remove-nodes-from-a-cluster"}),"Remove nodes from a cluster"),(0,a.kt)("p",null,'Navigate to the cluster detail page (e.g., by selecting it in the overview list) and click the "Edit" button. Then, in\norder to remove a node, click on the "Remove" button next to that node.'),(0,a.kt)("h2",p({},{id:"delete-a-cluster"}),"Delete a Cluster"),(0,a.kt)("p",null,'Delete the Cluster by clicking the "Trash Bin" icon in the cluster table.'),(0,a.kt)("h2",p({},{id:"enable-cluster-management"}),"Enable Cluster Management"),(0,a.kt)("p",null,"To enable the Cluster Management feature, make sure you are using the Premium Edition of Mosquitto and that you have the\nfeature enabled in your license. Also, ensure that your config file (specified with ",(0,a.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG"),"\nenvironmental variable or by default saved in ",(0,a.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry\ninside the ",(0,a.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,a.kt)("pre",null,(0,a.kt)("code",p({parentName:"pre"},{}),'    {\n      "name": "cluster-management"\n    }\n')),(0,a.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,a.kt)("inlineCode",{parentName:"p"},"cluster-management")," plugin is enabled and loaded into\nthe console:"),(0,a.kt)("pre",null,(0,a.kt)("code",p({parentName:"pre"},{}),'Loaded plugin: "cedalo_cluster_management" (Cedalo Cluster Management).\n')))}w.isMDXComponent=!0},49044:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(67294),r=n(39082),i=n(62659),o=n(83166);function l({inline:e}){return a.createElement(r.Z,{sx:{margin:e?"0px 5px":"0px 5px 5px 10px",height:e?"22px":void 0,color:"#ffffff",backgroundColor:i.Z[500]},size:"small",icon:a.createElement(o.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},78901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(67294),r=n(39082),i=n(13328);function o({version:e}){return e?a.createElement(r.Z,{sx:{margin:"0px 5px 5px 10px"},color:"info",size:"small",icon:a.createElement(i.Z,{size:"small"}),label:`${e}`}):a.createElement(a.Fragment,null)}},31199:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/clusteredit-b66fef8687f36875d3420e5d7b9f11ce.png"},69806:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/clusternew-1ca0b43bea936d842223c69884668bbb.png"},21395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/clusters-86742b7ed8b2bef86124eac4bb82ae1b.png"},64836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);