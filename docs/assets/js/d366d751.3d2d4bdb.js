"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[58391],{3905:(e,r,t)=>{t.d(r,{Zo:()=>u,kt:()=>f});var n=t(67294);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=n.createContext({}),l=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},u=function(e){var r=l(e.components);return n.createElement(s.Provider,{value:r},e.children)},c={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=l(t),f=a,g=d["".concat(s,".").concat(f)]||d[f]||c[f]||o;return t?n.createElement(g,i(i({ref:r},u),{},{components:t})):n.createElement(g,i({ref:r},u))}));function f(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var p={};for(var s in r)hasOwnProperty.call(r,s)&&(p[s]=r[s]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var l=2;l<o;l++)i[l]=t[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},91381:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>m,contentTitle:()=>f,default:()=>v,frontMatter:()=>d,metadata:()=>g,toc:()=>b});var n=t(3905),a=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,r,t)=>r in e?a(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,c=(e,r)=>{for(var t in r||(r={}))s.call(r,t)&&u(e,t,r[t]);if(p)for(var t of p(r))l.call(r,t)&&u(e,t,r[t]);return e};const d={id:"sparkplug-awareness",title:"Sparkplug Awareness",sidebar_label:"Sparkplug Awareness"},f=void 0,g={unversionedId:"advanced-features/sparkplug/sparkplug-awareness",id:"version-3.0/advanced-features/sparkplug/sparkplug-awareness",title:"Sparkplug Awareness",description:"The Sparkplug specification version 3.0 has certain requirements of an MQTT",source:"@site/mosquitto_versioned_docs/version-3.0/advanced-features/sparkplug/sparkplug-awareness.md",sourceDirName:"advanced-features/sparkplug",slug:"/advanced-features/sparkplug/sparkplug-awareness",permalink:"/mosquitto/advanced-features/sparkplug/sparkplug-awareness",draft:!1,tags:[],version:"3.0",frontMatter:{id:"sparkplug-awareness",title:"Sparkplug Awareness",sidebar_label:"Sparkplug Awareness"},sidebar:"someSidebar",previous:{title:"Persistent Ensured QoS1/QoS2 Message Handling",permalink:"/mosquitto/advanced-features/persistent-message-handling"},next:{title:"Sparkplug Decode",permalink:"/mosquitto/advanced-features/sparkplug/sparkplug-decode"}},m={},b=[{value:"Plugin Activation",id:"plugin-activation",level:2}],k={toc:b};function v(e){var r,t=e,{components:a}=t,u=((e,r)=>{var t={};for(var n in e)s.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&p)for(var n of p(e))r.indexOf(n)<0&&l.call(e,n)&&(t[n]=e[n]);return t})(t,["components"]);return(0,n.kt)("wrapper",(r=c(c({},k),u),o(r,i({components:a,mdxType:"MDXLayout"}))),(0,n.kt)("p",null,"The Sparkplug specification version 3.0 has certain requirements of an MQTT\nbroker to be usable for Sparkplug."),(0,n.kt)("p",null,'The first category is "Sparkplug Compliance", which means that the broker\nsupports basic MQTT features. Any MQTT compliant broker should also be\nSparkplug compliant.'),(0,n.kt)("p",null,'The second category is "Sparkplug Aware", which requires that certain Sparkplug\nmessages are automatically republished by the broker on a different topic. This\nrelates to all ',(0,n.kt)("inlineCode",{parentName:"p"},"NBIRTH")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"DBIRTH")," messages, and provides a mechanism to have\na persistent store of birth certificates."),(0,n.kt)("p",null,"More specifically, all messages published matching the topic\n",(0,n.kt)("inlineCode",{parentName:"p"},"spBv1.0/+/NBIRTH/+")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"spBv1.0/+/DBIRTH/+/+")," will be republished on the same\ntopic, but prefixed with ",(0,n.kt)("inlineCode",{parentName:"p"},"$sparkplug/certificates/"),". In other words, a message\npublished on ",(0,n.kt)("inlineCode",{parentName:"p"},"spBv1.0/group_id/NBIRTH/edge_node_id")," would be republished on\n",(0,n.kt)("inlineCode",{parentName:"p"},"$sparkplug/certificates/spBv1.0/group_id/NBIRTH/edge_node_id")),(0,n.kt)("p",null,"Sparkplug awareness would not be part of a standard MQTT broker and is\ntypically provided as an extension."),(0,n.kt)("p",null,"Mosquitto is Sparkplug compliant out of the box without any configuration."),(0,n.kt)("p",null,"For Sparkplug awareness support, Mosquitto provides a plugin."),(0,n.kt)("h2",c({},{id:"plugin-activation"}),"Plugin Activation"),(0,n.kt)("p",null,"To enable the plugin it must be loaded into the broker with, by adding the\nfollowing to your ",(0,n.kt)("inlineCode",{parentName:"p"},"mosquitto.conf"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",c({parentName:"pre"},{className:"language-aconf"}),"global_plugin /usr/lib/mosquitto_sparkplug_aware.so\n")),(0,n.kt)("p",null,"There is no further configuration required."))}v.isMDXComponent=!0}}]);