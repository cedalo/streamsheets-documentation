"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[70911],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var a=o.createContext({}),c=function(e){var t=o.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(a.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(a,".").concat(m)]||p[m]||u[m]||i;return n?o.createElement(h,l(l({ref:t},d),{},{components:n})):o.createElement(h,l({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=p;var s={};for(var a in t)hasOwnProperty.call(t,a)&&(s[a]=t[a]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var c=2;c<i;c++)l[c]=n[c];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},92840:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>f,contentTitle:()=>m,default:()=>b,frontMatter:()=>p,metadata:()=>h,toc:()=>g});var o=n(3905),r=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&d(e,n,t[n]);if(s)for(var n of s(t))c.call(t,n)&&d(e,n,t[n]);return e};const p={id:"configure-broker-onpremises",title:"Configure On-Premises Broker in the Cedalo MQTT Platform",sidebar_label:"Platform - Configure Broker"},m=void 0,h={unversionedId:"deployment/on-premises/configure-broker-onpremises",id:"version-3.0/deployment/on-premises/configure-broker-onpremises",title:"Configure On-Premises Broker in the Cedalo MQTT Platform",description:"After downloading and deploying a setup from your account at platform.cedalo.cloud, every on-premises platform installation includes a predefined connection to the Pro Edition for Eclipse Mosquitto broker, which is part of the setup. This applies to all versions, regardless of whether you have chosen the Business or Enterprise edition, or whether the setup is a Single Node or Cluster version.",source:"@site/mosquitto_versioned_docs/version-3.0/deployment/on-premises/configure-broker-onpremises.md",sourceDirName:"deployment/on-premises",slug:"/deployment/on-premises/configure-broker-onpremises",permalink:"/mosquitto/3.0/deployment/on-premises/configure-broker-onpremises",draft:!1,tags:[],version:"3.0",frontMatter:{id:"configure-broker-onpremises",title:"Configure On-Premises Broker in the Cedalo MQTT Platform",sidebar_label:"Platform - Configure Broker"},sidebar:"someSidebar",previous:{title:"Update Pro Edition for Eclipse Mosquitto",permalink:"/mosquitto/3.0/deployment/on-premises/deployment/administrating/versions"},next:{title:"Cluster Overview",permalink:"/mosquitto/3.0/clustering/overview-clusters"}},f={},g=[{value:"Add New Connection",id:"add-new-connection",level:2},{value:"Single Node",id:"single-node",level:3},{value:"Cluster",id:"cluster",level:3},{value:"Add New Cluster",id:"add-new-cluster",level:4},{value:"Cluster Nodes",id:"cluster-nodes",level:5},{value:"Public Cluster Connection",id:"public-cluster-connection",level:5},{value:"Discover Existing Cluster",id:"discover-existing-cluster",level:4},{value:"Change Connection Details",id:"change-connection-details",level:2},{value:"Single Node",id:"single-node-1",level:3},{value:"Cluster",id:"cluster-1",level:3},{value:"Delete a Cluster",id:"delete-a-cluster",level:4},{value:"Change Cluster Nodes",id:"change-cluster-nodes",level:4},{value:"Add Node",id:"add-node",level:5},{value:"Remove Node",id:"remove-node",level:5}],k={toc:g};function b(e){var t,r=e,{components:d}=r,p=((e,t)=>{var n={};for(var o in e)a.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&s)for(var o of s(e))t.indexOf(o)<0&&c.call(e,o)&&(n[o]=e[o]);return n})(r,["components"]);return(0,o.kt)("wrapper",(t=u(u({},k),p),i(t,l({components:d,mdxType:"MDXLayout"}))),(0,o.kt)("p",null,"After downloading and deploying a setup from your account at ",(0,o.kt)("a",u({parentName:"p"},{href:"https://platform.cedalo.cloud"}),"platform.cedalo.cloud"),", every on-premises platform installation includes a predefined connection to the Pro Edition for Eclipse Mosquitto broker, which is part of the setup. This applies to all versions, regardless of whether you have chosen the Business or Enterprise edition, or whether the setup is a Single Node or Cluster version."),(0,o.kt)("h2",u({},{id:"add-new-connection"}),"Add New Connection"),(0,o.kt)("p",null,"A new connection to a broker can be established within each project you have defined. A user can own multiple projects and share these with other users. For more details, see ",(0,o.kt)("a",u({parentName:"p"},{href:"/mosquitto/3.0/project-account-management/project-management/project-general"}),"Project Management"),". If you wish to add additional brokers or clusters to your platform, ensure you are using the Enterprise edition, as it is the only edition capable of accessing the project level of the platform."),(0,o.kt)("p",null,"Within a project, you can add either a new single-node broker or a cluster. Choose one of the options below to start creating a new connection."),(0,o.kt)("p",null,"Ensure that you use an admin user with sufficient permissions to manage the platform. It is recommended to use the predefined admin user for the Pro Edition for Eclipse Mosquitto broker for this purpose. The default credentials for this user can be found in the Mosquitto folder of your setup."),(0,o.kt)("h3",u({},{id:"single-node"}),"Single Node"),(0,o.kt)("p",null,"Enter the connection details for your broker. You will need to provide the following information:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Name"),": A name used to reference the broker within the project.  "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"URL"),": The URL or IP address for the connection. Ensure you include the appropriate prefix, such as ",(0,o.kt)("inlineCode",{parentName:"li"},"mqtt://"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"mqtts://"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"ws://"),", or ",(0,o.kt)("inlineCode",{parentName:"li"},"wss://"),", before the URL.  "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Credentials"),": The username and password of an admin user with sufficient permissions.  "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Certificates"),": If required, add the server CA and/or client certificate for authentication to securely connect to your broker.  ")),(0,o.kt)("img",{className:"docimagemb",src:n(28707).Z,width:"75%"}),(0,o.kt)("h3",u({},{id:"cluster"}),"Cluster"),(0,o.kt)("p",null,"A new cluster can be created, or the platform can discover an existing cluster."),(0,o.kt)("h4",u({},{id:"add-new-cluster"}),"Add New Cluster"),(0,o.kt)("p",null,"After clicking ",(0,o.kt)("strong",{parentName:"p"},'"Add Cluster"'),", the platform will prompt you to enter the details for the cluster you wish to create. Before proceeding, ensure that your cluster nodes are configured and available as outlined ",(0,o.kt)("a",u({parentName:"p"},{href:"/mosquitto/3.0/clustering/overview-clusters"}),"here"),"."),(0,o.kt)("img",{className:"docimagemb",src:n(46173).Z,width:"75%"}),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Name"),": The name used to identify the cluster in the configuration. This name will also appear on the project overview page. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cluster Mode"),": Select the cluster ",(0,o.kt)("a",u({parentName:"li"},{href:"/mosquitto/3.0/clustering/overview-clusters"}),"mode")," to use. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cluster Nodes"),": Add the nodes to include in the cluster. Use the admin port connection (default: port 1885). A minimum of three nodes must be configured and accessible to create a cluster.")),(0,o.kt)("p",null,"Click ",(0,o.kt)("strong",{parentName:"p"},'"Create Cluster"')," to initiate the cluster. Once the cluster is created, you will be prompted to provide the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Public Cluster Connection"),": Define the public connection the platform will use to connect to the cluster.")),(0,o.kt)("p",null,"After completing these steps, the cluster is ready to use. The platform will detect the current leader via the admin port connection and establish a connection to it. The leader serves as the primary source of truth for the platform and is responsible for displaying the content of the menus. In the background, the leader synchronizes all relevant information with its follower nodes to ensure consistency. If another node takes over the lead, the platform will detect it and display the changes in the UI. "),(0,o.kt)("p",null,"Changes to the cluster are only possible as long as a functional cluster is detected (a majority of nodes is reachable). "),(0,o.kt)("img",{className:"docimagemb",src:n(16585).Z,width:"75%"}),(0,o.kt)("h5",u({},{id:"cluster-nodes"}),"Cluster Nodes"),(0,o.kt)("p",null,"To create a cluster, you must specify at least three nodes in the ",(0,o.kt)("strong",{parentName:"p"},"Cluster Nodes")," menu. Additional nodes can be added later as long as the cluster remains functional (i.e., the majority of nodes are online)."),(0,o.kt)("p",null,"Connections defined here must use the admin port (default: 1885), as these connections allow the platform to administer nodes and communicate with them individually."),(0,o.kt)("h5",u({},{id:"public-cluster-connection"}),"Public Cluster Connection"),(0,o.kt)("p",null,'Enter the public connection details in this field. These details are used by the platform to display connection information via the connection tile and are also utilized by the "Publish & Subscribe" tool to connect to the broker.'),(0,o.kt)("p",null,"Use the public port instead of the admin port specified in the ",(0,o.kt)("strong",{parentName:"p"},"Cluster Nodes")," step. The public port is defined through the HAProxies and is the same port your connecting clients will use. Depending on your HAProxy configuration, you may already be using a DNS instead of an IP address for this connection."),(0,o.kt)("h4",u({},{id:"discover-existing-cluster"}),"Discover Existing Cluster"),(0,o.kt)("p",null,"An existing cluster can be discovered by adding the admin port connection of one of its nodes. The platform will detect that the node is already part of a cluster and will prompt you to import the cluster details. Click ",(0,o.kt)("strong",{parentName:"p"},'"Import"'),", and the platform will prefill details for all nodes. Since connection details to the cluster are not saved on the cluster itself, the platform will suggest connection details for the detected nodes. Adjust these details if necessary."),(0,o.kt)("p",null,"Once all detected nodes are accessible, the cluster can be imported. To complete the configuration, you will need to enter the ",(0,o.kt)("strong",{parentName:"p"},"Public Cluster Connection")," details, as described earlier."),(0,o.kt)("img",{className:"docimagemb",src:n(46173).Z,width:"75%"}),(0,o.kt)("h2",u({},{id:"change-connection-details"}),"Change Connection Details"),(0,o.kt)("p",null,"To modify existing connection details, open the ",(0,o.kt)("strong",{parentName:"p"},'"Home"')," menu of your broker connection and click the edit button in the top-right corner of the ",(0,o.kt)("strong",{parentName:"p"},'"Connection"')," tile. Here, you can update the connection details."),(0,o.kt)("h3",u({},{id:"single-node-1"}),"Single Node"),(0,o.kt)("p",null,"It is possible to compltly change the details fo a connection, which could also mean connecting a totally different broker as before. Make sure to use an admin user. If you use a user without sufficient rights, the platform connection to the broker won\xb4t be able to work properly. "),(0,o.kt)("h3",u({},{id:"cluster-1"}),"Cluster"),(0,o.kt)("p",null,"For clusters, an overview of the defined ",(0,o.kt)("strong",{parentName:"p"},"Public Cluster Connection")," and all connected ",(0,o.kt)("strong",{parentName:"p"},"Cluster Nodes")," will be displayed."),(0,o.kt)("h4",u({},{id:"delete-a-cluster"}),"Delete a Cluster"),(0,o.kt)("p",null,"To delete a cluster, select the delete action from the ",(0,o.kt)("strong",{parentName:"p"},"Public Cluster Connection")," section. This will remove the cluster from the platform and initiate its deletion on the individual nodes."),(0,o.kt)("h4",u({},{id:"change-cluster-nodes"}),"Change Cluster Nodes"),(0,o.kt)("h5",u({},{id:"add-node"}),"Add Node"),(0,o.kt)("p",null,"To add nodes, click ",(0,o.kt)("strong",{parentName:"p"},'"Add Node"')," and enter the admin port details to connect and include the node in the cluster."),(0,o.kt)("h5",u({},{id:"remove-node"}),"Remove Node"),(0,o.kt)("p",null,"Nodes can only be removed if the cluster contains more than three nodes. A minimum of three nodes is required for a cluster to remain functional."))}b.isMDXComponent=!0},46173:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/ImportCluster-83117a5d8331fb3c56972ab798be43e2.png"},28707:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/AddSingleNode-ee579e510771d420cfece4774fe03096.png"},16585:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/ClusterEditMenu-733f3c4ff808273be9b392bd0fd37496.png"}}]);