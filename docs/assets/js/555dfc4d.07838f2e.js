"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[71969],{3905:(e,t,s)=>{s.d(t,{Zo:()=>d,kt:()=>u});var o=s(67294);function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t){if(null==e)return{};var s,o,a=function(e,t){if(null==e)return{};var s,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)s=i[o],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)s=i[o],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),s=t;return e&&(s="function"==typeof e?e(t):n(n({},t),e)),s},d=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var s=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=c(s),u=a,m=p["".concat(l,".").concat(u)]||p[u]||h[u]||i;return s?o.createElement(m,n(n({ref:t},d),{},{components:s})):o.createElement(m,n({ref:t},d))}));function u(e,t){var s=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=s.length,n=new Array(i);n[0]=p;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:a,n[1]=r;for(var c=2;c<i;c++)n[c]=s[c];return o.createElement.apply(null,n)}return o.createElement.apply(null,s)}p.displayName="MDXCreateElement"},69761:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>k,contentTitle:()=>u,default:()=>f,frontMatter:()=>p,metadata:()=>m,toc:()=>b});var o=s(3905),a=Object.defineProperty,i=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))l.call(t,s)&&d(e,s,t[s]);if(r)for(var s of r(t))c.call(t,s)&&d(e,s,t[s]);return e};const p={id:"mqtt-vocabulary",title:"MQTT Vocabulary",sidebar_label:"MQTT Vocabulary"},u=void 0,m={unversionedId:"mqtt-vocabulary",id:"version-2.1/mqtt-vocabulary",title:"MQTT Vocabulary",description:"Acknowledgement",source:"@site/mosquitto_versioned_docs/version-2.1/mqtt-vocabulary.md",sourceDirName:".",slug:"/mqtt-vocabulary",permalink:"/mosquitto/2.1/mqtt-vocabulary",draft:!1,tags:[],version:"2.1",frontMatter:{id:"mqtt-vocabulary",title:"MQTT Vocabulary",sidebar_label:"MQTT Vocabulary"},sidebar:"someSidebar",previous:{title:"MQTT Packets",permalink:"/mosquitto/2.1/mqtt-packets-overview"}},k={},b=[{value:"Acknowledgement",id:"acknowledgement",level:4},{value:"Broker",id:"broker",level:4},{value:"Clean Session",id:"clean-session",level:4},{value:"Clean Start",id:"clean-start",level:4},{value:"Client",id:"client",level:4},{value:"Client ID",id:"client-id",level:4},{value:"CONNACK",id:"connack",level:4},{value:"CONNECT",id:"connect",level:4},{value:"Device",id:"device",level:4},{value:"DUP",id:"dup",level:4},{value:"Flag",id:"flag",level:4},{value:"IP",id:"ip",level:4},{value:"Keep Alive",id:"keep-alive",level:4},{value:"Last Will",id:"last-will",level:4},{value:"Message",id:"message",level:4},{value:"MQTT",id:"mqtt",level:4},{value:"MQTT v.3.1.1",id:"mqtt-v311",level:4},{value:"MQTT v.5.0",id:"mqtt-v50",level:4},{value:"Packet",id:"packet",level:4},{value:"Packet ID",id:"packet-id",level:4},{value:"Password",id:"password",level:4},{value:"Payload",id:"payload",level:4},{value:"Persistent Session",id:"persistent-session",level:4},{value:"PINGREQ",id:"pingreq",level:4},{value:"PINGRESP",id:"pingresp",level:4},{value:"Pub / Sub",id:"pub--sub",level:4},{value:"PUBACK",id:"puback",level:4},{value:"PUBCOMP",id:"pubcomp",level:4},{value:"PUBLISH",id:"publish",level:4},{value:"Publisher",id:"publisher",level:4},{value:"PUBREC",id:"pubrec",level:4},{value:"PUBREL",id:"pubrel",level:4},{value:"Quality of Service QoS",id:"quality-of-service-qos",level:4},{value:"QoS 0",id:"qos-0",level:4},{value:"QoS 1",id:"qos-1",level:4},{value:"QoS 2",id:"qos-2",level:4},{value:"Queue",id:"queue",level:4},{value:"Retained Message",id:"retained-message",level:4},{value:"Return Code",id:"return-code",level:4},{value:"Session",id:"session",level:4},{value:"Session Expiry Interval",id:"session-expiry-interval",level:4},{value:"SUBSCRIBE",id:"subscribe",level:4},{value:"Subscriber",id:"subscriber",level:4},{value:"Subscription",id:"subscription",level:4},{value:"TCP",id:"tcp",level:4},{value:"TLS",id:"tls",level:4},{value:"Topic",id:"topic",level:4},{value:"UNSUBSCRIBE",id:"unsubscribe",level:4},{value:"Username",id:"username",level:4},{value:"Wildcard",id:"wildcard",level:4},{value:"+",id:"-1",level:4}],v={toc:b};function f(e){var t,a=e,{components:d}=a,p=((e,t)=>{var s={};for(var o in e)l.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&c.call(e,o)&&(s[o]=e[o]);return s})(a,["components"]);return(0,o.kt)("wrapper",(t=h(h({},v),p),i(t,n({components:d,mdxType:"MDXLayout"}))),(0,o.kt)("h4",h({},{id:"acknowledgement"}),"Acknowledgement"),(0,o.kt)("p",null,"There are various acknowledgements that are used within MQTT:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"SUBACK"),(0,o.kt)("li",{parentName:"ul"},"CONNACK"),(0,o.kt)("li",{parentName:"ul"},"PUBACK / PUBREC / PUBREL")),(0,o.kt)("h4",h({},{id:"broker"}),"Broker"),(0,o.kt)("p",null,"There is no alternative for clients (publisher and subscribers) than to connect to a broker when you are using MQTT protocol architecture. All packets must pass the broker. Each getting checked for specific properties, also the broker filters the package to figure out whom (subscribers) to forward the package to.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#the-broker-is-the-central-entity"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#the-broker-is-the-central-entity"),"."),(0,o.kt)("h4",h({},{id:"clean-session"}),"Clean Session"),(0,o.kt)("p",null,"This parameter shows if a client wants to establish a persistent session with a broker or not. Therefore, the cleanSession parameter can have two values: \u201ctrue\u201d (Client doesn\u2019t want to establish a persistent session. In addition, all previous persistent sessions are dismissed.) or \u201cfalse\u201d(Client wants to establish a persistent session.)"),(0,o.kt)("h4",h({},{id:"clean-start"}),"Clean Start"),(0,o.kt)("p",null,"cleanStart = 0\nIn this case the server resumes communication with the client based on the state of the current session (the session is identified by the clientId).\nIf there is no earlier session, the broker must create a new session.\nIn case of a connection disconnectiong, the broker must store:\nWhether the session exists. Even though a topic has no subscriptions and therefore the session would be without real use.\nAll subscriptions.\nAll QoS1 or QoS2 messages that haven't been confirmed by the client yet.\ncleanStart = 1\nIn this case the broker discards any previous sessions and opens a new one."),(0,o.kt)("h4",h({},{id:"client"}),"Client"),(0,o.kt)("p",null,"The data is sent via the MQTT protocol. The MQTT broker receives the data, filters the data packet, and forwards it to the receiving clients. In this scenario, the receiving clients could be the radiator or humidifier. This is possible because of the efficient protocol format, and because a broker is used to decouple the sender and receiver.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/broker-introduction#intro"}),"https://docs.cedalo.com/mosquitto/2.1/broker-introduction#intro"),"."),(0,o.kt)("h4",h({},{id:"client-id"}),"Client ID"),(0,o.kt)("p",null,"Most used for cleanSession. In case you have set CleanFlag=false and reconnected with the same clientId, the broker remembers the topics you have subscribed to."),(0,o.kt)("h4",h({},{id:"connack"}),"CONNACK"),(0,o.kt)("p",null,"The broker in return responds by sending a so-called CONNACK packet (Acknowledge connection request) and a status code. If the clean session value in a client\u2019s CONNECT message is \u201ctrue,\u201d then the session present value in the CONNACK response will be \u201cfalse.\u201d It means that a client and broker should establish a new session and, at the same time, discard any existing one. After the CONNECT and CONNACK packet is exchanged, the connection is enabled."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(35153).Z,width:"600",height:"280"})),(0,o.kt)("p",null,"See more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#broker-client-connection"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#broker-client-connection"),"."),(0,o.kt)("h4",h({},{id:"connect"}),"CONNECT"),(0,o.kt)("p",null,"An MQTT broker always connects clients who want to share and clients who want to receive data. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(11816).Z,width:"600",height:"400"})),(0,o.kt)("p",null,"See more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#broker-client-connection"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#broker-client-connection"),"."),(0,o.kt)("h4",h({},{id:"device"}),"Device"),(0,o.kt)("p",null,"In this documentation, any device can be a client. And any client can be a publisher or subscriber."),(0,o.kt)("h4",h({},{id:"dup"}),"DUP"),(0,o.kt)("p",null,"A dupFlag indicates the duplicate of a message.\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#dupflag"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#dupflag"),"."),(0,o.kt)("h4",h({},{id:"flag"}),"Flag"),(0,o.kt)("p",null,"There is only the DUP flag available within MQTT."),(0,o.kt)("h4",h({},{id:"ip"}),"IP"),(0,o.kt)("p",null,"The Internet Protocol (IP) is a network protocol that is widespread in computer networks and represents the basis of the Internet due to its function. The IP is the implementation of the Internet layer of the TCP/IP model.\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/security#tcpip-is-not-safe-on-its-own"}),"https://docs.cedalo.com/mosquitto/2.1/security#tcpip-is-not-safe-on-its-own"),"."),(0,o.kt)("h4",h({},{id:"keep-alive"}),"Keep Alive"),(0,o.kt)("p",null,"The MQTT keepAlive parameter identifies the maximum interval in seconds (e.g., 120, as I show in this article\u2019s example) when a client maintains the MQTT connection but without communication (sending an MQTT packet). After the specified keepAlive parameter period is over, a client sends a PING request (PINGREQ), and a broker has to respond with a PING Response (PINGRESP). If no response follows the PING request, the client can assume the connection has disconnected. Also, the broker is waiting for the PING request. The broker must expect a PINGREQ and wait for another half of the set in the keepAlive parameter time, but then disconnect the connection for good.\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#keepalive"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#keepalive"),"."),(0,o.kt)("h4",h({},{id:"last-will"}),"Last Will"),(0,o.kt)("p",null,"The lastWill message is sent by the broker on behalf of the client when a disconnect occurs without a DISCONNECT packet before the actual break-off.\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#lastwill"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#lastwill"),"."),(0,o.kt)("h4",h({},{id:"message"}),"Message"),(0,o.kt)("p",null,"The actual content of a message is the content of a payload. MQTT is not limited by its payload format. It delivers what the publisher is sending. This could be a value, string, JSON file, or even content of a jpg or an mp3 file. Up to 256MB. The payload does not encrypt the content. The broker simply delivers what the publisher inserts into the payload.\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#payload"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#payload"),"."),(0,o.kt)("h4",h({},{id:"mqtt"}),"MQTT"),(0,o.kt)("p",null,"MQTT = \u201cMQ Telemetry Transport\u201d. The setup consists of two basic concepts: PUBLISH / SUBSCRIBE and CLIENT / BROKER. And three basic functionalities: CONNECT, PUBLISH, SUBSCRIBE\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/"),"."),(0,o.kt)("h4",h({},{id:"mqtt-v311"}),"MQTT v.3.1.1"),(0,o.kt)("p",null,"Most MQTT-related devices support v.3.1.1 whilst v.5.0 not.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html"}),"http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html"),"."),(0,o.kt)("h4",h({},{id:"mqtt-v50"}),"MQTT v.5.0"),(0,o.kt)("p",null,"The MQTT version 5.0 is the next development step in the evolution of MQTT. Especially interesting is the changes made to the cleanSession. Have a look here: ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#connect"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#connect"),"\n",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/supported-mqtt-versions/#v50"}),"https://docs.cedalo.com/mosquitto/2.1/supported-mqtt-versions/#v50"),"."),(0,o.kt)("h4",h({},{id:"packet"}),"Packet"),(0,o.kt)("p",null,'There is no definition of when a delivery is called a packet or message. Cedalo is using the term "packet" for any of the commands, and "message" for publishing or subscribing messages. All packets must pass the broker.'),(0,o.kt)("h4",h({},{id:"packet-id"}),"Packet ID"),(0,o.kt)("p",null,"Unique packet identifier the broker uses to identify the packet when needed.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#packetid-1"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#packetid-1"),"."),(0,o.kt)("h4",h({},{id:"password"}),"Password"),(0,o.kt)("p",null,"MQTT can forward and handle username and password within a sent packet. It's important that whenever a packet is not encrypted or hashed (either by implementation or TSL), the password is sent as plain text.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#usernamepassword"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#usernamepassword"),"."),(0,o.kt)("h4",h({},{id:"payload"}),"Payload"),(0,o.kt)("p",null,"MQTT is not limited by its payload format. It delivers what the publisher is sending. The actual content of a message is the content of a payload.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#payload"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#payload"),"."),(0,o.kt)("h4",h({},{id:"persistent-session"}),"Persistent Session"),(0,o.kt)("p",null,"The Persistent session is active when the cleanSession flag is set to false. An active MQTT persistent session (with the cleanSession having the \u201cfalse\u201d value) is activated whenever the client disconnects ungracefully. All information that the client did not receive from the broker since the last active connection will be preserved on the broker and delivered to the client once the connection is restored. The broker resumes the client in the existing session if the clientId is the same as the disconnected client. A client will not have to resubscribe to all topics again.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#persistent-sessions"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#persistent-sessions"),"."),(0,o.kt)("h4",h({},{id:"pingreq"}),"PINGREQ"),(0,o.kt)("p",null,"No matter who is not answering or sending the PINGREQ or PINGRESP within the specific time interval plus another half of the very same interval, the broker or client must disconnect. When this happens, the broker sends the lastWill and testament message. If the client has created one. Within the interval, it's ok that the client and broker do not transmit messages. In fact, after this interval, the client must send a so-called PING Request packet (PINGREQ)."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(7350).Z,width:"600",height:"203"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#keepalive"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#keepalive"),"."),(0,o.kt)("h4",h({},{id:"pingresp"}),"PINGRESP"),(0,o.kt)("p",null,'The broker must respond with a PING Response (PINGRESP). If the connection is out of sync, and a participant is not responding - called a "half-open connection", keepAlive takes action.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(96713).Z,width:"600",height:"203"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#keepalive"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#keepalive"),"."),(0,o.kt)("h4",h({},{id:"pub--sub"}),"Pub / Sub"),(0,o.kt)("p",null,"The PUBLISH/SUBSCRIBE model connects client that want to exchange information/data/messages.\nThe model consists of the client-server model. Any client communicates with an endpoint via the broker. Before a client wants to publish messages it first has to set up a connection with the broker. Also, a subscribing client has to do the same. Therefore, the broker can decouple the publisher and subscriber.\nSee more  ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#central-hub"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#central-hub"),"."),(0,o.kt)("h4",h({},{id:"puback"}),"PUBACK"),(0,o.kt)("p",null,"The broker must acknowledge each SUBSCRIBE packet. Therefore the broker sends a SUBACK packet (subscribe acknowledge) to the client."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(48360).Z,width:"600",height:"219"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#subscriptions"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#subscriptions"),"."),(0,o.kt)("h4",h({},{id:"pubcomp"}),"PUBCOMP"),(0,o.kt)("p",null,"To discard all stored states and answers a so-called PUBCOMP packet (Publish complete) is sent. That's the end of the QoS2 order of events."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(98505).Z,width:"600",height:"219"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/quality-of-service/#qos2---exactly-once"}),"https://docs.cedalo.com/mosquitto/2.1/quality-of-service/#qos2---exactly-once"),"."),(0,o.kt)("h4",h({},{id:"publish"}),"PUBLISH"),(0,o.kt)("p",null,"The PUBLISH packet consists of details that indicate to the broker what to do.\nRead more about these here: ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#packetid"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#packetid"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(80460).Z,width:"600",height:"310"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#mqtt-pubsub-model"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#mqtt-pubsub-model"),"."),(0,o.kt)("h4",h({},{id:"publisher"}),"Publisher"),(0,o.kt)("p",null,"Either one publisher publishes messages to multiple Subscribers. Or multiple publishers publish messages to just one subscriber. Or any combination of multiple publishers/subscribers. Any publisher can only be identified when information about the publisher is included in the topic or payload.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#client-server-model"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#client-server-model"),"."),(0,o.kt)("h4",h({},{id:"pubrec"}),"PUBREC"),(0,o.kt)("p",null,"A PUBREC Packet is a response to a PUBLISH Packet with QoS 2. It is the second packet of the QoS 2 protocol exchange."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(24504).Z,width:"600",height:"219"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/quality-of-service/#qos2---exactly-once"}),"https://docs.cedalo.com/mosquitto/2.1/quality-of-service/#qos2---exactly-once"),"."),(0,o.kt)("h4",h({},{id:"pubrel"}),"PUBREL"),(0,o.kt)("p",null,"A PUBREL is another packet the broker sends after receiving the PUBREC packet. This packet must be responded to with a PUBCOMP packet."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(69968).Z,width:"600",height:"219"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/quality-of-service/#qos2---exactly-once"}),"https://docs.cedalo.com/mosquitto/2.1/quality-of-service/#qos2---exactly-once"),"."),(0,o.kt)("h4",h({},{id:"quality-of-service-qos"}),"Quality of Service QoS"),(0,o.kt)("p",null,"The QoS (Quality of Service) defines a certain level of service that enables the publisher to make sure that the certainty and quantity of a subscriber receiving a sent message equal the importance to receive the message at all, plus whether to receive the message only once. Also, a subscriber can set a QoS, defining the importance to receive every message, and whether to accept one message multiple times or not. There are three levels available.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos"),"."),(0,o.kt)("h4",h({},{id:"qos-0"}),"QoS 0"),(0,o.kt)("p",null,'The broker/client is delivering the message only once, without confirmation. There is no guarantee that the message sent has been sent to the subscriber. The recipient on the other end does not acknowledge the receipt. Neither is the acknowledgment stored. The QoS0 - level is often referred to be the "fire and forget"-level.\nSee more ',(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos-0---at-most-once"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos-0---at-most-once"),"."),(0,o.kt)("h4",h({},{id:"qos-1"}),"QoS 1"),(0,o.kt)("p",null,"Level 1 QoS guarantees the delivery of a message to the receiver at least once.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos-1---at-least-once"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos-1---at-least-once"),"."),(0,o.kt)("h4",h({},{id:"qos-2"}),"QoS 2"),(0,o.kt)("p",null,"QoS level 2 guarantees each message is received exactly once.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos-2---exactly-once"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#qos-2---exactly-once"),"."),(0,o.kt)("h4",h({},{id:"queue"}),"Queue"),(0,o.kt)("p",null,"When a persistent session is active, the broker must queue the missed messages. Whenever a persistent session is created by the client, and the broker already queued messages of an earlier persistent session, the broker delivers the queued messages using the same old session.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#persistent-sessions"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#persistent-sessions"),"."),(0,o.kt)("h4",h({},{id:"retained-message"}),"Retained Message"),(0,o.kt)("p",null,"A retained message safes the last known value of the topic. It's only possible to save up to one retained message, equal to one retained value. The retainFlag identifies a message to be a retained message. To identify the message itself the packetId is used.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#retainflag"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#retainflag"),"."),(0,o.kt)("h4",h({},{id:"return-code"}),"Return Code"),(0,o.kt)("p",null,"The return code is used within a SUBACK packet. The broker sends one return code for each topic/QoS-pair that it receives in the SUBSCRIBE packet. The return codes can be:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"0 - Success-Maximum QoS0"),(0,o.kt)("li",{parentName:"ul"},"1 - Success-Maximum QoS1"),(0,o.kt)("li",{parentName:"ul"},"2 - Success-Maximum QoS2"),(0,o.kt)("li",{parentName:"ul"},"128 - Failure")),(0,o.kt)("h4",h({},{id:"session"}),"Session"),(0,o.kt)("p",null,"If a client connects to the broker a session is started. If a client connects to the broker and another client session already exists with the clientId that the new client has chosen, the old session will be kicked out and taken over."),(0,o.kt)("h4",h({},{id:"session-expiry-interval"}),"Session Expiry Interval"),(0,o.kt)("p",null,"sessionExpiryInterval:"),(0,o.kt)("p",null,"Whenever a session ExpiryInterval is set (e.g. 60) a cleanStart is automatically set to \u201c0\u201d.\nWith a sessionExpiryInterval active the sessionState will be saved immediately after the keepAlive runs out (e.g. 120 plus half of the keepAlive - that would be 60 seconds in this case).The sessionState is safed for the amount of time set (in this case 60 seconds).\nsessionExpiryInterval is solving the problem that you don\u2019t need to send anther CONNECT packet including cleanSession=1 (MQTT v.3.1.1) to discard the session after set it retained."),(0,o.kt)("h4",h({},{id:"subscribe"}),"SUBSCRIBE"),(0,o.kt)("p",null,"To receive messages on topics of interest, the client sends a SUBSCRIBE packet to the broker."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(18207).Z,width:"600",height:"373"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt#subscribe"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt#subscribe"),"."),(0,o.kt)("h4",h({},{id:"subscriber"}),"Subscriber"),(0,o.kt)("p",null,"Direct contact between subscriber and publisher is never able. Only the broker enables transmitting messages.  Also, the subscribing client only has one duty. To subscribe to the topic it wants to receive messages from. The subscriber-only knows about the existence of the publisher as the client subscribes to the published topics.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/subscribing"}),"https://docs.cedalo.com/mosquitto/2.1/subscribing"),"."),(0,o.kt)("h4",h({},{id:"subscription"}),"Subscription"),(0,o.kt)("p",null,"A subscription consists of a packetId. And the subscriptions the subscriber wants to subscribe to. Each subscription consists of a topic and a QoS level. When subscriptions overlap, the broker delivers the message that has the highest QoS level for the specific topic."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(18207).Z,width:"600",height:"373"})),(0,o.kt)("p",null,"See more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/broker-introduction#subscribe"}),"https://docs.cedalo.com/mosquitto/2.1/broker-introduction#subscribe"),"."),(0,o.kt)("h4",h({},{id:"tcp"}),"TCP"),(0,o.kt)("p",null,"TCP is embedding TLS (Transport Layer Security). Allowing MQTT packets to be transmitted via encrypted pipes. TLS protects all parts of an MQTT packet, not only the payload.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/security#authorization"}),"https://docs.cedalo.com/mosquitto/2.1/security#authorization"),"."),(0,o.kt)("h4",h({},{id:"tls"}),"TLS"),(0,o.kt)("p",null,"Using Transport Layer Security (TLS) provides a secured communication channel a client and a server can use to connect. TLS is a cryptographic protocol, that uses a handshake mechanism to create a secure connection between client and server.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/security#server-side-tls"}),"https://docs.cedalo.com/mosquitto/2.1/security#server-side-tls"),"."),(0,o.kt)("h4",h({},{id:"topic"}),"Topic"),(0,o.kt)("p",null,'The topic is set using a simple UTF-8 string. Topics are treated hierarchically. To delimiter, a slash "/" symbolizes a separation. Allowing the client organizational structure, much like a common filesystem. There is no need for creating a topic. You can subscribe to any topic, even though there might not be messages published. On the other hand, you must know about the topic names to be able to subscribe to them.\nSee more ',(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#central-hub"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#central-hub"),"."),(0,o.kt)("h4",h({},{id:"unsubscribe"}),"UNSUBSCRIBE"),(0,o.kt)("p",null,"A client can always UNSUBSCRIBE from a topic. The UNSUBSCRIBE packet includes the packetId and list of topics the subscriber wants to unsubscribe from."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(99871).Z,width:"600",height:"286"})),(0,o.kt)("h4",h({},{id:"username"}),"Username"),(0,o.kt)("p",null,"MQTT can forward and handle username and password within a sent packet.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#usernamepassword"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#usernamepassword"),"."),(0,o.kt)("h4",h({},{id:"wildcard"}),"Wildcard"),(0,o.kt)("p",null,"Subscribing to several topics simultaneously is an option that's possible. There are two kinds of wildcards: single-level and multiple levels.\nSee more ",(0,o.kt)("a",h({parentName:"p"},{href:"https://docs.cedalo.com/mosquitto/2.1/mqtt/#subscriptions"}),"https://docs.cedalo.com/mosquitto/2.1/mqtt/#subscriptions"),"."),(0,o.kt)("h5",h({},{id:""})),(0,o.kt)("p",null,'"#" is used, the client subscribes to each topic that\'s after the #.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(57363).Z,width:"600",height:"416"})),(0,o.kt)("h4",h({},{id:"-1"}),"+"),(0,o.kt)("p",null,"\u201c+\u201d is the wildcard used to match a single level of hierarchy."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"mqttProtocol",src:s(76882).Z,width:"600",height:"273"})))}f.isMDXComponent=!0},35153:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/CONNACK-01d74fa06e61abb23ab6c3136b9ee4f9.png"},11816:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/CONNECT-5a980387b5072c46485bb7e5846a778e.png"},7350:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PINGREQ-3f59bf01166e56a43e22c0a329a2ac23.png"},96713:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PINGRESP-015856310847e3d4f1d6765f307f3b43.png"},48360:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PUBACK-006003278fa5905ddb879b54cbb6f378.png"},98505:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PUBCOMP-c6e2ea70b25e2fa1ce2a910dccb8be7b.png"},80460:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PUBLISH-e0d3503e716c9661f59b1704ad9cd154.png"},24504:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PUBREC-e13f60c51521081b2905ecc1003ef1bb.png"},69968:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/PUBREL-ed79ff6635f8562dda6dc0fbd268f679.png"},18207:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/SUBSCRIBE-85c834fcaaa6eed0eb6bd0b86a9a96fa.png"},99871:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/UNSUBSCRIBE-bafcc7ea712e85f35476223766cd5572.png"},57363:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/multiLevelWildcard-5891b52d18a7e2c766096b3c84009134.png"},76882:(e,t,s)=>{s.d(t,{Z:()=>o});const o=s.p+"assets/images/singleLevelWildcard-91bc807966ddb3472020cd99e51ee06c.png"}}]);