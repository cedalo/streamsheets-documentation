"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[91759],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>p});var n=r(67294);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var l=n.createContext({}),d=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},b=n.forwardRef((function(e,t){var r=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),b=d(r),p=s,u=b["".concat(l,".").concat(p)]||b[p]||m[p]||o;return r?n.createElement(u,i(i({ref:t},c),{},{components:r})):n.createElement(u,i({ref:t},c))}));function p(e,t){var r=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=r.length,i=new Array(o);i[0]=b;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:s,i[1]=a;for(var d=2;d<o;d++)i[d]=r[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}b.displayName="MDXCreateElement"},31752:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>p,default:()=>y,frontMatter:()=>b,metadata:()=>u,toc:()=>k});var n=r(3905),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&c(e,r,t[r]);if(a)for(var r of a(t))d.call(t,r)&&c(e,r,t[r]);return e};const b={id:"system-topics",title:"System Topics",sidebar_label:"System Topics"},p=void 0,u={unversionedId:"monitoring/system-topics",id:"version-3.0/monitoring/system-topics",title:"System Topics",description:'A basic monitoring of the Mosquitto broker is possible by observing so-called "System topics".',source:"@site/mosquitto_versioned_docs/version-3.0/monitoring/system-topics.md",sourceDirName:"monitoring",slug:"/monitoring/system-topics",permalink:"/mosquitto/3.0/monitoring/system-topics",draft:!1,tags:[],version:"3.0",frontMatter:{id:"system-topics",title:"System Topics",sidebar_label:"System Topics"},sidebar:"someSidebar",previous:{title:"Topic Inspection",permalink:"/mosquitto/3.0/monitoring/topic-inspection"},next:{title:"Available Metrics",permalink:"/mosquitto/3.0/monitoring/metrics/available-metrics"}},h={},k=[{value:"System topic description",id:"system-topic-description",level:2},{value:"<code>$SYS/broker/bytes/received</code>",id:"sysbrokerbytesreceived",level:3},{value:"<code>$SYS/broker/bytes/sent</code>",id:"sysbrokerbytessent",level:3},{value:"<code>$SYS/broker/clients/connected</code>,",id:"sysbrokerclientsconnected",level:3},{value:"<code>$SYS/broker/clients/expired</code>",id:"sysbrokerclientsexpired",level:3},{value:"<code>$SYS/broker/clients/disconnected</code>,",id:"sysbrokerclientsdisconnected",level:3},{value:"<code>$SYS/broker/clients/maximum</code>",id:"sysbrokerclientsmaximum",level:3},{value:"<code>$SYS/broker/clients/total</code>",id:"sysbrokerclientstotal",level:3},{value:"<code>$SYS/broker/connection/#</code>",id:"sysbrokerconnection",level:3},{value:"<code>$SYS/broker/heap/current size</code>",id:"sysbrokerheapcurrent-size",level:3},{value:"<code>$SYS/broker/heap/maximum size</code>",id:"sysbrokerheapmaximum-size",level:3},{value:"<code>$SYS/broker/load/connections/+</code>",id:"sysbrokerloadconnections",level:3},{value:"<code>$SYS/broker/load/bytes/received/+</code>",id:"sysbrokerloadbytesreceived",level:3},{value:"<code>$SYS/broker/load/bytes/sent/+</code>",id:"sysbrokerloadbytessent",level:3},{value:"<code>$SYS/broker/load/messages/sent/+</code>",id:"sysbrokerloadmessagessent",level:3},{value:"<code>$SYS/broker/load/messages/received/+</code>",id:"sysbrokerloadmessagesreceived",level:3},{value:"<code>$SYS/broker/load/publish/dropped/+</code>",id:"sysbrokerloadpublishdropped",level:3},{value:"<code>$SYS/broker/load/publish/received/+</code>",id:"sysbrokerloadpublishreceived",level:3},{value:"<code>$SYS/broker/load/publish/sent/+</code>",id:"sysbrokerloadpublishsent",level:3},{value:"<code>$SYS/broker/load/sockets/+</code>",id:"sysbrokerloadsockets",level:3},{value:"<code>$SYS/broker/messages/inflight</code>",id:"sysbrokermessagesinflight",level:3},{value:"<code>$SYS/broker/messages/received</code>",id:"sysbrokermessagesreceived",level:3},{value:"<code>$SYS/broker/messages/sent</code>",id:"sysbrokermessagessent",level:3},{value:"<code>$SYS/broker/publish/messages/dropped</code>",id:"sysbrokerpublishmessagesdropped",level:3},{value:"<code>$SYS/broker/publish/messages/received</code>",id:"sysbrokerpublishmessagesreceived",level:3},{value:"<code>$SYS/broker/publish/messages/sent</code>",id:"sysbrokerpublishmessagessent",level:3},{value:"<code>$SYS/broker/retained messages/count</code>",id:"sysbrokerretained-messagescount",level:3},{value:"<code>$SYS/broker/store/messages/count</code>,",id:"sysbrokerstoremessagescount",level:3},{value:"<code>$SYS/broker/store/messages/bytes</code>",id:"sysbrokerstoremessagesbytes",level:3},{value:"<code>$SYS/broker/subscriptions/count</code>",id:"sysbrokersubscriptionscount",level:3},{value:"<code>$SYS/broker/version</code>",id:"sysbrokerversion",level:3}],v={toc:k};function y(e){var t,r=e,{components:s}=r,c=((e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&d.call(e,n)&&(r[n]=e[n]);return r})(r,["components"]);return(0,n.kt)("wrapper",(t=m(m({},v),c),o(t,i({components:s,mdxType:"MDXLayout"}))),(0,n.kt)("p",null,'A basic monitoring of the Mosquitto broker is possible by observing so-called "System topics".\nClients can find information about the broker by subscribing to topics in the $SYS hierarchy as follows.\nTopics marked as static are only sent once per client on subscription. All other topics are updated every ',(0,n.kt)("inlineCode",{parentName:"p"},"sys_interval")," seconds. If ",(0,n.kt)("inlineCode",{parentName:"p"},"sys_interval")," is 0, then updates are not sent."),(0,n.kt)("h2",m({},{id:"system-topic-description"}),"System topic description"),(0,n.kt)("h3",m({},{id:"sysbrokerbytesreceived"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/bytes/received")),(0,n.kt)("p",null,"The total number of bytes received since the broker started."),(0,n.kt)("h3",m({},{id:"sysbrokerbytessent"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/bytes/sent")),(0,n.kt)("p",null,"The total number of bytes sent since the broker started."),(0,n.kt)("h3",m({},{id:"sysbrokerclientsconnected"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/clients/connected"),","),(0,n.kt)("p",null,"  ",(0,n.kt)("inlineCode",{parentName:"p"},"$SYS/broker/clients/active")," (deprecated)"),(0,n.kt)("p",null,"The number of currently connected clients."),(0,n.kt)("h3",m({},{id:"sysbrokerclientsexpired"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/clients/expired")),(0,n.kt)("p",null,"The number of disconnected persistent clients that have been expired and removed through the ",(0,n.kt)("inlineCode",{parentName:"p"},"persistent\\_client\\_expiration")," option."),(0,n.kt)("h3",m({},{id:"sysbrokerclientsdisconnected"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/clients/disconnected"),","),(0,n.kt)("p",null,"  ",(0,n.kt)("inlineCode",{parentName:"p"},"$SYS/broker/clients/inactive")," (deprecated)"),(0,n.kt)("p",null,"The total number of persistent clients (with clean session disabled) that are registered at the broker but are currently disconnected."),(0,n.kt)("h3",m({},{id:"sysbrokerclientsmaximum"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/clients/maximum")),(0,n.kt)("p",null,"The maximum number of clients that have been connected to the broker at the same time."),(0,n.kt)("h3",m({},{id:"sysbrokerclientstotal"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/clients/total")),(0,n.kt)("p",null,"The total number of active and inactive clients currently connected and registered on the broker."),(0,n.kt)("h3",m({},{id:"sysbrokerconnection"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/connection/#")),(0,n.kt)("p",null,"When bridges are configured to/from the broker, common practice is to provide a status topic that indicates the state of the connection. This is provided within ",(0,n.kt)("inlineCode",{parentName:"p"},"$SYS/broker/connection/")," by default. If the value of the topic is 1 the connection is active, if 0 then it is not active. See the Bridges section below for more information on bridges."),(0,n.kt)("h3",m({},{id:"sysbrokerheapcurrent-size"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/heap/current size")),(0,n.kt)("p",null,"The current size of the heap memory in use by mosquitto. Note that this topic may be unavailable depending on compile time options."),(0,n.kt)("h3",m({},{id:"sysbrokerheapmaximum-size"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/heap/maximum size")),(0,n.kt)("p",null,"The largest amount of heap memory used by mosquitto. Note that this topic may be unavailable depending on compile time options."),(0,n.kt)("h3",m({},{id:"sysbrokerloadconnections"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/connections/+")),(0,n.kt)("p",null,'The moving average of the number of CONNECT packets received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of connections received in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadbytesreceived"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/bytes/received/+")),(0,n.kt)("p",null,'The moving average of the number of bytes received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of bytes received in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadbytessent"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/bytes/sent/+")),(0,n.kt)("p",null,'The moving average of the number of bytes sent by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of bytes sent in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadmessagessent"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/messages/sent/+")),(0,n.kt)("p",null,'The moving average of the number of all types of MQTT messages sent by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of messages send in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadmessagesreceived"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/messages/received/+")),(0,n.kt)("p",null,'The moving average of the number of all types of MQTT messages received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of messages received in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadpublishdropped"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/publish/dropped/+")),(0,n.kt)("p",null,'The moving average of the number of publish messages dropped by the broker over different time intervals. This shows the rate at which durable clients that are disconnected are losing messages. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of messages dropped in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadpublishreceived"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/publish/received/+")),(0,n.kt)("p",null,'The moving average of the number of publish messages received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of publish messages received in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadpublishsent"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/publish/sent/+")),(0,n.kt)("p",null,'The moving average of the number of publish messages sent by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of publish messages sent in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokerloadsockets"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/load/sockets/+")),(0,n.kt)("p",null,'The moving average of the number of socket connections opened to the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of socket connections in 1 minute, averaged over 1, 5 or 15 minutes.'),(0,n.kt)("h3",m({},{id:"sysbrokermessagesinflight"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/messages/inflight")),(0,n.kt)("p",null,"The number of messages with QoS>0 that are awaiting acknowledgments."),(0,n.kt)("h3",m({},{id:"sysbrokermessagesreceived"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/messages/received")),(0,n.kt)("p",null,"The total number of messages of any type received since the broker started."),(0,n.kt)("h3",m({},{id:"sysbrokermessagessent"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/messages/sent")),(0,n.kt)("p",null,"The total number of messages of any type sent since the broker started."),(0,n.kt)("h3",m({},{id:"sysbrokerpublishmessagesdropped"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/publish/messages/dropped")),(0,n.kt)("p",null,"The total number of publish messages that have been dropped due to ",(0,n.kt)("inlineCode",{parentName:"p"},"inflight/queuing")," limits. See the ",(0,n.kt)("inlineCode",{parentName:"p"},"max\\_inflight\\_messages")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"max\\_queued\\_messages")," options in ","[Mosquitto Configuration]"," (NEW_mosquitto-configuration.md) for more information."),(0,n.kt)("h3",m({},{id:"sysbrokerpublishmessagesreceived"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/publish/messages/received")),(0,n.kt)("p",null,"The total number of PUBLISH messages received since the broker started."),(0,n.kt)("h3",m({},{id:"sysbrokerpublishmessagessent"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/publish/messages/sent")),(0,n.kt)("p",null,"The total number of PUBLISH messages sent since the broker started."),(0,n.kt)("h3",m({},{id:"sysbrokerretained-messagescount"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/retained messages/count")),(0,n.kt)("p",null,"The total number of retained messages active on the broker."),(0,n.kt)("h3",m({},{id:"sysbrokerstoremessagescount"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/store/messages/count"),","),(0,n.kt)("p",null,"  ",(0,n.kt)("inlineCode",{parentName:"p"},"$SYS/broker/messages/stored")," (deprecated)"),(0,n.kt)("p",null,"The number of messages currently held in the message store. This includes retained messages and messages queued for durable clients."),(0,n.kt)("h3",m({},{id:"sysbrokerstoremessagesbytes"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/store/messages/bytes")),(0,n.kt)("p",null,"The number of bytes currently held by message payloads in the message store. This includes retained messages and messages queued for durable clients."),(0,n.kt)("h3",m({},{id:"sysbrokersubscriptionscount"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/subscriptions/count")),(0,n.kt)("p",null,"The total number of subscriptions active on the broker."),(0,n.kt)("h3",m({},{id:"sysbrokerversion"}),(0,n.kt)("inlineCode",{parentName:"h3"},"$SYS/broker/version")),(0,n.kt)("p",null,"The version of the broker. Static."),(0,n.kt)("p",null,"Topics marked as static are only sent once per client on subscription.\nAll other topics are updated every\xa0",(0,n.kt)("inlineCode",{parentName:"p"},"sys_interval"),"\xa0seconds. If\xa0",(0,n.kt)("inlineCode",{parentName:"p"},"sys_interval"),"\xa0is 0, then updates are not sent."),(0,n.kt)("admonition",m({},{type:"note"}),(0,n.kt)("p",{parentName:"admonition"},"Note that if you are using a command line client to interact with the $SYS topics and your shell interprets $ as an environment variable, you need to place the topic in single quotes ",(0,n.kt)("inlineCode",{parentName:"p"},"'$SYS/...'")," or to escape the dollar symbol:\xa0",(0,n.kt)("inlineCode",{parentName:"p"},"\\\\$SYS/...")," otherwise the $SYS will be treated as an environment variable.")))}y.isMDXComponent=!0}}]);