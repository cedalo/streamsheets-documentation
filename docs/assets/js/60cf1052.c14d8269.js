"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[48945],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>c});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),p=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return i.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(t),c=a,h=m["".concat(s,".").concat(c)]||m[c]||d[c]||r;return t?i.createElement(h,o(o({ref:n},u),{},{components:t})):i.createElement(h,o({ref:n},u))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=t[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},64428:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>c,default:()=>S,frontMatter:()=>m,metadata:()=>h,toc:()=>f});var i=t(3905),a=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,n,t)=>n in e?a(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n)=>{for(var t in n||(n={}))s.call(n,t)&&u(e,t,n[t]);if(l)for(var t of l(n))p.call(n,t)&&u(e,t,n[t]);return e};const m={id:"mc-sso",title:"Single Sign-On",sidebar_label:"Single Sign-On \u2b50"},c=void 0,h={unversionedId:"mc-sso",id:"version-2.5/mc-sso",title:"Single Sign-On",description:"This page describes how to use the Single Sign-On Plugin that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto.",source:"@site/management-center_versioned_docs/version-2.5/saml-sso.md",sourceDirName:".",slug:"/mc-sso",permalink:"/management-center/mc-sso",draft:!1,tags:[],version:"2.5",frontMatter:{id:"mc-sso",title:"Single Sign-On",sidebar_label:"Single Sign-On \u2b50"},sidebar:"someSidebar",previous:{title:"HTTPS, TLS termination \u2b50",permalink:"/management-center/mc-https"},next:{title:"Terminal Commands",permalink:"/management-center/mc-terminal"}},g={},f=[{value:"Single Sign-On Overview \u2b50",id:"single-sign-on-overview-",level:2},{value:"Enable SSO Plugin \u2b50",id:"enable-sso-plugin-",level:2},{value:"SSO Environmental variables \u2b50",id:"sso-environmental-variables-",level:2},{value:"Disabling SSO",id:"disabling-sso",level:2}],O={toc:f};function S(e){var n,t=e,{components:a}=t,u=((e,n)=>{var t={};for(var i in e)s.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&l)for(var i of l(e))n.indexOf(i)<0&&p.call(e,i)&&(t[i]=e[i]);return t})(t,["components"]);return(0,i.kt)("wrapper",(n=d(d({},O),u),r(n,o({components:a,mdxType:"MDXLayout"}))),(0,i.kt)("p",null,"This page describes how to use the ",(0,i.kt)("strong",{parentName:"p"},"Single Sign-On Plugin")," that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto."),(0,i.kt)("h2",d({},{id:"single-sign-on-overview-"}),"Single Sign-On Overview \u2b50"),(0,i.kt)("p",null,"Single Sign-On is a widely accepted authentication scheme that allows the login process when accessing the Management Center to happen on the side of your Identity Provider of choice.\nThis allows your users to have only a single account for all of your internal systems, which boosts user experience and transfers the responsibility of handling user credentials to the identity provider, which is specifically designed to store the latter with the maximum possible security level."),(0,i.kt)("p",null,"Management Center currently supports a SAML-based SSO."),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Mosquitto Management Center uses the mail field of the user object coming from the Identity Provider as its username for logging in into the MMC")),(0,i.kt)("h2",d({},{id:"enable-sso-plugin-"}),"Enable SSO Plugin \u2b50"),(0,i.kt)("p",null,"To enable the plugin, you should make sure you are using Pro Edition of Mosquitto and that you have the User Management feature enabled in your license. Also, ensure that your config file (specified with ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default saved in ",(0,i.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry inside of the ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,i.kt)("pre",null,(0,i.kt)("code",d({parentName:"pre"},{className:"language-json"}),'    {\n      "name": "saml-sso"\n    }\n')),(0,i.kt)("p",null,"Also, you need to specify the following environmental variables for SAML SSO configuration:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_USERNAME")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_ENTRY_POINT_URL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_LOGOUT_URL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_HOST_URL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_ISSUER")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_ISSUER")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_KEY_PATH"))),(0,i.kt)("p",null,"You can read more about these variables below."),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"To use the users coming from the Identity Provider with the Management Center, you will need to populate the ",(0,i.kt)("inlineCode",{parentName:"p"},"users.json")," file with valid user objects that have ",(0,i.kt)("inlineCode",{parentName:"p"},"username")," filed equal to the mail field in your identity provider (this is the only field which is required). Meaning that you will have to initialize the users on the side of the MMC manually. The populating can be done through the normal user creation process in the User Management tab or using the User Management REST API.")),(0,i.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,i.kt)("inlineCode",{parentName:"p"},"saml-sso")," plugin is enabled and loaded into the console:"),(0,i.kt)("pre",null,(0,i.kt)("code",d({parentName:"pre"},{}),'Loaded plugin: "saml_sso" (Cedalo SAML SSO)\n')),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"SSO plugin needs to have an initial admin user configured, using which you will be able to access the Management Center initially. You can configure this user using ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_USERNAME")," variable")),(0,i.kt)("h2",d({},{id:"sso-environmental-variables-"}),"SSO Environmental variables \u2b50"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_USERNAME")," - email of the user that exists in your Identity provider and will be used as an admin to initially access the MMC"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_ENTRY_POINT_URL")," - Path to where the Service Provider should send the Login Request (URL used for logging in)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_LOGOUT_URL")," - Path to where the Service Provider should send the Logout Request (in AzureAD, it's usually the same as the URL used for login, e. i ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_ENTRY_POINT_URL"),")"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_HOST_URL")," - host URL of the Service Provider (to what host should the Identity Provider redirect the LoginResponse)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_ISSUER")," - Issuer field in the Identity provider (Entity ID in AzureAD)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_KEY_PATH ")," - Required if you want to use client assertion flow. Path to key file (.pem). (In case the of AzureAD, it can be downloaded from the AzureAD SP metadata page)"),(0,i.kt)("h2",d({},{id:"disabling-sso"}),"Disabling SSO"),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Note that SSO plugin does not work together with the base login plugin.")),(0,i.kt)("p",null,"If you want to disable SSO for some reason and enable base login, you will need to find the config file located in the path specified with ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default stored in ",(0,i.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json")," or if you are using rpm package: ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/opt/cedalo/management-center/config/config.json")," and manually delete ",(0,i.kt)("inlineCode",{parentName:"p"},"saml-sso")," entry under ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins"),"."))}S.isMDXComponent=!0}}]);