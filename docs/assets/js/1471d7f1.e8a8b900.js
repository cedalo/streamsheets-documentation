(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[60078],{2548:(e,t,n)=>{"use strict";var o=n(64836);t.Z=void 0;var i=o(n(64938)),r=n(85893),s=(0,i.default)((0,r.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");t.Z=s},64938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=n(22236)},22236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.Z,createChainedFunction:()=>r,createSvgIcon:()=>s.Z,debounce:()=>l,deprecatedPropType:()=>a,isMuiElement:()=>d,ownerDocument:()=>m,ownerWindow:()=>h,requirePropFactory:()=>f,setRef:()=>k,unstable_ClassNameGenerator:()=>A,unstable_useEnhancedEffect:()=>g,unstable_useId:()=>N,unsupportedProp:()=>y,useControlled:()=>C,useEventCallback:()=>w.Z,useForkRef:()=>T.Z,useIsFocusVisible:()=>P.Z});var o=n(37078),i=n(36622);const r=function(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))};var s=n(58175);const l=function(e,t=166){let n;function o(...o){clearTimeout(n),n=setTimeout((()=>{e.apply(this,o)}),t)}return o.clear=()=>{clearTimeout(n)},o};const a=function(e,t){return()=>null};var u=n(67294),c=n.t(u,2);const d=function(e,t){return u.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function p(e){return e&&e.ownerDocument||document}const m=p;const h=function(e){return p(e).defaultView||window};n(87462);const f=function(e,t){return()=>null};const k=n(7960).Z;const g=n(16600).Z;let b=0;const v=c.useId;const N=function(e){if(void 0!==v){const t=v();return null!=e?e:t}return function(e){const[t,n]=u.useState(e),o=e||t;return u.useEffect((()=>{null==t&&(b+=1,n(`mui-${b}`))}),[t]),o}(e)};const y=function(e,t,n,o,i){return null};const C=function({controlled:e,default:t,name:n,state:o="value"}){const{current:i}=u.useRef(void 0!==e),[r,s]=u.useState(t);return[i?e:r,u.useCallback((e=>{i||s(e)}),[])]};var w=n(66875),T=n(78155),P=n(51625);const A={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),o.Z.configure(e)}}},72812:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>k,contentTitle:()=>h,default:()=>v,frontMatter:()=>m,metadata:()=>f,toc:()=>g});var o=n(3905),i=n(87961),r=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&d(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&d(e,n,t[n]);return e};const m={id:"configure-broker-onpremises",title:"Configure On-Premises Broker in the Cedalo MQTT Platform",sidebar_label:"Platform - Configure Broker"},h=void 0,f={unversionedId:"deployment/on-premises/configure-broker-onpremises",id:"version-3.1/deployment/on-premises/configure-broker-onpremises",title:"Configure On-Premises Broker in the Cedalo MQTT Platform",description:"After downloading and deploying a setup from your account at platform.cedalo.cloud,",source:"@site/mosquitto_versioned_docs/version-3.1/deployment/on-premises/configure-broker-onpremises.md",sourceDirName:"deployment/on-premises",slug:"/deployment/on-premises/configure-broker-onpremises",permalink:"/mosquitto/deployment/on-premises/configure-broker-onpremises",draft:!1,tags:[],version:"3.1",frontMatter:{id:"configure-broker-onpremises",title:"Configure On-Premises Broker in the Cedalo MQTT Platform",sidebar_label:"Platform - Configure Broker"},sidebar:"someSidebar",previous:{title:"Update Pro Mosquitto",permalink:"/mosquitto/deployment/on-premises/deployment/administrating/versions"},next:{title:"OS to Pro Mosquitto",permalink:"/mosquitto/deployment/on-premises/os-to-pro-migration"}},k={},g=[{value:"Add New Connection",id:"add-new-connection",level:2},{value:"Single Node",id:"single-node",level:3},{value:'Single Node Eclipse Mosquitto (OS) <SinceVersion3 version="3.1"></SinceVersion3>',id:"single-node-eclipse-mosquitto-os-",level:3},{value:"Cluster",id:"cluster",level:3},{value:"Add New Cluster",id:"add-new-cluster",level:4},{value:"Cluster Nodes",id:"cluster-nodes",level:5},{value:"Public Cluster Connection",id:"public-cluster-connection",level:5},{value:"Discover Existing Cluster",id:"discover-existing-cluster",level:4},{value:"Change Connection Details",id:"change-connection-details",level:2},{value:"Single Node",id:"single-node-1",level:3},{value:"Cluster",id:"cluster-1",level:3},{value:"Delete a Cluster",id:"delete-a-cluster",level:4},{value:"Change Cluster Nodes",id:"change-cluster-nodes",level:4},{value:"Add Node",id:"add-node",level:5},{value:"Remove Node",id:"remove-node",level:5}],b={toc:g};function v(e){var t,r=e,{components:d}=r,m=((e,t)=>{var n={};for(var o in e)u.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&a)for(var o of a(e))t.indexOf(o)<0&&c.call(e,o)&&(n[o]=e[o]);return n})(r,["components"]);return(0,o.kt)("wrapper",(t=p(p({},b),m),s(t,l({components:d,mdxType:"MDXLayout"}))),(0,o.kt)("p",null,"After downloading and deploying a setup from your account at ",(0,o.kt)("a",p({parentName:"p"},{href:"https://platform.cedalo.cloud"}),"platform.cedalo.cloud"),",\nevery on-premises platform installation includes a predefined connection to the Pro Mosquitto broker, which is part of\nthe setup. This applies to all versions, regardless of whether you have chosen the Business or Enterprise edition, or\nwhether the setup is a Single Node or Cluster version."),(0,o.kt)("h2",p({},{id:"add-new-connection"}),"Add New Connection"),(0,o.kt)("p",null,"A new connection to a broker can be established within each project you have defined. A user can own multiple projects\nand share these with other users. For more details, see ",(0,o.kt)("a",p({parentName:"p"},{href:"/mosquitto/project-account-management/project-management/project-general"}),"Project Management"),". If you wish to add\nadditional brokers or clusters to your platform, ensure you are using the Enterprise edition, as it is the only edition\ncapable of accessing the project level of the platform."),(0,o.kt)("p",null,"Within a project, you can add either a new single-node broker or a cluster. Choose one of the options below to start\ncreating a new connection."),(0,o.kt)("p",null,"Ensure that you use an admin user with sufficient permissions to manage the platform. It is recommended to use the\npredefined admin user for the Pro Mosquitto broker for this purpose. The default credentials for this user can be found\nin the Mosquitto folder of your setup."),(0,o.kt)("h3",p({},{id:"single-node"}),"Single Node"),(0,o.kt)("p",null,"Enter the connection details for your broker. You will need to provide the following information:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Name"),": A name used to reference the broker within the project."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"URL"),": The URL or IP address for the connection. Ensure you include the appropriate prefix, such\nas ",(0,o.kt)("inlineCode",{parentName:"li"},"mqtt://"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"mqtts://"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"ws://"),", or ",(0,o.kt)("inlineCode",{parentName:"li"},"wss://"),", before the URL."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Credentials"),": The username and password of an admin user with sufficient permissions."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Certificates"),": If required, add the server CA and/or client certificate for authentication to securely connect to\nyour broker.")),(0,o.kt)("img",{className:"docimagemb",src:n(20296).Z,width:"100%"}),(0,o.kt)("h3",p({},{id:"single-node-eclipse-mosquitto-os-"}),"Single Node Eclipse Mosquitto (OS) ",(0,o.kt)(i.Z,{version:"3.1",mdxType:"SinceVersion3"})),(0,o.kt)("p",null,"The open source version of Mosquitto can also be added to a project. First, you also have to enter the connection\ndetails like described above."),(0,o.kt)("p",null,"Please be aware of the following prerequisites:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"To be able to edit the clients, groups and roles, you will have to configure dynamic security for Eclipse Mosquitto.\nThis is described in detail ",(0,o.kt)("a",p({parentName:"li"},{href:"/mosquitto/security/mosquitto/dynamic-security"}),"here"),"."),(0,o.kt)("li",{parentName:"ul"},"Please also generate the default ",(0,o.kt)("inlineCode",{parentName:"li"},"dynamic-security.json")," file as described in the docs mentioned before or provide\nyour custom ",(0,o.kt)("inlineCode",{parentName:"li"},"dynamic-security.json")," including those rights. This assures\nthat the platform gets sufficient rights for features, provided by the open source version. If you do not grant those\nor similar rights, editing of clients, groups and roles will not be available. Also, depending on your dynamic\nsecurity settings, System Metrics cannot be retrieved and displayed."),(0,o.kt)("li",{parentName:"ul"},"There are required ACLs for UI Functionality\nTo ensure that the user interface (UI) has sufficient permissions to perform all necessary actions on the MQTT broker, the following Access Control Lists (ACLs) must be granted:")),(0,o.kt)("p",null,"Topic-Observe (",(0,o.kt)("inlineCode",{parentName:"p"},"#"),")"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"publishClientReceive")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"subscribePattern")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"unsubscribePattern"))),(0,o.kt)("p",null,"Sys-Topics (",(0,o.kt)("inlineCode",{parentName:"p"},"$SYS/#"),")"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"publishClientReceive")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"subscribePattern"))),(0,o.kt)("p",null,"Control-Topics (",(0,o.kt)("inlineCode",{parentName:"p"},"$CONTROL/#"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"$CONTROL/dynamic-security/#"),")"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"publishClientReceive")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"publishClientSend")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"subscribePattern")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"unsubscribePattern"))),(0,o.kt)("p",null,"The UI requires these ACLs to successfully publish, subscribe, and manage security-related actions on the broker. Without these permissions, some UI features or controls may not function as intended."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Some advanced features of the Cedalo MQTT Pro Broker will not be available. Therefore, some of the pages like"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Client Inspection"),(0,o.kt)("li",{parentName:"ul"},"Topic Tree"),(0,o.kt)("li",{parentName:"ul"},"API Tokens"),(0,o.kt)("li",{parentName:"ul"},"Certificates"),(0,o.kt)("li",{parentName:"ul"},"Streams"),(0,o.kt)("li",{parentName:"ul"},"Bridges"),(0,o.kt)("li",{parentName:"ul"},"Data Validation")),(0,o.kt)("p",{parentName:"li"},"will only display a hint, that these features are not available for Eclipse Mosquitto like below:"))),(0,o.kt)("img",{className:"docimagemb",src:n(9155).Z,width:"100%"}),(0,o.kt)("h3",p({},{id:"cluster"}),"Cluster"),(0,o.kt)("p",null,"A new cluster can be created, or the platform can discover an existing cluster."),(0,o.kt)("h4",p({},{id:"add-new-cluster"}),"Add New Cluster"),(0,o.kt)("p",null,"After clicking ",(0,o.kt)("strong",{parentName:"p"},'"Add Cluster"'),", the platform will prompt you to enter the details for the cluster you wish to create.\nBefore proceeding, ensure that your cluster nodes are configured and available as\noutlined ",(0,o.kt)("a",p({parentName:"p"},{href:"/mosquitto/clustering/overview-clusters"}),"here"),"."),(0,o.kt)("img",{className:"docimagemb",src:n(68138).Z,width:"100%"}),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Name"),": The name used to identify the cluster in the configuration. This name will also appear on the project\noverview page."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cluster Mode"),": Select the cluster ",(0,o.kt)("a",p({parentName:"li"},{href:"/mosquitto/clustering/overview-clusters"}),"mode")," to use."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cluster Nodes"),": Add the nodes to include in the cluster. Use the admin port connection (default: port 1885). A\nminimum of three nodes must be configured and accessible to create a cluster.")),(0,o.kt)("p",null,"Click ",(0,o.kt)("strong",{parentName:"p"},'"Create Cluster"')," to initiate the cluster. Once the cluster is created, you will be prompted to provide the\nfollowing:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Public Cluster Connection"),": Define the public connection the platform will use to connect to the cluster.")),(0,o.kt)("p",null,"After completing these steps, the cluster is ready to use. The platform will detect the current leader via the admin\nport connection and establish a connection to it. The leader serves as the primary source of truth for the platform and\nis responsible for displaying the content of the menus. In the background, the leader synchronizes all relevant\ninformation with its follower nodes to ensure consistency. If another node takes over the lead, the platform will detect\nit and display the changes in the UI."),(0,o.kt)("p",null,"Changes to the cluster are only possible as long as a functional cluster is detected (a majority of nodes is reachable)."),(0,o.kt)("img",{className:"docimagemb",src:n(87682).Z,width:"100%"}),(0,o.kt)("h5",p({},{id:"cluster-nodes"}),"Cluster Nodes"),(0,o.kt)("p",null,"To create a cluster, you must specify at least three nodes in the ",(0,o.kt)("strong",{parentName:"p"},"Cluster Nodes")," menu. Additional nodes can be added\nlater as long as the cluster remains functional (i.e., the majority of nodes are online)."),(0,o.kt)("p",null,"Connections defined here must use the admin port (default: 1885), as these connections allow the platform to administer\nnodes and communicate with them individually."),(0,o.kt)("h5",p({},{id:"public-cluster-connection"}),"Public Cluster Connection"),(0,o.kt)("p",null,'Enter the public connection details in this field. These details are used by the platform to display connection\ninformation via the connection tile and are also utilized by the "Publish & Subscribe" tool to connect to the broker.'),(0,o.kt)("p",null,"Use the public port instead of the admin port specified in the ",(0,o.kt)("strong",{parentName:"p"},"Cluster Nodes")," step. The public port is defined\nthrough the HAProxies and is the same port your connecting clients will use. Depending on your HAProxy configuration,\nyou may already be using a DNS instead of an IP address for this connection."),(0,o.kt)("h4",p({},{id:"discover-existing-cluster"}),"Discover Existing Cluster"),(0,o.kt)("p",null,"An existing cluster can be discovered by adding the admin port connection of one of its nodes. The platform will detect\nthat the node is already part of a cluster and will prompt you to import the cluster details. Click ",(0,o.kt)("strong",{parentName:"p"},'"Import"'),", and\nthe platform will prefill details for all nodes. Since connection details to the cluster are not saved on the cluster\nitself, the platform will suggest connection details for the detected nodes. Adjust these details if necessary."),(0,o.kt)("p",null,"Once all detected nodes are accessible, the cluster can be imported. To complete the configuration, you will need to\nenter the ",(0,o.kt)("strong",{parentName:"p"},"Public Cluster Connection")," details, as described earlier."),(0,o.kt)("img",{className:"docimagemb",src:n(68138).Z,width:"100%"}),(0,o.kt)("h2",p({},{id:"change-connection-details"}),"Change Connection Details"),(0,o.kt)("p",null,"To modify existing connection details, open the ",(0,o.kt)("strong",{parentName:"p"},'"Home"')," menu of your broker connection and click the edit button in\nthe top-right corner of the ",(0,o.kt)("strong",{parentName:"p"},'"Connection"')," tile. Here, you can update the connection details."),(0,o.kt)("h3",p({},{id:"single-node-1"}),"Single Node"),(0,o.kt)("p",null,"It is possible to compltly change the details fo a connection, which could also mean connecting a totally different\nbroker as before. Make sure to use an admin user. If you use a user without sufficient rights, the platform connection\nto the broker won\xb4t be able to work properly."),(0,o.kt)("h3",p({},{id:"cluster-1"}),"Cluster"),(0,o.kt)("p",null,"For clusters, an overview of the defined ",(0,o.kt)("strong",{parentName:"p"},"Public Cluster Connection")," and all connected ",(0,o.kt)("strong",{parentName:"p"},"Cluster Nodes")," will be\ndisplayed."),(0,o.kt)("h4",p({},{id:"delete-a-cluster"}),"Delete a Cluster"),(0,o.kt)("p",null,"To delete a cluster, select the delete action from the ",(0,o.kt)("strong",{parentName:"p"},"Public Cluster Connection")," section. This will remove the\ncluster from the platform and initiate its deletion on the individual nodes."),(0,o.kt)("h4",p({},{id:"change-cluster-nodes"}),"Change Cluster Nodes"),(0,o.kt)("h5",p({},{id:"add-node"}),"Add Node"),(0,o.kt)("p",null,"To add nodes, click ",(0,o.kt)("strong",{parentName:"p"},'"Add Node"')," and enter the admin port details to connect and include the node in the cluster."),(0,o.kt)("h5",p({},{id:"remove-node"}),"Remove Node"),(0,o.kt)("p",null,"Nodes can only be removed if the cluster contains more than three nodes. A minimum of three nodes is required for a\ncluster to remain functional."))}v.isMDXComponent=!0},87961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(67294),i=n(39082),r=n(2548);function s({version:e}){return e?o.createElement(i.Z,{sx:{margin:"0px 5px 5px 10px",bgcolor:"#FD602E"},color:"info",size:"small",icon:o.createElement(r.Z,{size:"small"}),label:`Version ${e}`}):o.createElement(o.Fragment,null)}},68138:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/ImportCluster-83117a5d8331fb3c56972ab798be43e2.png"},20296:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/AddSingleNode-de400ae26f02d08d0912dc3252f1d1d0.png"},87682:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/ClusterEditMenu-733f3c4ff808273be9b392bd0fd37496.png"},9155:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/os_warning-b816ada46e2883bcd944556b0686b2be.png"},64836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);