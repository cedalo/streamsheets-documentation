"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[48945],{83166:(e,n,t)=>{var i=t(64836);n.Z=void 0;var a=i(t(64938)),o=t(85893),r=(0,a.default)((0,o.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");n.Z=r},13328:(e,n,t)=>{var i=t(64836);n.Z=void 0;var a=i(t(64938)),o=t(85893),r=(0,a.default)((0,o.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}),"NewReleases");n.Z=r},64428:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>S,contentTitle:()=>g,default:()=>C,frontMatter:()=>c,metadata:()=>f,toc:()=>v});var i=t(3905),a=t(78901),o=t(49044),r=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,n,t)=>n in e?r(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,h=(e,n)=>{for(var t in n||(n={}))u.call(n,t)&&m(e,t,n[t]);if(d)for(var t of d(n))p.call(n,t)&&m(e,t,n[t]);return e};const c={id:"mc-sso",title:"Single Sign-On \u2b50"},g=void 0,f={unversionedId:"mc-sso",id:"version-2.5/mc-sso",title:"Single Sign-On \u2b50",description:"This page describes how to use the Single Sign-On Plugin that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto (MMC).",source:"@site/management-center_versioned_docs/version-2.5/saml-sso.md",sourceDirName:".",slug:"/mc-sso",permalink:"/management-center/mc-sso",draft:!1,tags:[],version:"2.5",frontMatter:{id:"mc-sso",title:"Single Sign-On \u2b50"},sidebar:"someSidebar",previous:{title:"HTTPS, TLS termination \u2b50",permalink:"/management-center/mc-https"},next:{title:"Authentication",permalink:"/management-center/mc-restapi"}},S={},v=[{value:"Single Sign-On Overview",id:"single-sign-on-overview",level:2},{value:"Enable SSO Plugin",id:"enable-sso-plugin",level:2},{value:"SSO Environmental variables",id:"sso-environmental-variables",level:2},{value:"Disabling SSO",id:"disabling-sso",level:2}],k={toc:v};function C(e){var n,t=e,{components:r}=t,m=((e,n)=>{var t={};for(var i in e)u.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&d)for(var i of d(e))n.indexOf(i)<0&&p.call(e,i)&&(t[i]=e[i]);return t})(t,["components"]);return(0,i.kt)("wrapper",(n=h(h({},k),m),l(n,s({components:r,mdxType:"MDXLayout"}))),(0,i.kt)(a.Z,{version:"2.5",mdxType:"SinceVersion"}),(0,i.kt)(o.Z,{mdxType:"PremiumFeature"}),(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)("p",null,"This page describes how to use the ",(0,i.kt)("strong",{parentName:"p"},"Single Sign-On Plugin")," that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto (MMC)."),(0,i.kt)("h2",h({},{id:"single-sign-on-overview"}),"Single Sign-On Overview"),(0,i.kt)("p",null,"Single Sign-On is a widely accepted authentication scheme that allows the login process in the Management Center to happen on the side of your identity provider of choice.\nThis allows your users to have only a single account for all of your internal systems, which boosts user experience and transfers the responsibility of handling user credentials to the identity provider, which is specifically designed to store user accounts data with the maximum possible security level."),(0,i.kt)("p",null,"Management Center currently supports a SAML-based SSO."),(0,i.kt)("admonition",h({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Mosquitto Management Center uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"mail")," field of the user object passed from the identity provider as a unique username for logging this user in. No more data for the user object from the Identity Provider is required.\nThis can, however, be changed if your requirements are different.")),(0,i.kt)("h2",h({},{id:"enable-sso-plugin"}),"Enable SSO Plugin"),(0,i.kt)("p",null,"To enable the plugin, you should make sure you are using Pro Edition of Mosquitto and that you have the User Management feature enabled in your license. Also, ensure that your config file (specified with ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default saved in ",(0,i.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry inside of the ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,i.kt)("pre",null,(0,i.kt)("code",h({parentName:"pre"},{className:"language-json"}),'    {\n      "name": "saml-sso"\n    }\n')),(0,i.kt)("p",null,"Also, you need to specify the following environmental variables for the SAML SSO configuration:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_USERNAME")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_ENTRY_POINT_URL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_LOGOUT_URL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_HOST_URL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_ISSUER")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_ISSUER")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CEDALO_MC_SSO_KEY_PATH"))),(0,i.kt)("p",null,"You can read more about these variables below."),(0,i.kt)("admonition",h({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"SSO plugin needs to have an initial admin user configured, using which you will be able to access the Management Center initially. You can configure this user using ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_USERNAME")," variable")),(0,i.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,i.kt)("inlineCode",{parentName:"p"},"saml-sso")," plugin is enabled and loaded into the console:"),(0,i.kt)("pre",null,(0,i.kt)("code",h({parentName:"pre"},{}),'Loaded plugin: "saml_sso" (Cedalo SAML SSO)\n')),(0,i.kt)("admonition",h({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"To use the users coming from the Identity Provider with the Management Center, you will need to populate the ",(0,i.kt)("inlineCode",{parentName:"p"},"users.json")," file with valid user objects that have ",(0,i.kt)("inlineCode",{parentName:"p"},"username")," filed equal to the mail field in your identity provider (this is the only field which is required). Meaning that you have to tell Mangement Center which users coming from your Identity Provider can access it. The populating can be done through the normal user creation process in the User Management tab or using the User Management REST API.")),(0,i.kt)("h2",h({},{id:"sso-environmental-variables"}),"SSO Environmental variables"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_USERNAME")," - As per default configuration this should be an email address of the user that exists in your Identity provider and will be used as an admin to initially access the Management Center."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_ENTRY_POINT_URL")," - Path to where the Service Provider should send the Login Request (URL used for logging in). You can get it from your Identity Provider."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_LOGOUT_URL")," - Path to where the Service Provider should send the Logout Request (in AzureAD, it's usually the same as the URL used for login, e. i. ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_ENTRY_POINT_URL"),")"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_HOST_URL")," - Host URL of the Service Provider (to what host should the Identity Provider redirect the Login Response)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_ISSUER")," - Issuer field in the Identity provider (Entity ID in AzureAD)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_SSO_KEY_PATH ")," - Required if you want to use client assertion flow. Path to key file (.pem). (In case of the AzureAD, it can be downloaded from the AzureAD SP metadata page)"),(0,i.kt)("h2",h({},{id:"disabling-sso"}),"Disabling SSO"),(0,i.kt)("admonition",h({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Note that SSO plugin does not work together with the base login plugin.")),(0,i.kt)("p",null,"If you want to disable SSO for some reason and enable base login, you will need to find the config file located in the path specified with ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default stored in ",(0,i.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json")," or if you are using rpm package: ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/opt/cedalo/management-center/config/config.json")," and manually delete ",(0,i.kt)("inlineCode",{parentName:"p"},"saml-sso")," entry under ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins"),"."))}C.isMDXComponent=!0},49044:(e,n,t)=>{t.d(n,{Z:()=>l});var i=t(67294),a=t(74889),o=t(62659),r=t(83166);function l({inline:e}){return i.createElement(a.Z,{sx:{margin:e?"0px 5px":"5px",height:e?"22px":void 0,color:"#ffffff",backgroundColor:o.Z[500]},size:"small",icon:i.createElement(r.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},78901:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(67294),a=t(74889),o=t(13328);function r({version:e}){return e?i.createElement(a.Z,{sx:{margin:"5px"},color:"info",size:"small",icon:i.createElement(o.Z,{size:"small"}),label:`${e}`}):i.createElement(i.Fragment,null)}}}]);