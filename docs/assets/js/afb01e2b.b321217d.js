"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[26537],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||a;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},39557:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>d,default:()=>y,frontMatter:()=>m,metadata:()=>h,toc:()=>k});var o=n(3905),r=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&p(e,n,t[n]);if(l)for(var n of l(t))c.call(t,n)&&p(e,n,t[n]);return e};const m={id:"onprem",title:"On premise Installation Guide Pro Mosquitto",sidebar_label:"On premise Installation"},d=void 0,h={unversionedId:"getting-started/onprem",id:"version-2.8/getting-started/onprem",title:"On premise Installation Guide Pro Mosquitto",description:"The following is a step-by-step tutorial to guide you through the installation process of Mosquitto Pro Docker.",source:"@site/mosquitto_versioned_docs/version-2.8/getting-started/onprem.md",sourceDirName:"getting-started",slug:"/getting-started/onprem",permalink:"/mosquitto/2.8/getting-started/onprem",draft:!1,tags:[],version:"2.8",frontMatter:{id:"onprem",title:"On premise Installation Guide Pro Mosquitto",sidebar_label:"On premise Installation"}},g={},k=[{value:"Install Docker Environment",id:"install-docker-environment",level:2},{value:"Log into the Cedalo registry",id:"log-into-the-cedalo-registry",level:2},{value:"Start the Pro Mosquitto Setup",id:"start-the-pro-mosquitto-setup",level:2},{value:"First steps Management Center",id:"first-steps-management-center",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Logs",id:"logs",level:3}],f={toc:k};function y(e){var t,r=e,{components:p}=r,m=((e,t)=>{var n={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&c.call(e,o)&&(n[o]=e[o]);return n})(r,["components"]);return(0,o.kt)("wrapper",(t=u(u({},f),m),a(t,i({components:p,mdxType:"MDXLayout"}))),(0,o.kt)("p",null,"The following is a step-by-step tutorial to guide you through the installation process of Mosquitto Pro Docker.\nThe tutorial assumes you have downloaded the Mosquitto Installer from us and have a valid license to work with. "),(0,o.kt)("h2",u({},{id:"install-docker-environment"}),"Install Docker Environment"),(0,o.kt)("p",null,"To run Cedalo products, you need an installed version of docker and docker compose.\nDocker is not system depended and can also be installed on Mac or Linux."),(0,o.kt)("p",null,"Open the following link and install ",(0,o.kt)("a",u({parentName:"p"},{href:"https://docs.docker.com/engine/install/"}),"Docker"),".\nIf you have not installed a version of docker desktop and only installed the docker engine, make sure to further install ",(0,o.kt)("a",u({parentName:"p"},{href:"https://docs.docker.com/compose/"}),"Docker Compose"),".  "),(0,o.kt)("img",{className:"docimagemb",src:n(73449).Z,width:"50%"}),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Figure 1 - Docker Desktop Installer")),(0,o.kt)("p",null,"Make sure your system meets the minimum requirements."),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"\u25cf 64 - bit processor with Second Level Address Translation (SLAT)\n\u25cf 4GB system RAM\n\u25cf BIOS-level hardware virtualization support must be enabled in the BIOS settings. The status can be\nchecked in your Task Manger:\n")),(0,o.kt)("admonition",u({},{type:"info"}),(0,o.kt)("p",{parentName:"admonition"},"If you choose Hyper-V make sure visualization is enabled. If Visualization is not enabled, you will have to turn it on in your BIOS.\nIf you don \u0301t know how: Here is a very good step-by-step ",(0,o.kt)("a",u({parentName:"p"},{href:"https://mashtips.com/enable-virtualization-windows-10/"}),"tutorial"),".")),(0,o.kt)("p",null,"After installing make sure docker is running.\nOn a typical installation the Docker daemon is started by a system utility, not manually by a user. This makes it easier to automatically start Docker when the machine reboots.\nThe command to start Docker depends on your operating system. Check the correct page under Install ",(0,o.kt)("a",u({parentName:"p"},{href:"https://docs.docker.com/engine/install/"}),"Docker"),"."),(0,o.kt)("p",null,"During the installation process, Docker requests from you that you set up an account with Docker. You need that\naccount mainly for the setup/install process of Docker, but later you will be provided by Cedalo with a\nseparate account to access the Cedalo registry."),(0,o.kt)("h2",u({},{id:"log-into-the-cedalo-registry"}),"Log into the Cedalo registry"),(0,o.kt)("p",null,"To get your local premium subscription running you need to use the docker login we provided.\nYou will not be able to pull the right images with your personal docker account."),(0,o.kt)("p",null,"After the docker installation you can use ",(0,o.kt)("em",{parentName:"p"},"docker login")," to log into docker.\n(",(0,o.kt)("a",u({parentName:"p"},{href:"https://docs.docker.com/engine/reference/commandline/login/"}),"https://docs.docker.com/engine/reference/commandline/login/"),")"),(0,o.kt)("p",null,"To login open your shell (e.g., cmd.exe under Windows) and enter following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker login registry.cedalo.com -u [username provided by us] -p [password provided by us]\n")),(0,o.kt)("p",null,"You should receive a message that the login succeeded, otherwise please let us know under\n",(0,o.kt)("a",u({parentName:"p"},{href:"mailto:getting.started@cedalo.com"}),"getting.started@cedalo.com")),(0,o.kt)("admonition",u({},{type:"info"}),(0,o.kt)("p",{parentName:"admonition"}," If you are using Docker Desktop, logging in via the UI is ",(0,o.kt)("strong",{parentName:"p"},"not possible"),". Please use the command line login.")),(0,o.kt)("h2",u({},{id:"start-the-pro-mosquitto-setup"}),"Start the Pro Mosquitto Setup"),(0,o.kt)("p",null,'Download the shared setup via the given link we provided you in the e-mail.\nEnter your Mosquitto and Management Center premium license in ../management-center/config, named "license.lic". The name of the file must be \u201clicense.lic\u201d.'),(0,o.kt)("p",null,"To install Mosquitto Pro and the Management Center, make sure to navigate into the folder named after your operating system. Use a terminal to open that folder.\nThe setup may simply be started using:"),(0,o.kt)("p",null,"Linux/Mac:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"./start.sh up -d\n")),(0,o.kt)("p",null,"Windows:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),".\\start.bat up -d\n")),(0,o.kt)("p",null,"To access the logs use the follwoing command in the root folder: "),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker-compose logs\n")),(0,o.kt)("p",null,"The installation will create a docker environment for Mosquitto Pro, consisting of two containers: one for Mosquitto and another for the Management Center."),(0,o.kt)("p",null,"By default, the test setup will only be reachable on localhost as the MQTT Port 1883 (from the HAProxy) and the MMC HTTP Port 8088 will only be bound to localhost. If you need the setup to be reachable from the outside please adapt the port rules in the docker-compose.yml file accordingly."),(0,o.kt)("admonition",u({},{type:"info"}),(0,o.kt)("p",{parentName:"admonition"},"In-between Docker Desktop can warn you about file-sharing. File-sharing is intended by Cedalo. The Docker container would otherwise not be able to access certain files from the platform configuration that are stored in a regular Windows folder. Make sure to allow this access.")),(0,o.kt)("h2",u({},{id:"first-steps-management-center"}),"First steps Management Center"),(0,o.kt)("p",null,"Open the Management Center via: ",(0,o.kt)("a",u({parentName:"p"},{href:"http://localhost:8088/"}),"http://localhost:8088/"),"\nThe root credentials are the following and can be changed in the ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"username: cedalo\nPassword: mmcisawesome\n")),(0,o.kt)("p",null,"Further users can be configured in the Management Center (User Management Menu). "),(0,o.kt)("img",{className:"docimagemb",src:n(36079).Z,width:"50%"}),(0,o.kt)("p",null,"To access Mosquitto create a new client in the Management Center and assign a client role.\nIf you want, choose the client role \u201cclient\u201d, to assign full rights to publish and subscribe."),(0,o.kt)("p",null,"Connect to your Mosquitto instance via ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost:1883"),"."),(0,o.kt)("h2",u({},{id:"configuration"}),"Configuration"),(0,o.kt)("p",null,"The configuration of the entire setup is managed through multiple files. Here are the details of each file:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"docker-compose.yml: This file controls various settings related to the docker environment. It manages configurations such as port mappings and environment variables.")),(0,o.kt)("img",{className:"docimagemb",src:n(57067).Z,width:"50%"}),(0,o.kt)("p",null,"Additionally, there are other configuration files:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"mosquitto.conf: This file is located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"\\mosquitto\\config")," directory. It contains specific configurations for the Mosquitto component.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"config.json: This file is located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"\\management-center\\config")," directory. It contains configurations specific to the Management Center component."))),(0,o.kt)("p",null,"These files play a crucial role in customizing and fine-tuning the settings of the entire system."),(0,o.kt)("h3",u({},{id:"logs"}),"Logs"),(0,o.kt)("p",null,"Docker Compose logs provide valuable information about the status and behavior of containers running in a Docker Compose environment. "),(0,o.kt)("p",null,"To access Docker Compose logs for a Mosquitto MQTT Broker service, follow these steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Open a terminal or command prompt.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Navigate to the directory containing your ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"docker-compose logs\n")),(0,o.kt)("p",{parentName:"li"},"For all logs. "),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",u({parentName:"pre"},{className:"language-bash"}),"docker-compose logs <service_name>\n")),(0,o.kt)("p",{parentName:"li"},"Replace ",(0,o.kt)("inlineCode",{parentName:"p"},"<service_name>")," with the actual name of your service as defined in your ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file to only access a specific service. "))),(0,o.kt)("p",null,"Mosquitto supports multiple log level to provide different levels of details for logs. To change the log level for the Mosquitto, update the ",(0,o.kt)("inlineCode",{parentName:"p"},"mosquitto.conf")," file.\nSet the ",(0,o.kt)("inlineCode",{parentName:"p"},"log_type"),' to "all" to get access to the full log. Restart Mosquitto to apply changes. '),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"```conf\nlog_type all\n```\n")))}y.isMDXComponent=!0},57067:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/docker-compose_mmcpw-3b878b34071ebad1dba6eca2f60e6599.png"},73449:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/dockerdesktop-848606ac0f247d7a1b3412ab7f9bc01b.png"},36079:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/mmcclient-9e32dd3e1bdf2a7b6031336fdc6dc743.png"}}]);