"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[6010],{83166:(e,n,t)=>{var i=t(64836);n.Z=void 0;var o=i(t(64938)),r=t(85893),a=(0,o.default)((0,r.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");n.Z=a},67205:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>h,default:()=>T,frontMatter:()=>u,metadata:()=>b,toc:()=>v});var i=t(3905),o=t(49044),r=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,n,t)=>n in e?r(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,d=(e,n)=>{for(var t in n||(n={}))m.call(n,t)&&l(e,t,n[t]);if(p)for(var t of p(n))c.call(n,t)&&l(e,t,n[t]);return e};const u={id:"mc-topic-tree-rest-api",title:"Topic Tree REST API"},h=void 0,b={unversionedId:"mc-topic-tree-rest-api",id:"version-2.5/mc-topic-tree-rest-api",title:"Topic Tree REST API",description:"This page describes how to use the Topic Tree REST API that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto (MMC).",source:"@site/management-center_versioned_docs/version-2.5/topic-tree-rest-api.md",sourceDirName:".",slug:"/mc-topic-tree-rest-api",permalink:"/management-center/mc-topic-tree-rest-api",draft:!1,tags:[],version:"2.5",frontMatter:{id:"mc-topic-tree-rest-api",title:"Topic Tree REST API"},sidebar:"someSidebar",previous:{title:"Topic Tree",permalink:"/management-center/mc-topic-tree"},next:{title:"Eclipse Streamsheets",permalink:"/management-center/mc-streamsheets"}},k={},v=[{value:"Enable Topic Tree REST API",id:"enable-topic-tree-rest-api",level:2},{value:"Topic Tree REST API",id:"topic-tree-rest-api",level:2}],f={toc:v};function T(e){var n,t=e,{components:r}=t,l=((e,n)=>{var t={};for(var i in e)m.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&p)for(var i of p(e))n.indexOf(i)<0&&c.call(e,i)&&(t[i]=e[i]);return t})(t,["components"]);return(0,i.kt)("wrapper",(n=d(d({},f),l),a(n,s({components:r,mdxType:"MDXLayout"}))),(0,i.kt)(o.Z,{mdxType:"PremiumFeature"}),(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)("p",null,"This page describes how to use the ",(0,i.kt)("strong",{parentName:"p"},"Topic Tree REST API")," that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto (MMC)."),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Before sending a command request, make sure that you have been authenticated.")),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Application Tokens REST API can be accessed by a user with any role.")),(0,i.kt)("h2",d({},{id:"enable-topic-tree-rest-api"}),"Enable Topic Tree REST API"),(0,i.kt)("p",null,"To enable the Topic Tree REST API, make sure you are using the Pro Edition of Mosquitto and that you have the feature enabled in your license. Also, ensure that your config file (specified with ",(0,i.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default saved in ",(0,i.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry inside of the ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,i.kt)("pre",null,(0,i.kt)("code",d({parentName:"pre"},{}),'    {\n      "name": "system-status-rest-api"\n    }\n')),(0,i.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,i.kt)("inlineCode",{parentName:"p"},"system-status-rest-api")," plugin is enabled and loaded into the console:"),(0,i.kt)("pre",null,(0,i.kt)("code",d({parentName:"pre"},{}),'Loaded plugin: "cedalo_topictree_rest_api" (Cedalo Topic Tree REST API)\n')),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"Without enabling the Topic Tree REST API, you won't be able to clear the topic tree using the button in the Web UI.")),(0,i.kt)("h2",d({},{id:"topic-tree-rest-api"}),"Topic Tree REST API"),(0,i.kt)("p",null,"There are a few operations provided by the REST API for the Topic Tree:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GET /api/system/status")," - get topic tree for all the brokers")),(0,i.kt)("p",null,"Example of the reply:"),(0,i.kt)("pre",null,(0,i.kt)("code",d({parentName:"pre"},{className:"language-json"}),'{\n    "development-inspect": {\n        "_name": "development-inspect",\n        "$SYS": {\n            "broker": {\n                "version": "mosquitto version 2.5.3",\n                "uptime": "845837 seconds",\n                "clients": {\n                    "total": "3",\n                    "maximum": "5",\n                    "inactive": "0",\n                    "disconnected": "0",\n                    "active": "3",\n                    "connected": "3",\n                    "expired": "0"\n                },\n                "load": {\n                    "messages": {\n                        "received": {\n                            "1min": "10.64",\n                            "5min": "9.88",\n                            "15min": "9.05"\n                        },\n                        "sent": {\n                            "1min": "87.69",\n                            "5min": "85.96",\n                            "15min": "83.45"\n                        }\n                    },\n                    "publish": {\n                        "dropped": {\n                            "1min": "0.06",\n                            "5min": "0.20",\n                            "15min": "0.07"\n                        },\n                        "received": {\n                            "1min": "2.30",\n                            "5min": "1.89",\n                            "15min": "1.09"\n                        },\n                        "sent": {\n                            "1min": "66.31",\n                            "5min": "65.20",\n                            "15min": "63.03"\n                        }\n                    },\n                    "bytes": {\n                        "received": {\n                            "1min": "375.80",\n                            "5min": "312.36",\n                            "15min": "186.36"\n                        },\n                        "sent": {\n                            "1min": "16023.22",\n                            "5min": "13589.75",\n                            "15min": "8413.80"\n                        }\n                    },\n                    "sockets": {\n                        "1min": "59.56",\n                        "5min": "59.61",\n                        "15min": "59.63"\n                    },\n                    "connections": {\n                        "1min": "0.06",\n                        "5min": "0.20",\n                        "15min": "0.07"\n                    }\n                },\n                "messages": {\n                    "stored": "53",\n                    "received": "113774",\n                    "sent": "3932194"\n                },\n                "store": {\n                    "messages": {\n                        "count": "53",\n                        "bytes": "243"\n                    }\n                },\n                "subscriptions": {\n                    "count": "9"\n                },\n                "shared_subscriptions": {\n                    "count": "0"\n                },\n                "retained messages": {\n                    "count": "53"\n                },\n                "publish": {\n                    "messages": {\n                        "dropped": "0",\n                        "received": "88",\n                        "sent": "3818516"\n                    },\n                    "bytes": {\n                        "received": "10896",\n                        "sent": "23398338"\n                    }\n                },\n                "bytes": {\n                    "received": "251821",\n                    "sent": "161467952"\n                },\n                "packet": {\n                    "out": {\n                        "count": "0",\n                        "bytes": "0"\n                    }\n                }\n            }\n        }\n    },\n    "Rocky": {\n        "_name": "Rocky",\n        "$SYS": {\n            "broker": {\n                "version": "mosquitto version 2.5.3",\n                "uptime": "2492699 seconds",\n                "clients": {\n                    "total": "2",\n                    "maximum": "4",\n                    "inactive": "0",\n                    "disconnected": "0",\n                    "active": "2",\n                    "connected": "2",\n                    "expired": "0"\n                },\n                "load": {\n                    "messages": {\n                        "received": {\n                            "1min": "357.11",\n                            "5min": "355.98",\n                            "15min": "355.44"\n                        },\n                        "sent": {\n                            "1min": "452.61",\n                            "5min": "445.40",\n                            "15min": "447.64"\n                        }\n                    },\n                    "publish": {\n                        "dropped": {\n                            "1min": "0.06",\n                            "5min": "0.20",\n                            "15min": "0.07"\n                        },\n                        "received": {\n                            "1min": "4.41",\n                            "5min": "2.30",\n                            "15min": "1.39"\n                        },\n                        "sent": {\n                            "1min": "86.96",\n                            "5min": "79.24",\n                            "15min": "80.44"\n                        }\n                    },\n                    "bytes": {\n                        "received": {\n                            "1min": "20727.48",\n                            "5min": "20421.88",\n                            "15min": "20282.91"\n                        },\n                        "sent": {\n                            "1min": "19602.97",\n                            "5min": "11757.44",\n                            "15min": "8441.63"\n                        }\n                    },\n                    "sockets": {\n                        "1min": "351.40",\n                        "5min": "351.86",\n                        "15min": "351.95"\n                    },\n                    "connections": {\n                        "1min": "351.50",\n                        "5min": "351.89",\n                        "15min": "351.95"\n                    }\n                },\n                "messages": {\n                    "stored": "55",\n                    "received": "14686273",\n                    "sent": "31556220"\n                },\n                "store": {\n                    "messages": {\n                        "count": "55",\n                        "bytes": "321"\n                    }\n                },\n                "subscriptions": {\n                    "count": "12"\n                },\n                "shared_subscriptions": {\n                    "count": "0"\n                },\n                "retained messages": {\n                    "count": "55"\n                },\n                "heap": {\n                    "current": "18446744073706414976",\n                    "maximum": "18446744073709551568"\n                },\n                "publish": {\n                    "messages": {\n                        "dropped": "0",\n                        "received": "26662",\n                        "sent": "16896853"\n                    },\n                    "bytes": {\n                        "received": "3514369",\n                        "sent": "141759469"\n                    }\n                },\n                "bytes": {\n                    "received": "834848274",\n                    "sent": "809201999"\n                },\n                "packet": {\n                    "out": {\n                        "count": "0",\n                        "bytes": "0"\n                    }\n                }\n            }\n        }\n    },\n    ...\n}\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"DELETE /api")," - delete topic tree")),(0,i.kt)("p",null,"Response: 200 or error status code with a ",(0,i.kt)("inlineCode",{parentName:"p"},"text/plain")," "),(0,i.kt)("p",null,"If you try to get the topic tree (",(0,i.kt)("inlineCode",{parentName:"p"},"GET /api/system/status"),") after you deleted and disabled it, you will see the following reply:"),(0,i.kt)("admonition",d({},{type:"info"}),(0,i.kt)("p",{parentName:"admonition"},"You can disable (stop) the topic tree on the settings page of the Web UI of the Management Center")))}T.isMDXComponent=!0},49044:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(67294),o=t(39082),r=t(62659),a=t(83166);function s({inline:e}){return i.createElement(o.Z,{sx:{margin:e?"0px 5px":"5px",height:e?"22px":void 0,color:"#ffffff",backgroundColor:r.Z[500]},size:"small",icon:i.createElement(a.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}}}]);