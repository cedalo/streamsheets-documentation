"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[40592],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,h=m["".concat(c,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(h,i(i({ref:t},l),{},{components:n})):r.createElement(h,i({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},14510:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return l},default:function(){return m}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),i=["components"],s={id:"tut-opcuareq",title:"OPC UA connection to a server",sidebar_label:"OPC UA connection"},c=void 0,u={unversionedId:"tutorials/tut-opcuareq",id:"tutorials/tut-opcuareq",title:"OPC UA connection to a server",description:"star This is a premium feature.",source:"@site/streamsheets/tutorials/tut-opcuareq.md",sourceDirName:"tutorials",slug:"/tutorials/tut-opcuareq",permalink:"/streamsheets/next/tutorials/tut-opcuareq",tags:[],version:"current",frontMatter:{id:"tut-opcuareq",title:"OPC UA connection to a server",sidebar_label:"OPC UA connection"},sidebar:"someSidebar",previous:{title:"MongoDB",permalink:"/streamsheets/next/tutorials/tut-mongodb"},next:{title:"Http Requests",permalink:"/streamsheets/next/tutorials/tut-httpreq"}},l=[{value:"Receive OPC UA values",id:"receive-opc-ua-values",children:[],level:3},{value:"Transmit OPC UA values",id:"transmit-opc-ua-values",children:[],level:3}],p={toc:l};function m(e){var t=e.components,s=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"star",src:n(78397).Z,width:"24",height:"24"})," This is a ",(0,o.kt)("a",{parentName:"p",href:"https://cedalo.com/get-started-with-cedalo-real-time-platform/"},"premium")," feature."),(0,o.kt)("p",null,'This simple Tutorial shows how to read information about an OPC UA\nServer. To begin with, we have to set up a connection to the OPC UA Server of our choice.\nOpen up the "Connection Menu" of your App and select OPC UA. Enter your connection details.\nIf this is set up, we can proceed to start gathering information. '),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can find an example OPC UA server at ",(0,o.kt)("a",{parentName:"p",href:"http://opcuaserver.com/"},"http://opcuaserver.com/"),".\nTo connect to the Streamsheets internal OPC UA server, use\n",(0,o.kt)("em",{parentName:"p"},"stream sheets-service-occur")," as hostname and\n",(0,o.kt)("em",{parentName:"p"},"API/v1.0/OPCUA/cedalo/machine server")," as the resource path. Make sure the server is set up."))),(0,o.kt)("h3",{id:"receive-opc-ua-values"},"Receive OPC UA values"),(0,o.kt)("p",null,"There are multiple ways to access OPC UA data. Configure an Inbox to poll data in a set interval directly, or use a function in your sheet to trigger a single request to the OPC UA server. "),(0,o.kt)("p",null,'Both approaches will need the specific node ids of your OPC UA parameter. These consist of a namespace indicator and the parameter id. (e.g. ns=2; s="Parameter").\n',(0,o.kt)("em",{parentName:"p"},"We are working on a feature to directly scan and access existing OPC UA nodes through Streamsheets. Until then, it is necessary to detect the node ids by hand.\nA good tool to identify nodes could be the ",(0,o.kt)("a",{parentName:"em",href:"https://downloads.prosysopc.com/opc-ua-client-downloads.php"},"Prosys OPC UA Client")," or ",(0,o.kt)("a",{parentName:"em",href:"https://www.unified-automation.com/de/downloads/opc-ua-clients.html"},"UAexpert"),". You can also use a browser client: ",(0,o.kt)("a",{parentName:"em",href:"https://www.uaclient.com/"},"https://www.uaclient.com/")," ")),(0,o.kt)("p",null,"![OPCUACOnnection]"," (../_images/Link.png)"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Example Connection")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Via Inbox:")," In your OPC UA connection switch to the tab. Enter the node id(s) you are interested in and select the target inbox.\nIn a running App, the iNbox will collect the messages in the entered interval. "),(0,o.kt)("p",null,"![OPCUAConnectionnodeid]"," ()../_images/Link.png)"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Example Inbox connection")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"OPCUA.READ():")," The second way to request data from an OPC UA server is via ",(0,o.kt)("a",{parentName:"p",href:"../functions/streams/occurred"},"OPCUA.READ"),".\nEnter the function in a cell and reference the above-created connection.\nEnter the Node ID and the Target (e.g. ","[INBOX]","(../functions/stream sheet/inbox))."),(0,o.kt)("p",null," ","![READPayload]"," (../_images/Link.png)"),(0,o.kt)("p",null,"Every new calculation step now triggers ",(0,o.kt)("a",{parentName:"p",href:"../functions/streams/occurred"},"OPCUA.READ")," and therefore a request to the OPC UA server. It will display the function in the assigned Target as soon as the response arrives."),(0,o.kt)("h3",{id:"transmit-opc-ua-values"},"Transmit OPC UA values"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"OPCUA.WRITE:")," It is also possible to update existing OPC UA Variables\nwith the OPCUA.WRITE formula. Similar to before, create the ",(0,o.kt)("a",{parentName:"p",href:"../functions/streams/opcuawrite"},"OPCUA.WRITE")," function, select your connection, add the node\nid range and target."),(0,o.kt)("p",null," ","![WritePayload]"," (../_images/Link.png)"),(0,o.kt)("p",null," The Node Value Range has to consist of two key-value pairs.\nThe value is written on the node id and the data type is used."))}m.isMDXComponent=!0},78397:function(e,t){t.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTExLjk5IDJDNi40NyAyIDIgNi40OCAyIDEyczQuNDcgMTAgOS45OSAxMEMxNy41MiAyMiAyMiAxNy41MiAyMiAxMlMxNy41MiAyIDExLjk5IDJ6bTQuMjQgMTZMMTIgMTUuNDUgNy43NyAxOGwxLjEyLTQuODEtMy43My0zLjIzIDQuOTItLjQyTDEyIDVsMS45MiA0LjUzIDQuOTIuNDItMy43MyAzLjIzTDE2LjIzIDE4eiIvPjwvc3ZnPg=="}}]);