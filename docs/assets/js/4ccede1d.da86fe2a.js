(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[76284],{83166:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var o=a(n(64938)),r=n(85893),i=(0,o.default)((0,r.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=i},2548:(e,t,n)=>{"use strict";var a=n(64836);t.Z=void 0;var o=a(n(64938)),r=n(85893),i=(0,o.default)((0,r.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");t.Z=i},64938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=n(22236)},22236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>o.Z,createChainedFunction:()=>r,createSvgIcon:()=>i.Z,debounce:()=>l,deprecatedPropType:()=>s,isMuiElement:()=>c,ownerDocument:()=>m,ownerWindow:()=>g,requirePropFactory:()=>f,setRef:()=>h,unstable_ClassNameGenerator:()=>O,unstable_useEnhancedEffect:()=>b,unstable_useId:()=>N,unsupportedProp:()=>C,useControlled:()=>x,useEventCallback:()=>T.Z,useForkRef:()=>y.Z,useIsFocusVisible:()=>w.Z});var a=n(37078),o=n(36622);const r=function(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))};var i=n(58175);const l=function(e,t=166){let n;function a(...a){clearTimeout(n),n=setTimeout((()=>{e.apply(this,a)}),t)}return a.clear=()=>{clearTimeout(n)},a};const s=function(e,t){return()=>null};var d=n(67294),u=n.t(d,2);const c=function(e,t){return d.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function p(e){return e&&e.ownerDocument||document}const m=p;const g=function(e){return p(e).defaultView||window};n(87462);const f=function(e,t){return()=>null};const h=n(7960).Z;const b=n(16600).Z;let k=0;const v=u.useId;const N=function(e){if(void 0!==v){const t=v();return null!=e?e:t}return function(e){const[t,n]=d.useState(e),a=e||t;return d.useEffect((()=>{null==t&&(k+=1,n(`mui-${k}`))}),[t]),a}(e)};const C=function(e,t,n,a,o){return null};const x=function({controlled:e,default:t,name:n,state:a="value"}){const{current:o}=d.useRef(void 0!==e),[r,i]=d.useState(t);return[o?e:r,d.useCallback((e=>{o||i(e)}),[])]};var T=n(66875),y=n(78155),w=n(51625);const O={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),a.Z.configure(e)}}},33796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>b,contentTitle:()=>f,default:()=>N,frontMatter:()=>g,metadata:()=>h,toc:()=>k});var a=n(3905),o=n(49044),r=n(87961),i=Object.defineProperty,l=Object.defineProperties,s=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(d)for(var n of d(t))c.call(t,n)&&p(e,n,t[n]);return e};const g={id:"mqttapi-bridges-index",title:"MQTT Control API for Bridges",sidebar_label:"Bridges"},f=void 0,h={unversionedId:"api/mqttapis/mqttapi-bridges-index",id:"version-3.1/api/mqttapis/mqttapi-bridges-index",title:"MQTT Control API for Bridges",description:"The below mentioned plugins provide a MQTT Control API that, among others, allows to change their configuration without the need to change the config file by hand or to restart the broker afterwards. Furthermore, the configuration gets synchronized across nodes when you have set up a clusterized environment.",source:"@site/mosquitto_versioned_docs/version-3.1/api/mqttapis/mqttapi-bridges-index.md",sourceDirName:"api/mqttapis",slug:"/api/mqttapis/mqttapi-bridges-index",permalink:"/mosquitto/api/mqttapis/mqttapi-bridges-index",draft:!1,tags:[],version:"3.1",frontMatter:{id:"mqttapi-bridges-index",title:"MQTT Control API for Bridges",sidebar_label:"Bridges"},sidebar:"someSidebar",previous:{title:"MQTT API Overview",permalink:"/mosquitto/api/api-overview"},next:{title:"Azure Bridge",permalink:"/mosquitto/api/mqttapis/azure-bridge"}},b={},k=[{value:"MQTT control topic",id:"mqtt-control-topic",level:2},{value:"getConfig",id:"getconfig",level:3},{value:"updateConfig",id:"updateconfig",level:3},{value:"getSchema",id:"getschema",level:3}],v={toc:k};function N(e){var t,n=e,{components:i}=n,p=((e,t)=>{var n={};for(var a in e)u.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&d)for(var a of d(e))t.indexOf(a)<0&&c.call(e,a)&&(n[a]=e[a]);return n})(n,["components"]);return(0,a.kt)("wrapper",(t=m(m({},v),p),l(t,s({components:i,mdxType:"MDXLayout"}))),(0,a.kt)(o.Z,{mdxType:"PremiumFeature"}),(0,a.kt)(r.Z,{version:"3.1",mdxType:"SinceVersion3"}),(0,a.kt)("p",null,"The below mentioned plugins provide a MQTT Control API that, among others, allows to change their configuration without the need to change the config file by hand or to restart the broker afterwards. Furthermore, the configuration gets synchronized across nodes when you have set up a clusterized environment."),(0,a.kt)("h2",m({},{id:"mqtt-control-topic"}),"MQTT control topic"),(0,a.kt)("p",null,"The plugins can be controlled by sending command messages to a topic. Responses are also published to the topic followed by ",(0,a.kt)("inlineCode",{parentName:"p"},"/response"),".\nThe topic depends on the bridge, you are trying to configure or request information about:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",m({parentName:"tr"},{align:null}),"Bridge"),(0,a.kt)("th",m({parentName:"tr"},{align:null}),"Topic"),(0,a.kt)("th",m({parentName:"tr"},{align:null}),"Response Topic"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",m({parentName:"tr"},{align:null}),"Azure Bridge"),(0,a.kt)("td",m({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"$CONTROL/cedalo/azure-eventhubs-bridge/v1")),(0,a.kt)("td",m({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"$CONTROL/cedalo/azure-eventhubs-bridge/v1/response"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",m({parentName:"tr"},{align:null}),"Influx DB Bridge"),(0,a.kt)("td",m({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"$CONTROL/cedalo/influxdb-bridge/v1")),(0,a.kt)("td",m({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"$CONTROL/cedalo/influx-db/v1/response"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",m({parentName:"tr"},{align:null}),"MongoDB Bridge"),(0,a.kt)("td",m({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"$CONTROL/cedalo/mongodb-bridge/v1")),(0,a.kt)("td",m({parentName:"tr"},{align:null}),(0,a.kt)("inlineCode",{parentName:"td"},"$CONTROL/cedalo/mongo-db/v1/response"))))),(0,a.kt)("p",null,"The following commands are currently available:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"getSchema")," to get the schema used to validate the JSON config"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"getConfig")," to fetch current config as a JSON object"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"updateConfig")," to update the complete configuration of the respective bridge"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"getStatus")," to fetch information about current bridge status")),(0,a.kt)("p",null,"Each control message has the following format:"),(0,a.kt)("pre",null,(0,a.kt)("code",m({parentName:"pre"},{className:"language-json"}),'{\n    "commands": [\n        {\n            "command": <A known control api command>,\n            "correlationData": <Optional UUID to identify sender. If specified it is passed with response.>,\n            "configChange": <Valid config JSON object>\n        }\n    ]\n}\n')),(0,a.kt)("h3",m({},{id:"getconfig"}),"getConfig"),(0,a.kt)("p",null,"For example to fetch the current config send a ",(0,a.kt)("inlineCode",{parentName:"p"},"getConfig")," command:"),(0,a.kt)("pre",null,(0,a.kt)("code",m({parentName:"pre"},{className:"language-json"}),'{\n    "commands": [\n        {\n            "command": "getConfig",\n            "correlationData": "1234"\n        }\n    ]\n}\n')),(0,a.kt)("p",null,"The response depends on the type of bridge."),(0,a.kt)("h3",m({},{id:"updateconfig"}),"updateConfig"),(0,a.kt)("p",null,"In order to update a bridge's configuration use the ",(0,a.kt)("inlineCode",{parentName:"p"},"updateConfig")," command. The content of the ",(0,a.kt)("inlineCode",{parentName:"p"},"configChange")," field depends on the bridge, you are trying to configure and is explained in detail in the specific bridge documentation ",(0,a.kt)("a",m({parentName:"p"},{href:"../../bridges/bridges-index"}),"Bridges Section"),". The following example presents a MQTT message payload that updates the config of the Azure EventHubs Bridge:"),(0,a.kt)("pre",null,(0,a.kt)("code",m({parentName:"pre"},{className:"language-json"}),'{\n    "commands": [\n        {\n            "command": "updateConfig",\n            "correlationData": "12345",\n            "configChange": {\n                "eventhubs": [\n                    {\n                        "name": "EvHub1",\n                        "auth": {\n                            "sas": {\n                                "key": "A_SAS_Key_Token"\n                            }\n                        }\n                    }\n                ],\n                "producers": [\n                    {\n                        "name": "P1",\n                        "hub": "hub1",\n                        "eventhub": "EvHub1",\n                        "options": {\n                            "messageId": "{NOW_ISO}"\n                        }\n                    }\n                ],\n                "topicMappings": [\n                    {\n                        "source": "test/topic",\n                        "target": "P1"\n                    }\n                ]\n            }\n        }\n    ]\n}\n')),(0,a.kt)("h3",m({},{id:"getschema"}),"getSchema"),(0,a.kt)("p",null,"Example of ",(0,a.kt)("inlineCode",{parentName:"p"},"getSchema"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",m({parentName:"pre"},{className:"language-json"}),'{\n    "commands": [\n        {\n            "command": "getSchema",\n            "correlationData": "1234"\n        }\n    ]\n}\n')),(0,a.kt)("p",null,"The response depends on the type of bridge and is explained in detail in the specific bridge documentation ",(0,a.kt)("a",m({parentName:"p"},{href:"../../bridges/bridges-index"}),"Bridges Section")),(0,a.kt)("p",null,"Example of ",(0,a.kt)("inlineCode",{parentName:"p"},"getStatus"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",m({parentName:"pre"},{className:"language-json"}),'{\n    "commands": [\n        {\n            "command": "getStatus",\n            "correlationData": "1234"\n        }\n    ]\n}\n')),(0,a.kt)("p",null,"The response depends on the type of bridge and is explained in detail in the specific bridge documentation ",(0,a.kt)("a",m({parentName:"p"},{href:"../../bridges/bridges-index"}),"Bridges Section")))}N.isMDXComponent=!0},49044:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(67294),o=n(39082),r=n(62659),i=n(83166);function l({inline:e}){return a.createElement(o.Z,{sx:{margin:e?"0px 5px":"0px 5px 5px 10px",height:e?"22px":void 0,color:"#ffffff",backgroundColor:r.Z[500]},size:"small",icon:a.createElement(i.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},87961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(67294),o=n(39082),r=n(2548);function i({version:e}){return e?a.createElement(o.Z,{sx:{margin:"0px 5px 5px 10px",bgcolor:"#FD602E"},color:"info",size:"small",icon:a.createElement(r.Z,{size:"small"}),label:`Version ${e}`}):a.createElement(a.Fragment,null)}},64836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);