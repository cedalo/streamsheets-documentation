"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[37976],{83166:(e,t,n)=>{var a=n(64836);t.Z=void 0;var o=a(n(64938)),i=n(85893),s=(0,o.default)((0,i.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=s},13328:(e,t,n)=>{var a=n(64836);t.Z=void 0;var o=a(n(64938)),i=n(85893),s=(0,o.default)((0,i.jsx)("path",{d:"m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}),"NewReleases");t.Z=s},53124:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>f,contentTitle:()=>m,default:()=>v,frontMatter:()=>d,metadata:()=>g,toc:()=>w});var a=n(3905),o=n(78901),i=n(49044),s=Object.defineProperty,l=Object.defineProperties,r=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&h(e,n,t[n]);if(p)for(var n of p(t))k.call(t,n)&&h(e,n,t[n]);return e};const d={id:"mc-application-tokens",title:"Application Tokens \u2b50"},m=void 0,g={unversionedId:"mc-application-tokens",id:"version-2.5/mc-application-tokens",title:"Application Tokens \u2b50",description:"This page describes how to use the Application Tokens Plugin that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto (MMC).",source:"@site/management-center_versioned_docs/version-2.5/application-tokens.md",sourceDirName:".",slug:"/mc-application-tokens",permalink:"/management-center/mc-application-tokens",draft:!1,tags:[],version:"2.5",frontMatter:{id:"mc-application-tokens",title:"Application Tokens \u2b50"},sidebar:"someSidebar",previous:{title:"Monitoring REST API \u2b50",permalink:"/management-center/mc-monitoring-rest-api"},next:{title:"Application Tokens REST API \u2b50",permalink:"/management-center/mc-application-tokens-rest-api"}},f={},w=[{value:"Application Tokens Overview",id:"application-tokens-overview",level:2},{value:"Enable Application Tokens Plugin",id:"enable-application-tokens-plugin",level:2},{value:"What is an application token",id:"what-is-an-application-token",level:2},{value:"How to use application token",id:"how-to-use-application-token",level:2},{value:"Types of responses",id:"types-of-responses",level:3},{value:"Application Tokens View",id:"application-tokens-view",level:2},{value:"Create Application Token",id:"create-application-token",level:2},{value:"Revoke an Application Token",id:"revoke-an-application-token",level:2},{value:"Application Tokens REST API",id:"application-tokens-rest-api",level:2}],y={toc:w};function v(e){var t,s=e,{components:h}=s,d=((e,t)=>{var n={};for(var a in e)c.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&p)for(var a of p(e))t.indexOf(a)<0&&k.call(e,a)&&(n[a]=e[a]);return n})(s,["components"]);return(0,a.kt)("wrapper",(t=u(u({},y),d),l(t,r({components:h,mdxType:"MDXLayout"}))),(0,a.kt)(o.Z,{version:"2.5",mdxType:"SinceVersion"}),(0,a.kt)(i.Z,{mdxType:"PremiumFeature"}),(0,a.kt)("br",null),(0,a.kt)("br",null),(0,a.kt)("p",null,"This page describes how to use the ",(0,a.kt)("strong",{parentName:"p"},"Application Tokens Plugin")," that is provided by the Management Center for the Pro Edition of Eclipse Mosquitto (MMC)."),(0,a.kt)("admonition",u({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"Application Tokens Feature can be accessed only by the users with an ",(0,a.kt)("em",{parentName:"p"},"admin")," role.")),(0,a.kt)("h2",u({},{id:"application-tokens-overview"}),"Application Tokens Overview"),(0,a.kt)("p",null,"Application tokens provide an alternative way of accessing MMC that can be used by the other applications and services (non-human MMC users). The entity that receives an application token can include it in its requests to the REST API of the MMC and obtain the same access rights as an authenticated user. The access rights are limited by the role attribute of the token."),(0,a.kt)("admonition",u({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"Application Tokens are especially useful with the Single Sign-On, since the SSO plugin replaces the standard authentication you won't have a way to access the MMC REST APIs using external services and applications. That's precisely the right use case for Application Tokens Feature.")),(0,a.kt)("h2",u({},{id:"enable-application-tokens-plugin"}),"Enable Application Tokens Plugin"),(0,a.kt)("p",null,"To enable the Application Tokens Feature, ensure you are using the Pro Edition of Mosquitto and that you have the feature enabled in your license. Also ensure that your config file (specified with ",(0,a.kt)("inlineCode",{parentName:"p"},"CEDALO_MC_PROXY_CONFIG")," environmental variable or by default saved in ",(0,a.kt)("inlineCode",{parentName:"p"},"management-center/config/config.json"),") contains the following entry inside of the ",(0,a.kt)("inlineCode",{parentName:"p"},"plugins")," array:"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{className:"language-json"}),'    {\n      "name": "application-tokens"\n    }\n')),(0,a.kt)("p",null,"On start-up, the Management Center will print a message that the ",(0,a.kt)("inlineCode",{parentName:"p"},"application-tokens")," plugin is enabled and laoded into the console:"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{}),'Loaded plugin: "application_tokens" (Cedalo Application tokens)\n')),(0,a.kt)("h2",u({},{id:"what-is-an-application-token"}),"What is an application token"),(0,a.kt)("p",null,"An application token is a string of characters that encodes authorization information, which is comprised of the following attributes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"exp")," - date and time when the token expires (Unix timestamp)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"role")," - role (admin, editor, viewer, connectionManager, monitoringViewer) that the token grants to the one using it")),(0,a.kt)("p",null,"Application tokens also hold (encode) additional attributes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"iat")," - issued at, the date when the application token was issued (unix timestamp)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"iss")," - user who requested the application token")),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{}),'{\n  "role": "viewer",\n  "iat": 1669294549,\n  "exp": 1669382280,\n  "iss": "cedalo"\n}\n')),(0,a.kt)("p",null,"This string of data is saved as a JWT token which is signed with a secret. The token can only be signed by the party holding the secret (Management Center). In case somebody else tries to change the token information, they will not be able to generate a valid signature. A signature is always verified by the Management Center for every token. Without a valid one the token will be unusable."),(0,a.kt)("p",null,"Application tokens are never stored on the MMC's backend because they are essentially plain text passwords. It would be a problem if an attacker gained access to the complete database of all tokens. Therefore, Management Center does not store them and requires user to copy the token upon creation and store them in a safe place. Please create tokens with minimum needed permissions for every application that needs the access."),(0,a.kt)("h2",u({},{id:"how-to-use-application-token"}),"How to use application token"),(0,a.kt)("p",null,"When you have your application token generated (read below if you want to learn how application tokens can be created), you just have to pass it with every request you make to the MMC REST API."),(0,a.kt)("p",null,"We recommend including the application token inside of the ",(0,a.kt)("inlineCode",{parentName:"p"},"Authorization")," header with a value of ",(0,a.kt)("inlineCode",{parentName:"p"},'"Bearer <insert your token here>"'),". So, for example:"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{}),'Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYWRtaW4iLCJpYXQiOjE2Njk2NTkxOTYsImV4cCI6MTY3MjM0MDUyMCwiaXNzIjoiY2VkYWxvIn0.swBlZ-3fpNCgIaG5ymfuFJ-Du7g59KHewOIHCMRx1cM"\n')),(0,a.kt)("p",null,"Another option is to include your application token as a ",(0,a.kt)("inlineCode",{parentName:"p"},"token")," url query parameter inside of your request url: ",(0,a.kt)("inlineCode",{parentName:"p"},"?token=<insert your token here>"),". For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",u({parentName:"pre"},{}),"https://yourmmcurl.com?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYWRtaW4iLCJpYXQiOjE2Njk2NTkxOTYsImV4cCI6MTY3MjM0MDUyMCwiaXNzIjoiY2VkYWxvIn0.swBlZ-3fpNCgIaG5ymfuFJ-Du7g59KHewOIHCMRx1cM\n")),(0,a.kt)("h3",u({},{id:"types-of-responses"}),"Types of responses"),(0,a.kt)("p",null,"When using application tokens, you may receive either a successful response or an error."),(0,a.kt)("p",null,"A successful response means that your token was accepted and the data you asked for when issuing request was returned back to you. In this case the HTTP status code would be ",(0,a.kt)("inlineCode",{parentName:"p"},"200"),", and the response type is ",(0,a.kt)("inlineCode",{parentName:"p"},"application/json"),". In case your token was successfully accpeted but your query was malformed or some other error when processing your request occurred, you would get a status code in the range of 400-500 inclusive. You can guess what when wrong just by looking at the status code (refer to the HTTP status codes) or reading the body of the response which in case of error will be of type ",(0,a.kt)("inlineCode",{parentName:"p"},"text/*")," and will simply contain a string explaining the error."),(0,a.kt)("p",null,"In case the application token was not accepted by the MMC, you will get a ",(0,a.kt)("inlineCode",{parentName:"p"},"403")," status code with a text response body of either ",(0,a.kt)("inlineCode",{parentName:"p"},"Forbidden")," for endpoints for which your token does not have enough permissions or ",(0,a.kt)("inlineCode",{parentName:"p"},"Token not found or was revoked")," for cases when your token is invalid or has expired."),(0,a.kt)("h2",u({},{id:"application-tokens-view"}),"Application Tokens View"),(0,a.kt)("p",null,'The application Tokens Feature has a designated view (page, also called application tokens overview) in the MMC GUI. You can access the view by clicking on "App Tokens" menu item:'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(18139).Z,width:"57",height:"238"})),(0,a.kt)("p",null,"Application Tokens view features a table that contains information about all the existing application tokens:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(26401).Z,width:"1491",height:"829"})),(0,a.kt)("p",null,"The fields (columns) of this table represent all the information that Management Center stores about an application token, namely:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Name")," - name of the token. Must be unique. Used to a human readable identifier to a token ",(0,a.kt)("em",{parentName:"li"},"(max 30 characters)")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Role")," - role provided by the token (a role that the one using the token gets)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Requested by")," - username of the person who created this token"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Issue Date")," - datetime when the token was created"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Valid Until")," - datetime when token expires"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Last Used")," - datetime when the token was last used"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Hash")," - hash of the token. Used to identify the token when issuing requests to Application Tokens REST API"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Status"),' - status of the token, e. i. "Valid" or "Invalid"')),(0,a.kt)("h2",u({},{id:"create-application-token"}),"Create Application Token"),(0,a.kt)("p",null,'To create a new application token, navigate to the Application Tokens view using the right menu bar and click on "New Token" Button in the top left.'),(0,a.kt)("p",null,"After that, the following dialog window opens:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(76711).Z,width:"1305",height:"630"})),(0,a.kt)("p",null,"There you can specify the parameters required for the token generation, namely, ",(0,a.kt)("em",{parentName:"p"},"Token Name")," (30 characters long at max), ",(0,a.kt)("em",{parentName:"p"},"Role"),", and ",(0,a.kt)("em",{parentName:"p"},"Valid Until"),'. After filling in the form and clicking "Create", the token will be generated and shown:'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(54e3).Z,width:"1280",height:"615"})),(0,a.kt)("p",null,"At this stage, please copy the token using the copy button and keep it in a safe place as it will not be stored in the Management Center. You can close the dialog afterwards by clicking anywhere outside of it."),(0,a.kt)("admonition",u({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"Don't forget to copy the token after creating it, as you will never see it again.")),(0,a.kt)("p",null,"If everything worked correctly, the new connection should appear on the overview page:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(25183).Z,width:"2880",height:"1800"})),(0,a.kt)("h2",u({},{id:"revoke-an-application-token"}),"Revoke an Application Token"),(0,a.kt)("p",null,"To revoke an application token, navigate to the Application Tokens view using the right menu bar. Find the entry with the token that you want to revoke inside of the presented table and click on the trash bin icon on the right."),(0,a.kt)("h2",u({},{id:"application-tokens-rest-api"}),"Application Tokens REST API"),(0,a.kt)("p",null,"Application Tokens Feature also provides a REST API, which is described on a separate page in this documentation."))}v.isMDXComponent=!0},49044:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),o=n(74889),i=n(62659),s=n(83166);function l({}){return a.createElement(o.Z,{sx:{margin:"5px",color:"#ffffff",backgroundColor:i.Z[500]},size:"small",icon:a.createElement(s.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},78901:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),o=n(74889),i=n(13328);function s({version:e}){return e?a.createElement(o.Z,{sx:{margin:"5px"},color:"info",size:"small",icon:a.createElement(i.Z,{size:"small"}),label:`${e}`}):a.createElement(a.Fragment,null)}},18139:(e,t,n)=>{n.d(t,{Z:()=>a});const a="data:image/png;base64,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"},26401:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/apptokens-002_view-9ed4897a81f131737b32f30f76c3790d.png"},76711:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/apptokens-003_create-363d0cea0f659a21a60fe0d5591c046a.png"},54e3:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/apptokens-004_created-cea88a09eb0b3fbde8d95b54aee8a98b.png"},25183:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/connections-003_created-dc2e68f72e577c4217c238c71224f550.png"}}]);