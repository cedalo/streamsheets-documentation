(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{73:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return b})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return r})),n.d(t,"default",(function(){return p}));var i=n(3),a=(n(0),n(92));const b={id:"manpage-mosquitto-sub",title:"mosquitto_sub man page",sidebar_label:"mosquitto_sub"},o={unversionedId:"broker/manpage-mosquitto-sub",id:"broker/manpage-mosquitto-sub",isDocsHomePage:!1,title:"mosquitto_sub man page",description:"Name",source:"@site/docs/broker/manpage-mosquitto-sub.md",slug:"/broker/manpage-mosquitto-sub",permalink:"/latest/docs/broker/manpage-mosquitto-sub",version:"current",sidebar_label:"mosquitto_sub",sidebar:"someSidebar",previous:{title:"mosquitto_rr man page",permalink:"/latest/docs/broker/manpage-mosquitto-rr"},next:{title:"MQTT man page",permalink:"/latest/docs/broker/manpage-mqtt"}},r=[{value:"Name",id:"name",children:[]},{value:"Synopsis",id:"synopsis",children:[]},{value:"Description",id:"description",children:[]},{value:"Encrypted Connections",id:"encrypted-connections",children:[]},{value:"Options",id:"options",children:[]},{value:"Output Format",id:"output-format",children:[]},{value:"Wills",id:"wills",children:[]},{value:"Properties",id:"properties",children:[]},{value:"Exit Status",id:"exit-status",children:[]},{value:"Examples",id:"examples",children:[]},{value:"Exit Values",id:"exit-values",children:[]},{value:"Files",id:"files",children:[]}],l={rightToc:r};function p({components:e,...t}){return Object(a.b)("wrapper",Object(i.a)({},l,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("h3",{id:"name"},"Name"),Object(a.b)("p",null,"mosquitto","_","sub \u2014 an MQTT version 5/3.1.1/3.1 client for subscribing to topics"),Object(a.b)("h3",{id:"synopsis"},"Synopsis"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"mosquitto_sub")," { ","[",Object(a.b)("inlineCode",{parentName:"p"},"-h")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"hostname")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--unix")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"socket path")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-p")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"port-number")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-u")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"username")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-P")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"password")),"]"," ",Object(a.b)("inlineCode",{parentName:"p"},"-t")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"message-topic")),"... | ",Object(a.b)("inlineCode",{parentName:"p"},"-L")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"URL"))," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-t")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"message-topic")),"...","]"," } ","[",Object(a.b)("inlineCode",{parentName:"p"},"-A")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"bind-address")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-c"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-C")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"msg-count")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-d"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-D")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"command"))," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"identifier"))," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"value")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-E"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-i")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"client-id")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-I")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"client-id-prefix")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-k")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"keepalive-time")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-N"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--nodelay"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--pretty"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-q")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"message-QoS")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--random-filter")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"chance")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--remove-retained"),"]"," ","["," ",Object(a.b)("inlineCode",{parentName:"p"},"-R")," | ",Object(a.b)("inlineCode",{parentName:"p"},"--retained-only")," ","]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--retain-as-published"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-S"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-T")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"filter-out")),"...","]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-U")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"unsub-topic")),"...","]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-v"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-V")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"protocol-version")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-W")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"message-processing-timeout")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"-x")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"session-expiry-interval")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--proxy")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"socks-url")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--quiet"),"]"," ","["," ",Object(a.b)("inlineCode",{parentName:"p"},"--will-topic")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"topic"))," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--will-payload")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"payload")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--will-qos")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"qos")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--will-retain"),"]"," ","]"," ","[","["," { ",Object(a.b)("inlineCode",{parentName:"p"},"--cafile")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"file"))," | ",Object(a.b)("inlineCode",{parentName:"p"},"--capath")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"dir"))," } ","[",Object(a.b)("inlineCode",{parentName:"p"},"--cert")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"file")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--key")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"file")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--tls-version")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"version")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--tls-alpn")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"protocol")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--tls-engine")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"engine")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--keyform")," { ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"pem"))," | ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"engine"))," }","]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--tls-engine-kpass-sha1")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"kpass-sha1")),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--tls-use-os-certs"),"]"," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--insecure"),"]"," ","]"," | ","["," ",Object(a.b)("inlineCode",{parentName:"p"},"--psk")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"hex-key"))," ",Object(a.b)("inlineCode",{parentName:"p"},"--psk-identity")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"identity"))," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--tls-version")," ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"version")),"]"," ","]","]"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"mosquitto_sub")," ","[",Object(a.b)("inlineCode",{parentName:"p"},"--help"),"]"),Object(a.b)("h3",{id:"description"},"Description"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"mosquitto","_","sub")," is a simple MQTT version 5/3.1.1 client that will subscribe to topics and print the messages that it receives."),Object(a.b)("p",null,"In addition to subscribing to topics, ",Object(a.b)("strong",{parentName:"p"},"mosquitto","_","sub")," can filter out received messages so they are not printed (see the ",Object(a.b)("inlineCode",{parentName:"p"},"-T")," option) or unsubscribe from topics (see the ",Object(a.b)("inlineCode",{parentName:"p"},"-U")," option). Unsubscribing from topics is useful for clients connecting with clean session set to false."),Object(a.b)("h3",{id:"encrypted-connections"},"Encrypted Connections"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"mosquitto","_","sub")," supports TLS encrypted connections. It is strongly recommended that you use an encrypted connection for anything more than the most basic setup."),Object(a.b)("p",null,"To enable TLS connections when using x509 certificates, one of either ",Object(a.b)("inlineCode",{parentName:"p"},"--cafile")," or ",Object(a.b)("inlineCode",{parentName:"p"},"--capath")," must be provided as an option."),Object(a.b)("p",null,"To enable TLS connections when using TLS-PSK, you must use the ",Object(a.b)("inlineCode",{parentName:"p"},"--psk")," and the ",Object(a.b)("inlineCode",{parentName:"p"},"--psk-identity")," options."),Object(a.b)("h3",{id:"options"},"Options"),Object(a.b)("p",null,"The options below may be given on the command line, but may also be placed in a config file located at ",Object(a.b)("inlineCode",{parentName:"p"},"$XDG_CONFIG_HOME/mosquitto_sub")," or ",Object(a.b)("inlineCode",{parentName:"p"},"$HOME/.config/mosquitto_sub")," with one pair of ",Object(a.b)("inlineCode",{parentName:"p"},"-option _`value`_")," per line. The values in the config file will be used as defaults and can be overridden by using the command line. The exceptions to this are ",Object(a.b)("inlineCode",{parentName:"p"},"-t")," and ",Object(a.b)("inlineCode",{parentName:"p"},"-T"),", which if given in the config file will not be overridden. Note also that currently some options cannot be negated, e.g. ",Object(a.b)("inlineCode",{parentName:"p"},"-S"),". Config file lines that have a ",Object(a.b)("inlineCode",{parentName:"p"},"#")," as the first character are treated as comments and not processed any further."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-A")),Object(a.b)("p",null,"Bind the outgoing connection to a local ip address/hostname. Use this argument if you need to restrict network communication to a particular interface."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-c"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--disable-clean-session")),Object(a.b)("p",null,"Disable 'clean session' / enable persistent client mode. When this argument is used, the broker will be instructed not to clean existing sessions for the same client id when the client connects, and sessions will never expire when the client disconnects. MQTT v5 clients can change their session expiry interval with the ",Object(a.b)("inlineCode",{parentName:"p"},"-x")," argument."),Object(a.b)("p",null,"When a session is persisted on the broker, the subscriptions for the client will be maintained after it disconnects, along with subsequent QoS 1 and QoS 2 messages that arrive. When the client reconnects and does not clean the session, it will receive all of the queued messages."),Object(a.b)("p",null,"If using this option, the client id must be set manually with ",Object(a.b)("inlineCode",{parentName:"p"},"--id")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--cafile")),Object(a.b)("p",null,"Define the path to a file containing PEM encoded CA certificates that are trusted. Used to enable SSL communication."),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--capath")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--capath")),Object(a.b)("p",null,"Define the path to a directory containing PEM encoded CA certificates that are trusted. Used to enable SSL communication."),Object(a.b)("p",null,"For ",Object(a.b)("inlineCode",{parentName:"p"},"--capath"),' to work correctly, the certificate files must have ".crt" as the file ending and you must run "openssl rehash ',Object(a.b)("inlineCode",{parentName:"p"},"<path to capath>"),'" each time you add/remove a certificate.'),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--cafile")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--cert")),Object(a.b)("p",null,"Define the path to a file containing a PEM encoded certificate for this client, if required by the server."),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--key"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--ciphers")),Object(a.b)("p",null,"An openssl compatible list of TLS ciphers to support in the client. See ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"#"}),"ciphers(1)")," for more information."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-C")),Object(a.b)("p",null,"Disconnect and exit the program immediately after the given count of messages have been received. This may be useful in shell scripts where on a single status value is required, for example."),Object(a.b)("p",null,"Combine with ",Object(a.b)("inlineCode",{parentName:"p"},"-R")," to print only the first set of fresh messages (i.e. that does not have the retained flag set), or with ",Object(a.b)("inlineCode",{parentName:"p"},"-T")," to filter which topics are processed."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-d"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--debug")),Object(a.b)("p",null,"Enable debug messages."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-D"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--property")),Object(a.b)("p",null,"Use an MQTT v5 property with this publish. If you use this option, the client will be set to be an MQTT v5 client. This option has two forms:"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-D command identifier value")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-D command identifier name value")),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"command")," is the MQTT command/packet identifier and can be one of CONNECT, PUBACK, PUBREC, PUBCOMP, SUBSCRIBE, UNSUBSCRIBE, DISCONNECT, AUTH, or WILL. The properties available for each command are listed in the Properties section."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"identifier")," is the name of the property to add. This is as described in the specification, but with '-' as a word separator. For example: ",Object(a.b)("inlineCode",{parentName:"p"},"payload-format-indicator"),". More details are in the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"mosquitto_sub-1.html#properties",title:"Properties"}),"Properties")," section."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"value")," is the value of the property to add, with a data type that is property specific."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"name")," is only used for the ",Object(a.b)("inlineCode",{parentName:"p"},"user-property")," property as the first of the two strings in the string pair. In that case, ",Object(a.b)("inlineCode",{parentName:"p"},"value")," is the second of the strings in the pair."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-E")),Object(a.b)("p",null,"If this option is given, ",Object(a.b)("strong",{parentName:"p"},"mosquitto","_","sub")," will exit immediately that all of its subscriptions have been acknowledged by the broker. In conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"-c")," this allows a durable client session to be initialised on the broker for future use without requiring any messages to be received."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-F")),Object(a.b)("p",null,"Specify output printing format. This option allows you to choose what information from each message is printed to the screen. See the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"mosquitto_sub-1.html#outputformat",title:"Output Format"}),"Output Format")," section below for full details."),Object(a.b)("p",null,"This option overrides the ",Object(a.b)("inlineCode",{parentName:"p"},"-v")," option, but does not override the ",Object(a.b)("inlineCode",{parentName:"p"},"-N")," option."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--help")),Object(a.b)("p",null,"Display usage information."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-h"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--host")),Object(a.b)("p",null,"Specify the host to connect to. Defaults to localhost."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-i"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--id")),Object(a.b)("p",null,"The id to use for this client. If not given, a client id will be generated depending on the MQTT version being used. For v3.1.1/v3.1, the client generates a client id in the format ",Object(a.b)("inlineCode",{parentName:"p"},"mosq-XXXXXXXXXXXXXXXXXX"),", where the ",Object(a.b)("inlineCode",{parentName:"p"},"X")," are replaced with random alphanumeric characters. For v5.0, the client sends a zero length client id, and the server will generate a client id for the client."),Object(a.b)("p",null,"This option cannot be used at the same time as the ",Object(a.b)("inlineCode",{parentName:"p"},"--id-prefix")," argument."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-I"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--id-prefix")),Object(a.b)("p",null,"Provide a prefix that the client id will be built from by appending the process id of the client. This is useful where the broker is using the clientid","_","prefixes option. Cannot be used at the same time as the ",Object(a.b)("inlineCode",{parentName:"p"},"--id")," argument."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--insecure")),Object(a.b)("p",null,"When using certificate based encryption, this option disables verification of the server hostname in the server certificate. This can be useful when testing initial server configurations but makes it possible for a malicious third party to impersonate your server through DNS spoofing, for example. Use this option in testing ",Object(a.b)("em",{parentName:"p"},"only"),". If you need to resort to using this option in a production environment, your setup is at fault and there is no point using encryption."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-k"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--keepalive")),Object(a.b)("p",null,"The number of seconds between sending PING commands to the broker for the purposes of informing it we are still connected and functioning. Defaults to 60 seconds."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--key")),Object(a.b)("p",null,"Define the path to a file containing a PEM encoded private key for this client, if required by the server."),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--cert"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--keyform")),Object(a.b)("p",null,'Specifies the type of private key in use when making TLS connections.. This can be "pem" or "engine". This parameter is useful when a TPM module is being used and the private key has been created with it. Defaults to "pem", which means normal private key files are used.'),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--tls-engine"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-L"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--url")),Object(a.b)("p",null,"Specify specify user, password, hostname, port and topic at once as a URL. The URL must be in the form: mqtt(s)://","[","username","[",":password","]","@","]","host","[",":port","]","/topic"),Object(a.b)("p",null,"If the scheme is mqtt:// then the port defaults to 1883. If the scheme is mqtts:// then the port defaults to 8883."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-N")),Object(a.b)("p",null,"Do not append an end of line character to the payload when printing. This allows streaming of payload data from multiple messages directly to another application unmodified. Only really makes sense when not using ",Object(a.b)("inlineCode",{parentName:"p"},"-v"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--nodelay")),Object(a.b)("p",null,"Disable Nagle's algorithm for the socket. This means that latency of sent messages is reduced, which is particularly noticable for small, reasonably infrequent messages. Using this option may result in more packets being sent than would normally be necessary."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-p"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--port")),Object(a.b)("p",null,"Connect to the port specified. If not given, the default of 1883 for plain MQTT or 8883 for MQTT over TLS will be used."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-P"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--pw")),Object(a.b)("p",null,"Provide a password to be used for authenticating with the broker. Using this argument without also specifying a username is invalid when using MQTT v3.1 or v3.1.1. See also the ",Object(a.b)("inlineCode",{parentName:"p"},"--username")," option."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--pretty")),Object(a.b)("p",null,"When using the JSON output format %j or %J, the default is to print in an unformatted fashion. Specifying ",Object(a.b)("inlineCode",{parentName:"p"},"--pretty")," prints messages in a prettier, more human readable format."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--proxy")),Object(a.b)("p",null,'Specify a SOCKS5 proxy to connect through. "None" and "username" authentication types are supported. The ',Object(a.b)("inlineCode",{parentName:"p"},"socks-url")," must be of the form ",Object(a.b)("inlineCode",{parentName:"p"},"socks5h://[username[:password]@]host[:port]"),". The protocol prefix ",Object(a.b)("inlineCode",{parentName:"p"},"socks5h")," means that hostnames are resolved by the proxy. The symbols %25, %3A and %40 are URL decoded into %, : and @ respectively, if present in the username or password."),Object(a.b)("p",null,"If username is not given, then no authentication is attempted. If the port is not given, then the default of 1080 is used."),Object(a.b)("p",null,"More SOCKS versions may be available in the future, depending on demand, and will use different protocol prefixes as described in ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"#"}),"curl(1)"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--psk")),Object(a.b)("p",null,"Provide the hexadecimal (no leading 0x) pre-shared-key matching the one used on the broker to use TLS-PSK encryption support. ",Object(a.b)("inlineCode",{parentName:"p"},"--psk-identity")," must also be provided to enable TLS-PSK."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--psk-identity")),Object(a.b)("p",null,"The client identity to use with TLS-PSK support. This may be used instead of a username if the broker is configured to do so."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-q"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--qos")),Object(a.b)("p",null,"Specify the quality of service desired for the incoming messages, from 0, 1 and 2. Defaults to 0. See ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"#"}),"mqtt(7)")," for more information on QoS."),Object(a.b)("p",null,"The QoS is identical for all topics subscribed to in a single instance of mosquitto","_","sub."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--quiet")),Object(a.b)("p",null,"If this argument is given, no runtime errors will be printed. This excludes any error messages given in case of invalid user input (e.g. using ",Object(a.b)("inlineCode",{parentName:"p"},"--port")," without a port)."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-R")),Object(a.b)("p",null,'If this argument is given, messages that are received that have the retain bit set will not be printed. Messages with retain set are "stale", in that it is not known when they were originally published. When subscribing to a wildcard topic there may be a large number of retained messages. This argument suppresses their display.'),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--random-filter")),Object(a.b)("p",null,"This option can be used to reduce the proportion of messages that mosquitto","_","sub prints. The default behaviour is to print all incoming messages. Setting the ",Object(a.b)("em",{parentName:"p"},Object(a.b)("inlineCode",{parentName:"em"},"chance"))," to a floating point value between 0.1 and 100.0 will ensure that on average that percentage of messages will be printed."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--remove-retained")),Object(a.b)("p",null,"If this argument is given, the when mosquitto","_","sub receives a message with the retained bit set, it will send a message to the broker to clear that retained message. This applies to all received messages except those that are filtered out by the ",Object(a.b)("inlineCode",{parentName:"p"},"-T")," option. This option still takes effect even if ",Object(a.b)("inlineCode",{parentName:"p"},"-R")," is used. See also the ",Object(a.b)("inlineCode",{parentName:"p"},"--retain-as-published")," and ",Object(a.b)("inlineCode",{parentName:"p"},"--retained-only")," options."),Object(a.b)("p",null,"Example 1."),Object(a.b)("p",null,"Remove all retained messages on the server, assuming we have access to do so, and then exit:"),Object(a.b)("p",null,"mosquitto","_","sub -t '#' --remove-retained --retained-only"),Object(a.b)("p",null,"Example 2."),Object(a.b)("p",null,"Remove a whole tree, with the exception of a single topic:"),Object(a.b)("p",null,"mosquitto","_","sub -t 'bbc/#' -T bbc/bbc1 --remove-retained"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--retained-only")),Object(a.b)("p",null,'If this argument is given, only messages that are received that have the retain bit set will be printed. Messages with retain set are "stale", in that it is not known when they were originally published. With this argument in use, the receipt of the first non-stale message will cause the client to exit. See also the ',Object(a.b)("inlineCode",{parentName:"p"},"--retain-as-published")," option."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--retain-as-published")),Object(a.b)("p",null,'If this argument is given, the subscriptions will have the "retain as published" option set. This means that the retain flag on an incoming message will be exactly as set by the publishing client, rather than indicating whether the message is fresh/stale.'),Object(a.b)("p",null,"This option is not valid for MQTT v3.1/v3.1.1 clients."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-S")),Object(a.b)("p",null,"Use SRV lookups to determine which host to connect to. Performs lookups to ",Object(a.b)("inlineCode",{parentName:"p"},"_mqtt._tcp.<host>")," when used in conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"-h"),", otherwise uses ",Object(a.b)("inlineCode",{parentName:"p"},"_mqtt._tcp.<local dns domain>"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-t"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--topic")),Object(a.b)("p",null,"The MQTT topic to subscribe to. See ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"#"}),"mqtt(7)")," for more information on MQTT topics."),Object(a.b)("p",null,"This option may be repeated to subscribe to multiple topics."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-T"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--filter-out")),Object(a.b)("p",null,"Suppress printing of topics that match the filter. This allows subscribing to a wildcard topic and only printing a partial set of the wildcard hierarchy."),Object(a.b)("p",null,"For example, subscribe to the BBC tree, but suppress output from Radio 3:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," bbc/# ",Object(a.b)("inlineCode",{parentName:"li"},"-T")," bbc/radio3")),Object(a.b)("p",null,"This option may be repeated to filter out multiple topics or topic trees."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--tls-alpn")),Object(a.b)("p",null,"Provide a protocol to use when connecting to a broker that has multiple protocols available on a single port, e.g. MQTT and WebSockets."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--tls-engine")),Object(a.b)("p",null,"A valid openssl engine id. These can be listed with openssl engine command."),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--keyform"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--tls-engine-kpass-sha1")),Object(a.b)("p",null,"SHA1 of the private key password when using an TLS engine. Some TLS engines such as the TPM engine may require the use of a password in order to be accessed. This option allows a hex encoded SHA1 hash of the password to the engine directly, instead of the user being prompted for the password."),Object(a.b)("p",null,"See also ",Object(a.b)("inlineCode",{parentName:"p"},"--tls-engine"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--tls-use-os-certs")),Object(a.b)("p",null,"If used, this will load and trust the OS provided CA certificates. This can be used in conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"--cafile")," and ",Object(a.b)("inlineCode",{parentName:"p"},"--capath")," and can be used on its own to enable TLS mode. This will be set by default if ",Object(a.b)("inlineCode",{parentName:"p"},"-L mqtts://...")," is used, or if port is 8883 and no other certificate options are used."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--tls-version")),Object(a.b)("p",null,"Choose which TLS protocol version to use when communicating with the broker. Valid options are ",Object(a.b)("inlineCode",{parentName:"p"},"tlsv1.3"),", ",Object(a.b)("inlineCode",{parentName:"p"},"tlsv1.2")," and ",Object(a.b)("inlineCode",{parentName:"p"},"tlsv1.1"),". The default value is ",Object(a.b)("inlineCode",{parentName:"p"},"tlsv1.2"),". Must match the protocol version used by the broker."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-u"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--username")),Object(a.b)("p",null,"Provide a username to be used for authenticating with the broker. See also the ",Object(a.b)("inlineCode",{parentName:"p"},"--pw")," argument."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--unix")),Object(a.b)("p",null,"Connect to a broker through a local unix domain socket instead of a TCP socket. This is a replacement for ",Object(a.b)("inlineCode",{parentName:"p"},"-h")," and ",Object(a.b)("inlineCode",{parentName:"p"},"-L"),". For example: ",Object(a.b)("inlineCode",{parentName:"p"},"mosquitto_pub --unix /tmp/mosquitto.sock ...")),Object(a.b)("p",null,"See the ",Object(a.b)("inlineCode",{parentName:"p"},"socket_domain")," option in ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"mosquitto-conf-5.html"}),"mosquitto.conf")," (5) to configure Mosquitto to listen on a unix socket."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-U"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--unsubscribe")),Object(a.b)("p",null,"A topic that will be unsubscribed from. This may be used on its own or in conjunction with the ",Object(a.b)("inlineCode",{parentName:"p"},"--topic")," option and only makes sense when used in conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"--clean-session"),"."),Object(a.b)("p",null,"If used with ",Object(a.b)("inlineCode",{parentName:"p"},"--topic")," then subscriptions will be processed before unsubscriptions."),Object(a.b)("p",null,"Note that it is only possible to unsubscribe from subscriptions that have previously been made. It is not possible to punch holes in wildcard subscriptions. For example, subscribing to ",Object(a.b)("inlineCode",{parentName:"p"},"sensors/#")," and then unsubscribing from ",Object(a.b)("inlineCode",{parentName:"p"},"sensors/+/temperature")," as shown below will still result in messages matching the ",Object(a.b)("inlineCode",{parentName:"p"},"sensors/+/temperature")," being delivered to the client."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," sensors/# ",Object(a.b)("inlineCode",{parentName:"li"},"-U")," sensors/+/temperature ",Object(a.b)("inlineCode",{parentName:"li"},"-v"))),Object(a.b)("p",null,"Note also that because retained messages are published by the broker on receipt of a SUBSCRIBE command, subscribing and unsubscribing to the same topic may result in messages being received at the client."),Object(a.b)("p",null,"This option may be repeated to unsubscribe from multiple topics."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-v"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--verbose")),Object(a.b)("p",null,'Print received messages verbosely. With this argument, messages will be printed as "topic payload". When this argument is not given, the messages are printed as "payload".'),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-V"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"--protocol-version")),Object(a.b)("p",null,"Specify which version of the MQTT protocol should be used when connecting to the remote broker. Can be ",Object(a.b)("inlineCode",{parentName:"p"},"5"),", ",Object(a.b)("inlineCode",{parentName:"p"},"311"),", ",Object(a.b)("inlineCode",{parentName:"p"},"31"),", or the more verbose ",Object(a.b)("inlineCode",{parentName:"p"},"mqttv5"),", ",Object(a.b)("inlineCode",{parentName:"p"},"mqttv311"),", or ",Object(a.b)("inlineCode",{parentName:"p"},"mqttv31"),". Defaults to ",Object(a.b)("inlineCode",{parentName:"p"},"311"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-W")),Object(a.b)("p",null,"Provide a timeout as an integer number of seconds. mosquitto","_","sub will stop processing messages and disconnect after this number of seconds has passed. The timeout starts just after the client has connected to the broker."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--will-payload")),Object(a.b)("p",null,"Specify a message that will be stored by the broker and sent out if this client disconnects unexpectedly. This must be used in conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"--will-topic"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--will-qos")),Object(a.b)("p",null,"The QoS to use for the Will. Defaults to 0. This must be used in conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"--will-topic"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--will-retain")),Object(a.b)("p",null,"If given, if the client disconnects unexpectedly the message sent out will be treated as a retained message. This must be used in conjunction with ",Object(a.b)("inlineCode",{parentName:"p"},"--will-topic"),"."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"--will-topic")),Object(a.b)("p",null,"The topic on which to send a Will, in the event that the client disconnects unexpectedly."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-x")),Object(a.b)("p",null,"Set the session-expiry-interval property on the CONNECT packet. Applies to MQTT v5 clients only. Set to 0-4294967294 to specify the session will expire in that many seconds after the client disconnects, or use -1, 4294967295, or \u221e for a session that does not expire. Defaults to -1 if -c is also given, or 0 if -c not given."),Object(a.b)("p",null,"If the session is set to never expire, either with -x or -c, then a client id must be provided."),Object(a.b)("h3",{id:"output-format"},"Output Format"),Object(a.b)("p",null,"There are three ways of formatting the output from mosquitto","_","sub. In all cases a new-line character is appended for each message received unless the ",Object(a.b)("inlineCode",{parentName:"p"},"-N")," argument is passed to mosquitto","_","sub."),Object(a.b)("p",null,"Payload-only is the default output format and will print the payload exactly as it is received."),Object(a.b)("p",null,"Verbose mode is activated with ",Object(a.b)("inlineCode",{parentName:"p"},"-v")," and prints the message topic and the payload, separated by a space."),Object(a.b)("p",null,"The final option is formatted output, which allows the user to define a custom output format. The behaviour is controlled with the ",Object(a.b)("inlineCode",{parentName:"p"},"-F format-string")," option. The format string is a free text string where interpreted sequences are replaced by different parameters. The available interpreted sequences are described below."),Object(a.b)("p",null,"Three characters are used to start an interpreted sequence: ",Object(a.b)("inlineCode",{parentName:"p"},"%"),", ",Object(a.b)("inlineCode",{parentName:"p"},"@")," and ",Object(a.b)("inlineCode",{parentName:"p"},"\\"),". Sequences starting with ",Object(a.b)("inlineCode",{parentName:"p"},"%")," are either parameters related to the MQTT message being printed, or are helper sequences to avoid the need to type long date format strings for example. Sequences starting with ",Object(a.b)("inlineCode",{parentName:"p"},"@")," are passed to the ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"#"}),"strftime(3)")," function (with the @ replaced with a % - note that only the character immediately after the @ is passed to strftime). This allows the construction of a wide variety of time based outputs. The output options for strftime vary from platform to platform, so please check what is available for your platform. mosquitto","_","sub does provide one extension to strftime which is ",Object(a.b)("inlineCode",{parentName:"p"},"@N"),", which can be used to obtain the number of nanoseconds passed in the current second. The resolution of this option varies depending on the platform. The final sequence character is ",Object(a.b)("inlineCode",{parentName:"p"},"\\"),", which is used to input some characters that would otherwise be difficult to enter."),Object(a.b)("h4",{id:"flag-characters"},"Flag characters"),Object(a.b)("p",null,"The parameters %A, %C, %E, %F, %I, %l, %m, %p, %R, %S, %t, %x, and %X can have optional flags immediately after the % character."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"0")),Object(a.b)("p",null,"The value should be zero padded. This applies to the parameters %A, %E, %F, %l, %m, %S, %X, and %x. It will be ignored for other parameters. If used with the ",Object(a.b)("inlineCode",{parentName:"p"},"-")," flag, the ",Object(a.b)("inlineCode",{parentName:"p"},"0")," flag will be ignored."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"-")),Object(a.b)("p",null,"The value will be left aligned to the field width, padded with blanks. The default is right alignment, with either 0 or blank padding."),Object(a.b)("h4",{id:"field-width"},"Field width"),Object(a.b)("p",null,"Some of the MQTT related parameters can be formatted with an option to set their field width in a similar way to regular printf style formats, i.e. this sets the minimum width when printing this parameter. This applies to the options %A, %C, %E, %F, %I, %l, %m, %p, %R, %S, %t, %x, %X."),Object(a.b)("p",null,"For example ",Object(a.b)("inlineCode",{parentName:"p"},"%10t")," would set the minimum topic field width to 10 characters."),Object(a.b)("h4",{id:"maximum-width"},"Maximum width"),Object(a.b)("p",null,"Some of the MQTT related parameters can be formatted with an option to set a maximum field width in a similar way to regular printf style formats. This applies to the options %C, %I, %R, %t."),Object(a.b)("p",null,"For example ",Object(a.b)("inlineCode",{parentName:"p"},"%10.10t")," would set the minimum topic field width to 10 characters, and the maximum topic width to 10 characters, i.e. the field will always be exactly 10 characters long."),Object(a.b)("h4",{id:"mqtt-related-parameters"},"MQTT related parameters"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%%")," a literal %."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%A")," the MQTT v5 topic-alias property, if present."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%C")," the MQTT v5 content-type property, if present."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%D")," the MQTT v5 correlation-data property, if present. Note that this property is specified as binary data, so may produce non-printable characters."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%E")," the MQTT v5 message-expiry-interval property, if present."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%F")," the MQTT v5 payload-format-indicator property, if present."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%l")," the length of the payload in bytes."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%m")," the message id (only relevant for messages with QoS>0)."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%P")," the MQTT v5 user-property property, if present. This will be printed in the form key:value. It is possible for any number of user properties to be attached to a message, and to have duplicate keys."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%p")," the payload raw bytes (may produce non-printable characters depending on the payload)."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%q")," the message QoS."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%R")," the MQTT v5 response-topic property, if present."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%r")," the retained flag for the message."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%S")," the MQTT v5 subscription-identifier property, if present."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%t")," the message topic."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%x")," the payload with each byte as a hexadecimal number (lower case)."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"%X")," the payload with each byte as a hexadecimal number (upper case).")),Object(a.b)("h4",{id:"helpers"},"Helpers"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"%I")," ISO-8601 format date and time, e.g. 2016-08-10T09:47:38+0100")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"%j")," JSON output of message parameters and timestamp, with a quoted and escaped payload. For example ",Object(a.b)("inlineCode",{parentName:"p"},'{"tst":"2020-05-06T22:12:00.000000+0100","topic":"greeting","qos":0,"retain":0,"payload":"hello world"}'))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"%J")," JSON output of message parameters and timestamp, with a non-quoted and non-escaped payload - this means the payload must itself be valid JSON. For example: ",Object(a.b)("inlineCode",{parentName:"p"},'{"tst":"2020-05-06T22:12:00.000000+0100","topic":"foo","qos":0,"retain":0,"payload":{"temperature":27.0,"humidity":57}}'),"."),Object(a.b)("p",{parentName:"li"},'If the payload is not valid JSON, then the error message "Error: Message payload is not valid JSON on topic ',Object(a.b)("inlineCode",{parentName:"p"},"<topic>"),'" will be printed to stderr.')),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"%I")," ISO-8601 format date and time, e.g. 2016-08-10T09:47:38+0100")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"%U")," Unix timestamp with nanoseconds, e.g. 1470818943.786368637"))),Object(a.b)("h4",{id:"time-related-parameters"},"Time related parameters"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"@@")," a literal @."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"@X")," pass the character represented by ",Object(a.b)("inlineCode",{parentName:"li"},"X")," to the strftime function as ",Object(a.b)("inlineCode",{parentName:"li"},"%X"),". The options supported are platform dependent."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"@N")," the number of nanoseconds that have passed in the current second, with varying timing resolution depending on platform.")),Object(a.b)("h4",{id:"escape-characters"},"Escape characters"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\\\")," a literal ","\\","."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\0")," a null character. Can be used to separate different parameters that may contain spaces (e.g. topic, payload) so that processing with tools such as ",Object(a.b)("a",Object(i.a)({parentName:"li"},{href:"#"}),"xargs(1)")," is easier."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\a")," alert/bell."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\e")," the escape sequence, which can be used with ANSI colour codes to provide coloured output for example."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\n")," end of line."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\r")," carriage return."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\t")," horizontal tab."),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"\\v")," vertical tab.")),Object(a.b)("h3",{id:"wills"},"Wills"),Object(a.b)("p",null,"mosquitto","_","sub can register a message with the broker that will be sent out if it disconnects unexpectedly. See ",Object(a.b)("a",Object(i.a)({parentName:"p"},{href:"#"}),"mqtt(7)")," for more information."),Object(a.b)("p",null,"The minimum requirement for this is to use ",Object(a.b)("inlineCode",{parentName:"p"},"--will-topic")," to specify which topic the will should be sent out on. This will result in a non-retained, zero length message with QoS 0."),Object(a.b)("p",null,"Use the ",Object(a.b)("inlineCode",{parentName:"p"},"--will-retain"),", ",Object(a.b)("inlineCode",{parentName:"p"},"--will-payload")," and ",Object(a.b)("inlineCode",{parentName:"p"},"--will-qos")," arguments to modify the other will parameters."),Object(a.b)("h3",{id:"properties"},"Properties"),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"-D")," / ",Object(a.b)("inlineCode",{parentName:"p"},"--property")," option allows adding properties to different stages of the mosquitto","_","sub run. The properties supported for each command are as follows:"),Object(a.b)("h4",{id:"connect"},"Connect"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"authentication-data")," (binary data - note treated as a string in mosquitto","_","sub)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"authentication-method")," (UTF-8 string)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"maximum-packet-size")," (32-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"receive-maximum")," (16-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"request-problem-information")," (8-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"request-response-information")," (8-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"session-expiry-interval")," (32-bit unsigned integer, note use ",Object(a.b)("inlineCode",{parentName:"li"},"-x")," instead)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"topic-alias-maximum")," (16-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"user-property")," (UTF-8 string pair)")),Object(a.b)("h4",{id:"subscribe"},"Subscribe"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"user-property")," (UTF-8 string pair)")),Object(a.b)("h4",{id:"unsubscribe"},"Unsubscribe"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"user-property")," (UTF-8 string pair)")),Object(a.b)("h4",{id:"disconnect"},"Disconnect"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"session-expiry-interval")," (32-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"user-property")," (UTF-8 string pair)")),Object(a.b)("h4",{id:"will-properties"},"Will properties"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"content-type")," (UTF-8 string)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"correlation-data")," (binary data - note treated as a string in mosquitto","_","sub)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"message-expiry-interval")," (32-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"payload-format-indicator")," (8-bit unsigned integer)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"response-topic")," (UTF-8 string)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"user-property")," (UTF-8 string pair)"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"will-delay-interval")," (32-bit unsigned integer)")),Object(a.b)("h3",{id:"exit-status"},"Exit Status"),Object(a.b)("p",null,"mosquitto","_","sub returns zero on success, or non-zero on error. If the connection is refused by the broker at the MQTT level, then the exit code is the CONNACK reason code. If another error occurs, the exit code is a libmosquitto return value."),Object(a.b)("p",null,"MQTT v3.1.1 CONNACK codes:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"0")," Success"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"1")," Connection refused: Bad protocol version"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"2")," Connection refused: Identifier rejected"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"3")," Connection refused: Server unavailable"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"4")," Connection refused: Bad username/password"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"5")," Connection refused: Not authorized")),Object(a.b)("p",null,"MQTT v5 CONNACK codes:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"0")," Success"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"128")," Unspecified error"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"129")," Malformed packet"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"130")," Protocol error"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"131")," Implementation specific error"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"132")," Unsupported protocol version"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"133")," Client ID not valid"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"134")," Bad username or password"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"135")," Not authorized"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"136")," Server unavailable"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"137")," Server busy"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"138")," Banned"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"139")," Server shutting down"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"140")," Bad authentication method"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"141")," Keep alive timeout"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"142")," Session taken over"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"143")," Topic filter invalid"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"144")," Topic name invalid"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"147")," Receive maximum exceeded"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"148")," Topic alias invalid"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"149")," Packet too large"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"148")," Message rate too high"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"151")," Quota exceeded"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"152")," Administrative action"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"153")," Payload format invalid"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"154")," Retain not supported"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"155")," QoS not supported"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"156")," Use another server"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"157")," Server moved"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"158")," Shared subscriptions not supported"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"159")," Connection rate exceeded"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"160")," Maximum connect time"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"161")," Subscription IDs not supported"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"162")," Wildcard subscriptions not supported")),Object(a.b)("h3",{id:"examples"},"Examples"),Object(a.b)("p",null,"Note that these really are examples - the subscriptions will work if you run them as shown, but there must be something publishing messages on those topics for you to receive anything."),Object(a.b)("p",null,"Subscribe to temperature information on localhost with QoS 1:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," sensors/temperature ",Object(a.b)("inlineCode",{parentName:"li"},"-q")," 1")),Object(a.b)("p",null,"Subscribe to hard drive temperature updates on multiple machines/hard drives. This expects each machine to be publishing its hard drive temperature to sensors/machines/HOSTNAME/temperature/HD","_","NAME."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," sensors/machines/+/temperature/+")),Object(a.b)("p",null,"Subscribe to all broker status messages:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-v")," ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," ","\\","$SYS/#")),Object(a.b)("p",null,'Specify the output format as "ISO-8601 date : topic : payload in hex"'),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-F '@Y-@m-@dT@H:@M:@S@z : %t : %x'")," ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," '#'")),Object(a.b)("p",null,'Specify the output format as "seconds since epoch.nanoseconds : retained flag : qos : mid : payload length"'),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-F '%@s.@N : %r : %q : %m : %l'")," ",Object(a.b)("inlineCode",{parentName:"li"},"-q 2")," ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," '#'")),Object(a.b)("p",null,"Topic and payload output, but with colour where supported."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"mosquitto","_","sub ",Object(a.b)("inlineCode",{parentName:"li"},"-F '\\e[92m%t \\e[96m%p\\e[0m'")," ",Object(a.b)("inlineCode",{parentName:"li"},"-q 2")," ",Object(a.b)("inlineCode",{parentName:"li"},"-t")," '#'")),Object(a.b)("h3",{id:"exit-values"},"Exit Values"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"0")),Object(a.b)("p",null,"Success"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"27")),Object(a.b)("p",null,"Timed out waiting for message"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"Other non-zero value")),Object(a.b)("p",null,"Unspecified failure"),Object(a.b)("h3",{id:"files"},"Files"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"$XDG_CONFIG_HOME/mosquitto_sub"),",",Object(a.b)("br",{parentName:"p"}),"\n",Object(a.b)("inlineCode",{parentName:"p"},"$HOME/.config/mosquitto_sub")),Object(a.b)("p",null,"Configuration file for default options."))}p.isMDXComponent=!0},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n(0),a=n.n(i);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},b=Object.keys(e);for(i=0;i<b.length;i++)n=b[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(i=0;i<b.length;i++)n=b[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),s=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=s(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,b=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=s(n),d=i,u=c["".concat(o,".").concat(d)]||c[d]||m[d]||b;return n?a.a.createElement(u,r(r({ref:t},p),{},{components:n})):a.a.createElement(u,r({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var b=n.length,o=new Array(b);o[0]=d;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:i,o[1]=r;for(var p=2;p<b;p++)o[p]=n[p];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);